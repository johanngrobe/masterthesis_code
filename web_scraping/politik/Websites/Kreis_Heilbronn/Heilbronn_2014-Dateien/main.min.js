!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@fullcalendar/core")):"function"==typeof define&&define.amd?define(["exports","@fullcalendar/core"],e):e((t=t||self).SSTFullCalendarList={},t.SSTFullCalendar)}(this,function(t,h){"use strict";var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s])})(t,e)};function e(t,e){function s(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}var c=function(s){function t(t){var e=s.call(this,t.context)||this;return e.listView=t,e}return e(t,s),t.prototype.attachSegs=function(t){t.length?this.listView.renderSegList(t):this.listView.renderEmptyMessage()},t.prototype.detachSegs=function(){},t.prototype.renderSegHtml=function(t){var e,s=this.context,n=s.view,r=s.theme,a=t.eventRange,i=a.def,o=a.instance,l=a.ui,d=i.url,c=["sstfc-list-item"].concat(l.classNames),p=l.backgroundColor;return e=i.allDay?h.getAllDayHtml(n):h.isMultiDayRange(a.range)?t.isStart?h.htmlEscape(this._getTimeText(o.range.start,t.end,!1)):t.isEnd?h.htmlEscape(this._getTimeText(t.start,o.range.end,!1)):h.getAllDayHtml(n):h.htmlEscape(this.getTimeText(a)),d&&c.push("sstfc-has-url"),'<tr class="'+c.join(" ")+'">'+(this.displayEventTime?'<td class="sstfc-list-item-time '+r.getClass("widgetContent")+'">'+(e||"")+"</td>":"")+'<td class="sstfc-list-item-marker '+r.getClass("widgetContent")+'"><span class="sstfc-event-dot"'+(p?' style="background-color:'+p+'"':"")+'></span></td><td class="sstfc-list-item-title '+r.getClass("widgetContent")+'"><a'+(d?' href="'+h.htmlEscape(d)+'"':"")+">"+h.htmlEscape(i.title||"")+"</a></td></tr>"},t.prototype.computeEventTimeFormat=function(){return{hour:"numeric",minute:"2-digit",meridiem:"short"}},t}(h.FgEventRenderer),s=function(d){function t(t,e,s,n){var r=d.call(this,t,e,s,n)||this;r.computeDateVars=h.memoize(p),r.eventStoreToSegs=h.memoize(r._eventStoreToSegs);var a=r.eventRenderer=new c(r);r.renderContent=h.memoizeRendering(a.renderSegs.bind(a),a.unrender.bind(a)),r.el.classList.add("sstfc-list-view");for(var i=0,o=(r.theme.getClass("listView")||"").split(" ");i<o.length;i++){var l=o[i];l&&r.el.classList.add(l)}return r.scroller=new h.ScrollComponent("hidden","auto"),r.el.appendChild(r.scroller.el),r.contentEl=r.scroller.el,t.calendar.registerInteractiveComponent(r,{el:r.el}),r}return e(t,d),t.prototype.render=function(t){var e=this.computeDateVars(t.dateProfile),s=e.dayDates,n=e.dayRanges;this.dayDates=s,this.renderContent(this.eventStoreToSegs(t.eventStore,t.eventUiBases,n))},t.prototype.destroy=function(){d.prototype.destroy.call(this),this.renderContent.unrender(),this.scroller.destroy(),this.calendar.unregisterInteractiveComponent(this)},t.prototype.updateSize=function(t,e,s){d.prototype.updateSize.call(this,t,e,s),this.eventRenderer.computeSizes(t),this.eventRenderer.assignSizes(t),this.scroller.clear(),s||this.scroller.setHeight(this.computeScrollerHeight(e))},t.prototype.computeScrollerHeight=function(t){return t-h.subtractInnerElHeight(this.el,this.scroller.el)},t.prototype._eventStoreToSegs=function(t,e,s){return this.eventRangesToSegs(h.sliceEventStore(t,e,this.props.dateProfile.activeRange,this.nextDayThreshold).fg,s)},t.prototype.eventRangesToSegs=function(t,e){for(var s=[],n=0,r=t;n<r.length;n++){var a=r[n];s.push.apply(s,this.eventRangeToSegs(a,e))}return s},t.prototype.eventRangeToSegs=function(t,e){var s,n,r,a=this.dateEnv,i=this.nextDayThreshold,o=t.range,l=t.def.allDay,d=[];for(s=0;s<e.length;s++)if((n=h.intersectRanges(o,e[s]))&&(r={component:this,eventRange:t,start:n.start,end:n.end,isStart:t.isStart&&n.start.valueOf()===o.start.valueOf(),isEnd:t.isEnd&&n.end.valueOf()===o.end.valueOf(),dayIndex:s},d.push(r),!r.isEnd&&!l&&s+1<e.length&&o.end<a.add(e[s+1].start,i))){r.end=o.end,r.isEnd=!0;break}return d},t.prototype.renderEmptyMessage=function(){this.contentEl.innerHTML='<div class="sstfc-list-empty-wrap2"><div class="sstfc-list-empty-wrap1"><div class="sstfc-list-empty">'+h.htmlEscape(this.opt("noEventsMessage"))+"</div></div></div>"},t.prototype.renderSegList=function(t){var e,s,n,r=this.groupSegsByDay(t),a=h.htmlToElement('<table class="sstfc-list-table '+this.calendar.theme.getClass("tableList")+'"><tbody></tbody></table>'),i=a.querySelector("tbody");for(e=0;e<r.length;e++)if(s=r[e])for(i.appendChild(this.buildDayHeaderRow(this.dayDates[e])),s=this.eventRenderer.sortEventSegs(s),n=0;n<s.length;n++)i.appendChild(s[n].el);this.contentEl.innerHTML="",this.contentEl.appendChild(a)},t.prototype.groupSegsByDay=function(t){var e,s,n=[];for(e=0;e<t.length;e++)(n[(s=t[e]).dayIndex]||(n[s.dayIndex]=[])).push(s);return n},t.prototype.buildDayHeaderRow=function(t){var e=this.dateEnv,s=h.createFormatter(this.opt("listDayFormat")),n=h.createFormatter(this.opt("listDayAltFormat"));return h.createElement("tr",{className:"sstfc-list-heading","data-date":e.formatIso(t,{omitTime:!0})},'<td class="'+(this.calendar.theme.getClass("tableListHeading")||this.calendar.theme.getClass("widgetHeader"))+'" colspan="3">'+(s?h.buildGotoAnchorHtml(this,t,{class:"sstfc-list-heading-main"},h.htmlEscape(e.format(t,s))):"")+(n?h.buildGotoAnchorHtml(this,t,{class:"sstfc-list-heading-alt"},h.htmlEscape(e.format(t,n))):"")+"</td>")},t}(h.View);function p(t){for(var e=h.startOfDay(t.renderRange.start),s=t.renderRange.end,n=[],r=[];e<s;)n.push(e),r.push({start:e,end:h.addDays(e,1)}),e=h.addDays(e,1);return{dayDates:n,dayRanges:r}}s.prototype.fgSegSelector=".sstfc-list-item";var r=h.createPlugin({views:{list:{class:s,buttonTextKey:"list",listDayFormat:{month:"long",day:"numeric",year:"numeric"}},listDay:{type:"list",duration:{days:1},listDayFormat:{weekday:"long"}},listWeek:{type:"list",duration:{weeks:1},listDayFormat:{weekday:"long"},listDayAltFormat:{month:"long",day:"numeric",year:"numeric"}},listMonth:{type:"list",duration:{month:1},listDayAltFormat:{weekday:"long"}},listYear:{type:"list",duration:{year:1},listDayAltFormat:{weekday:"long"}}}});t.ListView=s,t.default=r,Object.defineProperty(t,"__esModule",{value:!0})});
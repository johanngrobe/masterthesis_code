!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@fullcalendar/core"),require("@fullcalendar/daygrid")):"function"==typeof define&&define.amd?define(["exports","@fullcalendar/core","@fullcalendar/daygrid"],t):t((e=e||self).SSTFullCalendarTimeGrid={},e.SSTFullCalendar,e.SSTFullCalendarDayGrid)}(this,function(e,y,d){"use strict";var i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function o(e,t){function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var s=function(){return(s=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)},l=function(r){function e(e){var t=r.call(this,e.context)||this;return t.timeGrid=e,t.fullTimeFormat=y.createFormatter({hour:"numeric",minute:"2-digit",separator:t.context.options.defaultRangeSeparator}),t}return o(e,r),e.prototype.attachSegs=function(e,t){for(var r=this.timeGrid.groupSegsByCol(e),i=0;i<r.length;i++)r[i]=this.sortEventSegs(r[i]);this.segsByCol=r,this.timeGrid.attachSegsByCol(r,this.timeGrid.fgContainerEls)},e.prototype.detachSegs=function(e){e.forEach(function(e){y.removeElement(e.el)}),this.segsByCol=null},e.prototype.computeSegSizes=function(e){var t=this.timeGrid,r=this.segsByCol,i=t.colCnt;if(t.computeSegVerticals(e),r)for(var s=0;s<i;s++)this.computeSegHorizontals(r[s])},e.prototype.assignSegSizes=function(e){var t=this.timeGrid,r=this.segsByCol,i=t.colCnt;if(t.assignSegVerticals(e),r)for(var s=0;s<i;s++)this.assignSegCss(r[s])},e.prototype.computeEventTimeFormat=function(){return{hour:"numeric",minute:"2-digit",meridiem:!1}},e.prototype.computeDisplayEventEnd=function(){return!0},e.prototype.renderSegHtml=function(e,t){var r,i,s,n=this.context.view,o=e.eventRange,a=o.def,l=o.ui,d=a.allDay,c=n.computeEventDraggable(a,l),h=e.isStart&&n.computeEventStartResizable(a,l),u=e.isEnd&&n.computeEventEndResizable(a,l),p=this.getSegClasses(e,c,h||u,t),f=y.cssToStr(this.getSkinCss(l));if(p.unshift("sstfc-time-grid-event"),y.isMultiDayRange(o.range)){if(e.isStart||e.isEnd){var g=e.start,m=e.end;r=this._getTimeText(g,m,d),i=this._getTimeText(g,m,d,this.fullTimeFormat),s=this._getTimeText(g,m,d,null,!1)}}else r=this.getTimeText(o),i=this.getTimeText(o,this.fullTimeFormat),s=this.getTimeText(o,null,!1);return'<a class="'+p.join(" ")+'"'+(a.url?' href="'+y.htmlEscape(a.url)+'"':"")+(f?' style="'+f+'"':"")+'><div class="sstfc-content">'+(r?'<div class="sstfc-time" data-start="'+y.htmlEscape(s)+'" data-full="'+y.htmlEscape(i)+'"><span>'+y.htmlEscape(r)+"</span></div>":"")+(a.title?'<div class="sstfc-title">'+y.htmlEscape(a.title)+"</div>":"")+"</div>"+(u?'<div class="sstfc-resizer sstfc-end-resizer"></div>':"")+"</a>"},e.prototype.computeSegHorizontals=function(e){var t,r,i;if(function(e){var t,r,i,s,n;for(t=0;t<e.length;t++)for(r=e[t],i=0;i<r.length;i++)for((s=r[i]).forwardSegs=[],n=t+1;n<e.length;n++)a(s,e[n],s.forwardSegs)}(t=function(e){var t,r,i,s=[];for(t=0;t<e.length;t++){for(r=e[t],i=0;i<s.length&&a(r,s[i]).length;i++);(s[r.level=i]||(s[i]=[])).push(r)}return s}(e)),r=t[0]){for(i=0;i<r.length;i++)n(r[i]);for(i=0;i<r.length;i++)this.computeSegForwardBack(r[i],0,0)}},e.prototype.computeSegForwardBack=function(e,t,r){var i,s=e.forwardSegs;if(void 0===e.forwardCoord)for(s.length?(this.sortForwardSegs(s),this.computeSegForwardBack(s[0],t+1,r),e.forwardCoord=s[0].backwardCoord):e.forwardCoord=1,e.backwardCoord=e.forwardCoord-(e.forwardCoord-r)/(t+1),i=0;i<s.length;i++)this.computeSegForwardBack(s[i],0,e.forwardCoord)},e.prototype.sortForwardSegs=function(e){var t=e.map(c),r=[{field:"forwardPressure",order:-1},{field:"backwardCoord",order:1}].concat(this.context.view.eventOrderSpecs);return t.sort(function(e,t){return y.compareByFieldSpecs(e,t,r)}),t.map(function(e){return e._seg})},e.prototype.assignSegCss=function(e){for(var t=0,r=e;t<r.length;t++){var i=r[t];y.applyStyle(i.el,this.generateSegCss(i)),0<i.level&&i.el.classList.add("sstfc-time-grid-event-inset"),i.eventRange.def.title&&i.bottom-i.top<30&&i.el.classList.add("sstfc-short")}},e.prototype.generateSegCss=function(e){var t,r,i=this.context.options.slotEventOverlap,s=e.backwardCoord,n=e.forwardCoord,o=this.timeGrid.generateSegVerticalCss(e),a=this.timeGrid.isRtl;return i&&(n=Math.min(1,s+2*(n-s))),a?(t=1-n,r=s):(t=s,r=1-n),o.zIndex=e.level+1,o.left=100*t+"%",o.right=100*r+"%",i&&e.forwardPressure&&(o[a?"marginLeft":"marginRight"]=20),o},e}(y.FgEventRenderer);function n(e){var t,r,i=e.forwardSegs,s=0;if(void 0===e.forwardPressure){for(t=0;t<i.length;t++)n(r=i[t]),s=Math.max(s,1+r.forwardPressure);e.forwardPressure=s}}function a(e,t,r){void 0===r&&(r=[]);for(var i=0;i<t.length;i++)s=e,n=t[i],s.bottom>n.top&&s.top<n.bottom&&r.push(t[i]);var s,n;return r}function c(e){var t=y.buildSegCompareObj(e);return t.forwardPressure=e.forwardPressure,t.backwardCoord=e.backwardCoord,t}var h=function(s){function e(){return null!==s&&s.apply(this,arguments)||this}return o(e,s),e.prototype.attachSegs=function(e,t){this.segsByCol=this.timeGrid.groupSegsByCol(e),this.timeGrid.attachSegsByCol(this.segsByCol,this.timeGrid.mirrorContainerEls),this.sourceSeg=t.sourceSeg},e.prototype.generateSegCss=function(e){var t=s.prototype.generateSegCss.call(this,e),r=this.sourceSeg;if(r&&r.col===e.col){var i=s.prototype.generateSegCss.call(this,r);t.left=i.left,t.right=i.right,t.marginLeft=i.marginLeft,t.marginRight=i.marginRight}return t},e}(l),u=function(r){function e(e){var t=r.call(this,e.context)||this;return t.timeGrid=e,t}return o(e,r),e.prototype.attachSegs=function(e,t){var r,i=this.timeGrid;return"bgEvent"===e?r=i.bgContainerEls:"businessHours"===e?r=i.businessContainerEls:"highlight"===e&&(r=i.highlightContainerEls),i.attachSegsByCol(i.groupSegsByCol(t),r),t.map(function(e){return e.el})},e.prototype.computeSegSizes=function(e){this.timeGrid.computeSegVerticals(e)},e.prototype.assignSegSizes=function(e){this.timeGrid.assignSegVerticals(e)},e}(y.FillRenderer),p=[{hours:1},{minutes:30},{minutes:15},{seconds:30},{seconds:15}],f=function(a){function e(e,t,r){var i=a.call(this,e,t)||this;i.isSlatSizesDirty=!1,i.isColSizesDirty=!1,i.renderSlats=y.memoizeRendering(i._renderSlats);var s=i.eventRenderer=new l(i),n=i.fillRenderer=new u(i);i.mirrorRenderer=new h(i);var o=i.renderColumns=y.memoizeRendering(i._renderColumns,i._unrenderColumns);return i.renderBusinessHours=y.memoizeRendering(n.renderSegs.bind(n,"businessHours"),n.unrender.bind(n,"businessHours"),[o]),i.renderDateSelection=y.memoizeRendering(i._renderDateSelection,i._unrenderDateSelection,[o]),i.renderFgEvents=y.memoizeRendering(s.renderSegs.bind(s),s.unrender.bind(s),[o]),i.renderBgEvents=y.memoizeRendering(n.renderSegs.bind(n,"bgEvent"),n.unrender.bind(n,"bgEvent"),[o]),i.renderEventSelection=y.memoizeRendering(s.selectByInstanceId.bind(s),s.unselectByInstanceId.bind(s),[i.renderFgEvents]),i.renderEventDrag=y.memoizeRendering(i._renderEventDrag,i._unrenderEventDrag,[o]),i.renderEventResize=y.memoizeRendering(i._renderEventResize,i._unrenderEventResize,[o]),i.processOptions(),t.innerHTML='<div class="sstfc-bg"></div><div class="sstfc-slats"></div><hr class="sstfc-divider '+i.theme.getClass("widgetHeader")+'" style="display:none" />',i.rootBgContainerEl=t.querySelector(".sstfc-bg"),i.slatContainerEl=t.querySelector(".sstfc-slats"),i.bottomRuleEl=t.querySelector(".sstfc-divider"),i.renderProps=r,i}return o(e,a),e.prototype.processOptions=function(){var e,t,r=this.opt("slotDuration"),i=this.opt("snapDuration");r=y.createDuration(r),i=i?y.createDuration(i):r,null===(e=y.wholeDivideDurations(r,i))&&(i=r,e=1),this.slotDuration=r,this.snapDuration=i,this.snapsPerSlot=e,t=this.opt("slotLabelFormat"),Array.isArray(t)&&(t=t[t.length-1]),this.labelFormat=y.createFormatter(t||{hour:"numeric",minute:"2-digit",omitZeroMinute:!0,meridiem:"short"}),t=this.opt("slotLabelInterval"),this.labelInterval=t?y.createDuration(t):this.computeLabelInterval(r)},e.prototype.computeLabelInterval=function(e){var t,r,i;for(t=p.length-1;0<=t;t--)if(r=y.createDuration(p[t]),null!==(i=y.wholeDivideDurations(r,e))&&1<i)return r;return e},e.prototype.render=function(e){var t=e.cells;this.colCnt=t.length,this.renderSlats(e.dateProfile),this.renderColumns(e.cells,e.dateProfile),this.renderBusinessHours(e.businessHourSegs),this.renderDateSelection(e.dateSelectionSegs),this.renderFgEvents(e.fgEventSegs),this.renderBgEvents(e.bgEventSegs),this.renderEventSelection(e.eventSelection),this.renderEventDrag(e.eventDrag),this.renderEventResize(e.eventResize)},e.prototype.destroy=function(){a.prototype.destroy.call(this),this.renderSlats.unrender(),this.renderColumns.unrender()},e.prototype.updateSize=function(e){var t=this.fillRenderer,r=this.eventRenderer,i=this.mirrorRenderer;(e||this.isSlatSizesDirty)&&(this.buildSlatPositions(),this.isSlatSizesDirty=!1),(e||this.isColSizesDirty)&&(this.buildColPositions(),this.isColSizesDirty=!1),t.computeSizes(e),r.computeSizes(e),i.computeSizes(e),t.assignSizes(e),r.assignSizes(e),i.assignSizes(e)},e.prototype._renderSlats=function(e){var t=this.theme;this.slatContainerEl.innerHTML='<table class="'+t.getClass("tableGrid")+'">'+this.renderSlatRowHtml(e)+"</table>",this.slatEls=y.findElements(this.slatContainerEl,"tr"),this.slatPositions=new y.PositionCache(this.el,this.slatEls,!1,!0),this.isSlatSizesDirty=!0},e.prototype.renderSlatRowHtml=function(e){for(var t,r,i,s=this.dateEnv,n=this.theme,o=this.isRtl,a="",l=y.startOfDay(e.renderRange.start),d=e.minTime,c=y.createDuration(0);y.asRoughMs(d)<y.asRoughMs(e.maxTime);)t=s.add(l,d),r=null!==y.wholeDivideDurations(c,this.labelInterval),i='<td class="sstfc-axis sstfc-time '+n.getClass("widgetContent")+'">'+(r?"<span>"+y.htmlEscape(s.format(t,this.labelFormat))+"</span>":"")+"</td>",a+='<tr data-time="'+y.formatIsoTimeString(t)+'"'+(r?"":' class="sstfc-minor"')+">"+(o?"":i)+'<td class="'+n.getClass("widgetContent")+'"></td>'+(o?i:"")+"</tr>",d=y.addDurations(d,this.slotDuration),c=y.addDurations(c,this.slotDuration);return a},e.prototype._renderColumns=function(e,t){var r=this.theme,i=this.dateEnv,s=this.view,n=new d.DayBgRow(this.context);this.rootBgContainerEl.innerHTML='<table class="'+r.getClass("tableGrid")+'">'+n.renderHtml({cells:e,dateProfile:t,renderIntroHtml:this.renderProps.renderBgIntroHtml})+"</table>",this.colEls=y.findElements(this.el,".sstfc-day, .sstfc-disabled-day");for(var o=0;o<this.colCnt;o++)this.publiclyTrigger("dayRender",[{date:i.toDate(e[o].date),el:this.colEls[o],view:s}]);this.isRtl&&this.colEls.reverse(),this.colPositions=new y.PositionCache(this.el,this.colEls,!0,!1),this.renderContentSkeleton(),this.isColSizesDirty=!0},e.prototype._unrenderColumns=function(){this.unrenderContentSkeleton()},e.prototype.renderContentSkeleton=function(){var e,t=[];t.push(this.renderProps.renderIntroHtml());for(var r=0;r<this.colCnt;r++)t.push('<td><div class="sstfc-content-col"><div class="sstfc-event-container sstfc-mirror-container"></div><div class="sstfc-event-container"></div><div class="sstfc-highlight-container"></div><div class="sstfc-bgevent-container"></div><div class="sstfc-business-container"></div></div></td>');this.isRtl&&t.reverse(),e=this.contentSkeletonEl=y.htmlToElement('<div class="sstfc-content-skeleton"><table><tr>'+t.join("")+"</tr></table></div>"),this.colContainerEls=y.findElements(e,".sstfc-content-col"),this.mirrorContainerEls=y.findElements(e,".sstfc-mirror-container"),this.fgContainerEls=y.findElements(e,".sstfc-event-container:not(.sstfc-mirror-container)"),this.bgContainerEls=y.findElements(e,".sstfc-bgevent-container"),this.highlightContainerEls=y.findElements(e,".sstfc-highlight-container"),this.businessContainerEls=y.findElements(e,".sstfc-business-container"),this.isRtl&&(this.colContainerEls.reverse(),this.mirrorContainerEls.reverse(),this.fgContainerEls.reverse(),this.bgContainerEls.reverse(),this.highlightContainerEls.reverse(),this.businessContainerEls.reverse()),this.el.appendChild(e)},e.prototype.unrenderContentSkeleton=function(){y.removeElement(this.contentSkeletonEl)},e.prototype.groupSegsByCol=function(e){var t,r=[];for(t=0;t<this.colCnt;t++)r.push([]);for(t=0;t<e.length;t++)r[e[t].col].push(e[t]);return r},e.prototype.attachSegsByCol=function(e,t){var r,i,s;for(r=0;r<this.colCnt;r++)for(i=e[r],s=0;s<i.length;s++)t[r].appendChild(i[s].el)},e.prototype.getNowIndicatorUnit=function(){return"minute"},e.prototype.renderNowIndicator=function(e,t){if(this.colContainerEls){var r,i=this.computeDateTop(t),s=[];for(r=0;r<e.length;r++){var n=y.createElement("div",{className:"sstfc-now-indicator sstfc-now-indicator-line"});n.style.top=i+"px",this.colContainerEls[e[r].col].appendChild(n),s.push(n)}if(0<e.length){var o=y.createElement("div",{className:"sstfc-now-indicator sstfc-now-indicator-arrow"});o.style.top=i+"px",this.contentSkeletonEl.appendChild(o),s.push(o)}this.nowIndicatorEls=s}},e.prototype.unrenderNowIndicator=function(){this.nowIndicatorEls&&(this.nowIndicatorEls.forEach(y.removeElement),this.nowIndicatorEls=null)},e.prototype.getTotalSlatHeight=function(){return this.slatContainerEl.getBoundingClientRect().height},e.prototype.computeDateTop=function(e,t){return t||(t=y.startOfDay(e)),this.computeTimeTop(y.createDuration(e.valueOf()-t.valueOf()))},e.prototype.computeTimeTop=function(e){var t,r,i=this.slatEls.length,s=this.props.dateProfile,n=(e.milliseconds-y.asRoughMs(s.minTime))/y.asRoughMs(this.slotDuration);return n=Math.max(0,n),n=Math.min(i,n),t=Math.floor(n),r=n-(t=Math.min(t,i-1)),this.slatPositions.tops[t]+this.slatPositions.getHeight(t)*r},e.prototype.computeSegVerticals=function(e){var t,r,i,s=this.opt("timeGridEventMinHeight");for(t=0;t<e.length;t++)r=e[t],i=this.props.cells[r.col].date,r.top=this.computeDateTop(r.start,i),r.bottom=Math.max(r.top+s,this.computeDateTop(r.end,i))},e.prototype.assignSegVerticals=function(e){var t,r;for(t=0;t<e.length;t++)r=e[t],y.applyStyle(r.el,this.generateSegVerticalCss(r))},e.prototype.generateSegVerticalCss=function(e){return{top:e.top,bottom:-e.bottom}},e.prototype.buildPositionCaches=function(){this.buildColPositions(),this.buildSlatPositions()},e.prototype.buildColPositions=function(){this.colPositions.build()},e.prototype.buildSlatPositions=function(){this.slatPositions.build()},e.prototype.positionToHit=function(e,t){var r=this.dateEnv,i=this.snapsPerSlot,s=this.slatPositions,n=this.colPositions,o=n.leftToIndex(e),a=s.topToIndex(t);if(null!=o&&null!=a){var l=s.tops[a],d=s.getHeight(a),c=(t-l)/d,h=a*i+Math.floor(c*i),u=this.props.cells[o].date,p=y.addDurations(this.props.dateProfile.minTime,y.multiplyDuration(this.snapDuration,h)),f=r.add(u,p);return{col:o,dateSpan:{range:{start:f,end:r.add(f,this.snapDuration)},allDay:!1},dayEl:this.colEls[o],relativeRect:{left:n.lefts[o],right:n.rights[o],top:l,bottom:l+d}}}},e.prototype._renderEventDrag=function(e){e&&(this.eventRenderer.hideByHash(e.affectedInstances),e.isEvent?this.mirrorRenderer.renderSegs(e.segs,{isDragging:!0,sourceSeg:e.sourceSeg}):this.fillRenderer.renderSegs("highlight",e.segs))},e.prototype._unrenderEventDrag=function(e){e&&(this.eventRenderer.showByHash(e.affectedInstances),this.mirrorRenderer.unrender(e.segs,{isDragging:!0,sourceSeg:e.sourceSeg}),this.fillRenderer.unrender("highlight"))},e.prototype._renderEventResize=function(e){e&&(this.eventRenderer.hideByHash(e.affectedInstances),this.mirrorRenderer.renderSegs(e.segs,{isResizing:!0,sourceSeg:e.sourceSeg}))},e.prototype._unrenderEventResize=function(e){e&&(this.eventRenderer.showByHash(e.affectedInstances),this.mirrorRenderer.unrender(e.segs,{isResizing:!0,sourceSeg:e.sourceSeg}))},e.prototype._renderDateSelection=function(e){e&&(this.opt("selectMirror")?this.mirrorRenderer.renderSegs(e,{isSelecting:!0}):this.fillRenderer.renderSegs("highlight",e))},e.prototype._unrenderDateSelection=function(e){this.mirrorRenderer.unrender(e,{isSelecting:!0}),this.fillRenderer.unrender("highlight")},e}(y.DateComponent),g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.getKeyInfo=function(){return{allDay:{},timed:{}}},t.prototype.getKeysForDateSpan=function(e){return e.allDay?["allDay"]:["timed"]},t.prototype.getKeysForEventDef=function(e){return e.allDay?y.hasBgRendering(e)?["timed","allDay"]:["allDay"]:["timed"]},t}(y.Splitter),m=y.createFormatter({week:"short"}),t=function(l){function e(e,t,r,i){var o=l.call(this,e,t,r,i)||this;o.splitter=new g,o.renderHeadIntroHtml=function(){var e,t=o,r=t.theme,i=t.dateEnv,s=o.props.dateProfile.renderRange,n=y.diffDays(s.start,s.end);return o.opt("weekNumbers")?(e=i.format(s.start,m),'<th class="sstfc-axis sstfc-week-number '+r.getClass("widgetHeader")+'" '+o.axisStyleAttr()+">"+y.buildGotoAnchorHtml(o,{date:s.start,type:"week",forceOff:1<n},y.htmlEscape(e))+"</th>"):'<th class="sstfc-axis '+r.getClass("widgetHeader")+'" '+o.axisStyleAttr()+"></th>"},o.renderTimeGridBgIntroHtml=function(){return'<td class="sstfc-axis '+o.theme.getClass("widgetContent")+'" '+o.axisStyleAttr()+"></td>"},o.renderTimeGridIntroHtml=function(){return'<td class="sstfc-axis" '+o.axisStyleAttr()+"></td>"},o.renderDayGridBgIntroHtml=function(){return'<td class="sstfc-axis '+o.theme.getClass("widgetContent")+'" '+o.axisStyleAttr()+"><span>"+y.getAllDayHtml(o)+"</span></td>"},o.renderDayGridIntroHtml=function(){return'<td class="sstfc-axis" '+o.axisStyleAttr()+"></td>"},o.el.classList.add("sstfc-timeGrid-view"),o.el.innerHTML=o.renderSkeletonHtml(),o.scroller=new y.ScrollComponent("hidden","auto");var s=o.scroller.el;o.el.querySelector(".sstfc-body > tr > td").appendChild(s),s.classList.add("sstfc-time-grid-container");var n=y.createElement("div",{className:"sstfc-time-grid"});if(s.appendChild(n),o.timeGrid=new f(o.context,n,{renderBgIntroHtml:o.renderTimeGridBgIntroHtml,renderIntroHtml:o.renderTimeGridIntroHtml}),o.opt("allDaySlot")){o.dayGrid=new d.DayGrid(o.context,o.el.querySelector(".sstfc-day-grid"),{renderNumberIntroHtml:o.renderDayGridIntroHtml,renderBgIntroHtml:o.renderDayGridBgIntroHtml,renderIntroHtml:o.renderDayGridIntroHtml,colWeekNumbersVisible:!1,cellWeekNumbersVisible:!1});var a=o.el.querySelector(".sstfc-divider");o.dayGrid.bottomCoordPadding=a.getBoundingClientRect().height}return o}return o(e,l),e.prototype.destroy=function(){l.prototype.destroy.call(this),this.timeGrid.destroy(),this.dayGrid&&this.dayGrid.destroy(),this.scroller.destroy()},e.prototype.renderSkeletonHtml=function(){var e=this.theme;return'<table class="'+e.getClass("tableGrid")+'">'+(this.opt("columnHeader")?'<thead class="sstfc-head"><tr><td class="sstfc-head-container '+e.getClass("widgetHeader")+'">&nbsp;</td></tr></thead>':"")+'<tbody class="sstfc-body"><tr><td class="'+e.getClass("widgetContent")+'">'+(this.opt("allDaySlot")?'<div class="sstfc-day-grid"></div><hr class="sstfc-divider '+e.getClass("widgetHeader")+'" />':"")+"</td></tr></tbody></table>"},e.prototype.getNowIndicatorUnit=function(){return this.timeGrid.getNowIndicatorUnit()},e.prototype.unrenderNowIndicator=function(){this.timeGrid.unrenderNowIndicator()},e.prototype.updateSize=function(e,t,r){l.prototype.updateSize.call(this,e,t,r),this.timeGrid.updateSize(e),this.dayGrid&&this.dayGrid.updateSize(e)},e.prototype.updateBaseSize=function(e,t,r){var i,s,n,o=this;if(this.axisWidth=y.matchCellWidths(y.findElements(this.el,".sstfc-axis")),this.timeGrid.colEls){var a=y.findElements(this.el,".sstfc-row").filter(function(e){return!o.scroller.el.contains(e)});this.timeGrid.bottomRuleEl.style.display="none",this.scroller.clear(),a.forEach(y.uncompensateScroll),this.dayGrid&&(this.dayGrid.removeSegPopover(),(i=this.opt("eventLimit"))&&"number"!=typeof i&&(i=5),i&&this.dayGrid.limitRows(i)),r||(s=this.computeScrollerHeight(t),this.scroller.setHeight(s),((n=this.scroller.getScrollbarWidths()).left||n.right)&&(a.forEach(function(e){y.compensateScroll(e,n)}),s=this.computeScrollerHeight(t),this.scroller.setHeight(s)),this.scroller.lockOverflow(n),this.timeGrid.getTotalSlatHeight()<s&&(this.timeGrid.bottomRuleEl.style.display=""))}else r||(s=this.computeScrollerHeight(t),this.scroller.setHeight(s))},e.prototype.computeScrollerHeight=function(e){return e-y.subtractInnerElHeight(this.el,this.scroller.el)},e.prototype.computeDateScroll=function(e){var t=this.timeGrid.computeTimeTop(e);return(t=Math.ceil(t))&&t++,{top:t}},e.prototype.queryDateScroll=function(){return{top:this.scroller.getScrollTop()}},e.prototype.applyDateScroll=function(e){void 0!==e.top&&this.scroller.setScrollTop(e.top)},e.prototype.axisStyleAttr=function(){return null!=this.axisWidth?'style="width:'+this.axisWidth+'px"':""},e}(y.View);t.prototype.usesMinMaxTime=!0;var v=function(i){function e(e,t){var r=i.call(this,e,t.el)||this;return r.buildDayRanges=y.memoize(S),r.slicer=new C,r.timeGrid=t,e.calendar.registerInteractiveComponent(r,{el:r.timeGrid.el}),r}return o(e,i),e.prototype.destroy=function(){i.prototype.destroy.call(this),this.calendar.unregisterInteractiveComponent(this)},e.prototype.render=function(e){var t=e.dateProfile,r=e.dayTable,i=this.dayRanges=this.buildDayRanges(r,t,this.dateEnv);this.timeGrid.receiveProps(s({},this.slicer.sliceProps(e,t,null,this.timeGrid,i),{dateProfile:t,cells:r.cells[0]}))},e.prototype.renderNowIndicator=function(e){this.timeGrid.renderNowIndicator(this.slicer.sliceNowDate(e,this.timeGrid,this.dayRanges),e)},e.prototype.buildPositionCaches=function(){this.timeGrid.buildPositionCaches()},e.prototype.queryHit=function(e,t){var r=this.timeGrid.positionToHit(e,t);if(r)return{component:this.timeGrid,dateSpan:r.dateSpan,dayEl:r.dayEl,rect:{left:r.relativeRect.left,right:r.relativeRect.right,top:r.relativeRect.top,bottom:r.relativeRect.bottom},layer:0}},e}(y.DateComponent);function S(e,t,r){for(var i=[],s=0,n=e.headerDates;s<n.length;s++){var o=n[s];i.push({start:r.add(o,t.minTime),end:r.add(o,t.maxTime)})}return i}var C=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.sliceRange=function(e,t){for(var r=[],i=0;i<t.length;i++){var s=y.intersectRanges(e,t[i]);s&&r.push({start:s.start,end:s.end,isStart:s.start.valueOf()===e.start.valueOf(),isEnd:s.end.valueOf()===e.end.valueOf(),col:i})}return r},t}(y.Slicer),r=function(n){function e(e,t,r,i){var s=n.call(this,e,t,r,i)||this;return s.buildDayTable=y.memoize(E),s.opt("columnHeader")&&(s.header=new y.DayHeader(s.context,s.el.querySelector(".sstfc-head-container"))),s.simpleTimeGrid=new v(s.context,s.timeGrid),s.dayGrid&&(s.simpleDayGrid=new d.SimpleDayGrid(s.context,s.dayGrid)),s}return o(e,n),e.prototype.destroy=function(){n.prototype.destroy.call(this),this.header&&this.header.destroy(),this.simpleTimeGrid.destroy(),this.simpleDayGrid&&this.simpleDayGrid.destroy()},e.prototype.render=function(e){n.prototype.render.call(this,e);var t=this.props.dateProfile,r=this.buildDayTable(t,this.dateProfileGenerator),i=this.splitter.splitProps(e);this.header&&this.header.receiveProps({dateProfile:t,dates:r.headerDates,datesRepDistinctDays:!0,renderIntroHtml:this.renderHeadIntroHtml}),this.simpleTimeGrid.receiveProps(s({},i.timed,{dateProfile:t,dayTable:r})),this.simpleDayGrid&&this.simpleDayGrid.receiveProps(s({},i.allDay,{dateProfile:t,dayTable:r,nextDayThreshold:this.nextDayThreshold,isRigid:!1}))},e.prototype.renderNowIndicator=function(e){this.simpleTimeGrid.renderNowIndicator(e)},e}(t);function E(e,t){var r=new y.DaySeries(e.renderRange,t);return new y.DayTable(r,!1)}var b=y.createPlugin({defaultView:"timeGridWeek",views:{timeGrid:{class:r,allDaySlot:!0,slotDuration:"00:30:00",slotEventOverlap:!0},timeGridDay:{type:"timeGrid",duration:{days:1}},timeGridWeek:{type:"timeGrid",duration:{weeks:1}}}});e.AbstractTimeGridView=t,e.TimeGrid=f,e.TimeGridSlicer=C,e.TimeGridView=r,e.buildDayRanges=S,e.buildDayTable=E,e.default=b,Object.defineProperty(e,"__esModule",{value:!0})});
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@fullcalendar/core")):"function"==typeof define&&define.amd?define(["exports","@fullcalendar/core"],t):t((e=e||self).SSTFullCalendarDayGrid={},e.SSTFullCalendar)}(this,function(e,D){"use strict";var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function i(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var h=function(){return(h=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},t=function(d){function e(){return null!==d&&d.apply(this,arguments)||this}return i(e,d),e.prototype.buildRenderRange=function(e,t,r){var n,i=this.dateEnv,s=d.prototype.buildRenderRange.call(this,e,t,r),o=s.start,l=s.end;if(/^(year|month)$/.test(t)&&(o=i.startOfWeek(o),(n=i.startOfWeek(l)).valueOf()!==l.valueOf()&&(l=D.addWeeks(n,1))),this.options.monthMode&&this.options.fixedWeekCount){var a=Math.ceil(D.diffWeeks(o,l));l=D.addWeeks(l,6-a)}return{start:o,end:l}},e}(D.DateProfileGenerator),p=function(){function e(e){var t=this;this.isHidden=!0,this.margin=10,this.documentMousedown=function(e){t.el&&!t.el.contains(e.target)&&t.hide()},this.options=e}return e.prototype.show=function(){this.isHidden&&(this.el||this.render(),this.el.style.display="",this.position(),this.isHidden=!1,this.trigger("show"))},e.prototype.hide=function(){this.isHidden||(this.el.style.display="none",this.isHidden=!0,this.trigger("hide"))},e.prototype.render=function(){var t=this,e=this.options,r=this.el=D.createElement("div",{className:"sstfc-popover "+(e.className||""),style:{top:"0",left:"0"}});"function"==typeof e.content&&e.content(r),e.parentEl.appendChild(r),D.listenBySelector(r,"click",".sstfc-close",function(e){t.hide()}),e.autoHide&&document.addEventListener("mousedown",this.documentMousedown)},e.prototype.destroy=function(){this.hide(),this.el&&(D.removeElement(this.el),this.el=null),document.removeEventListener("mousedown",this.documentMousedown)},e.prototype.position=function(){var e,t,r=this.options,n=this.el,i=n.getBoundingClientRect(),s=D.computeRect(n.offsetParent),o=D.computeClippingRect(r.parentEl);e=r.top||0,t=void 0!==r.left?r.left:void 0!==r.right?r.right-i.width:0,e=Math.min(e,o.bottom-i.height-this.margin),e=Math.max(e,o.top+this.margin),t=Math.min(t,o.right-i.width-this.margin),t=Math.max(t,o.left+this.margin),D.applyStyle(n,{top:e-s.top,left:t-s.left})},e.prototype.trigger=function(e){this.options[e]&&this.options[e].apply(this,Array.prototype.slice.call(arguments,1))},e}(),r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.renderSegHtml=function(e,t){var r,n,i=this.context,s=i.view,o=i.options,l=e.eventRange,a=l.def,d=l.ui,c=a.allDay,h=s.computeEventDraggable(a,d),p=c&&e.isStart&&s.computeEventStartResizable(a,d),u=c&&e.isEnd&&s.computeEventEndResizable(a,d),f=this.getSegClasses(e,h,p||u,t),g=D.cssToStr(this.getSkinCss(d)),m="";return f.unshift("sstfc-day-grid-event","sstfc-h-event"),e.isStart&&(r=this.getTimeText(l))&&(m='<span class="sstfc-time">'+D.htmlEscape(r)+"</span>"),n='<span class="sstfc-title">'+(D.htmlEscape(a.title||"")||"&nbsp;")+"</span>",'<a class="'+f.join(" ")+'"'+(a.url?' href="'+D.htmlEscape(a.url)+'"':"")+(g?' style="'+g+'"':"")+'><div class="sstfc-content">'+("rtl"===o.dir?n+" "+m:m+" "+n)+"</div>"+(p?'<div class="sstfc-resizer sstfc-start-resizer"></div>':"")+(u?'<div class="sstfc-resizer sstfc-end-resizer"></div>':"")+"</a>"},t.prototype.computeEventTimeFormat=function(){return{hour:"numeric",minute:"2-digit",omitZeroMinute:!0,meridiem:"narrow"}},t.prototype.computeDisplayEventEnd=function(){return!1},t}(D.FgEventRenderer),a=function(r){function e(e){var t=r.call(this,e.context)||this;return t.dayGrid=e,t}return i(e,r),e.prototype.attachSegs=function(e,t){var r=this.rowStructs=this.renderSegRows(e);this.dayGrid.rowEls.forEach(function(e,t){e.querySelector(".sstfc-content-skeleton > table").appendChild(r[t].tbodyEl)}),t||this.dayGrid.removeSegPopover()},e.prototype.detachSegs=function(){for(var e,t=this.rowStructs||[];e=t.pop();)D.removeElement(e.tbodyEl);this.rowStructs=null},e.prototype.renderSegRows=function(e){var t,r,n=[];for(t=this.groupSegRows(e),r=0;r<t.length;r++)n.push(this.renderSegRow(r,t[r]));return n},e.prototype.renderSegRow=function(e,t){var r,n,i,s,o,l,a,d=this.dayGrid,c=d.colCnt,h=d.isRtl,p=this.buildSegLevels(t),u=Math.max(1,p.length),f=document.createElement("tbody"),g=[],m=[],y=[];function v(e){for(;i<e;)(a=(y[r-1]||[])[i])?a.rowSpan=(a.rowSpan||1)+1:(a=document.createElement("td"),s.appendChild(a)),m[r][i]=a,y[r][i]=a,i++}for(r=0;r<u;r++){if(n=p[r],i=0,s=document.createElement("tr"),g.push([]),m.push([]),y.push([]),n)for(o=0;o<n.length;o++){l=n[o];var b=h?c-1-l.lastCol:l.firstCol,w=h?c-1-l.firstCol:l.lastCol;for(v(b),a=D.createElement("td",{className:"sstfc-event-container"},l.el),b!==w?a.colSpan=w-b+1:y[r][i]=a;i<=w;)m[r][i]=a,g[r][i]=l,i++;s.appendChild(a)}v(c);var S=d.renderProps.renderIntroHtml();S&&(d.isRtl?D.appendToElement(s,S):D.prependToElement(s,S)),f.appendChild(s)}return{row:e,tbodyEl:f,cellMatrix:m,segMatrix:g,segLevels:p,segs:t}},e.prototype.buildSegLevels=function(e){var t,r,n,i=this.dayGrid,s=i.isRtl,o=i.colCnt,l=[];for(e=this.sortEventSegs(e),t=0;t<e.length;t++){for(r=e[t],n=0;n<l.length&&d(r,l[n]);n++);r.level=n,r.leftCol=s?o-1-r.lastCol:r.firstCol,r.rightCol=s?o-1-r.firstCol:r.lastCol,(l[n]||(l[n]=[])).push(r)}for(n=0;n<l.length;n++)l[n].sort(c);return l},e.prototype.groupSegRows=function(e){var t,r=[];for(t=0;t<this.dayGrid.rowCnt;t++)r.push([]);for(t=0;t<e.length;t++)r[e[t].row].push(e[t]);return r},e.prototype.computeDisplayEventEnd=function(){return 1===this.dayGrid.colCnt},e}(r);function d(e,t){var r,n;for(r=0;r<t.length;r++)if((n=t[r]).firstCol<=e.lastCol&&n.lastCol>=e.firstCol)return!0;return!1}function c(e,t){return e.leftCol-t.leftCol}var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.attachSegs=function(e,t){var s=t.sourceSeg,o=this.rowStructs=this.renderSegRows(e);this.dayGrid.rowEls.forEach(function(e,t){var r,n,i=D.htmlToElement('<div class="sstfc-mirror-skeleton"><table></table></div>');s&&s.row===t?r=s.el:(r=e.querySelector(".sstfc-content-skeleton tbody"))||(r=e.querySelector(".sstfc-content-skeleton table")),n=r.getBoundingClientRect().top-e.getBoundingClientRect().top,i.style.top=n+"px",i.querySelector("table").appendChild(o[t].tbodyEl),e.appendChild(i)})},t}(a),f=function(r){function e(e){var t=r.call(this,e.context)||this;return t.fillSegTag="td",t.dayGrid=e,t}return i(e,r),e.prototype.renderSegs=function(e,t){"bgEvent"===e&&(t=t.filter(function(e){return e.eventRange.def.allDay})),r.prototype.renderSegs.call(this,e,t)},e.prototype.attachSegs=function(e,t){var r,n,i,s=[];for(r=0;r<t.length;r++)n=t[r],i=this.renderFillRow(e,n),this.dayGrid.rowEls[n.row].appendChild(i),s.push(i);return s},e.prototype.renderFillRow=function(e,t){var r,n,i,s=this.dayGrid,o=s.colCnt,l=s.isRtl,a=l?o-1-t.lastCol:t.firstCol,d=(l?o-1-t.firstCol:t.lastCol)+1;r="businessHours"===e?"bgevent":e.toLowerCase(),i=(n=D.htmlToElement('<div class="sstfc-'+r+'-skeleton"><table><tr></tr></table></div>')).getElementsByTagName("tr")[0],0<a&&D.appendToElement(i,new Array(a+1).join('<td style="pointer-events:none"></td>')),t.el.colSpan=d-a,i.appendChild(t.el),d<o&&D.appendToElement(i,new Array(o-d+1).join('<td style="pointer-events:none"></td>'));var c=s.renderProps.renderIntroHtml();return c&&(s.isRtl?D.appendToElement(i,c):D.prependToElement(i,c)),n},e}(D.FillRenderer),g=function(s){function e(e,t){var r=s.call(this,e,t)||this,n=r.eventRenderer=new o(r),i=r.renderFrame=D.memoizeRendering(r._renderFrame);return r.renderFgEvents=D.memoizeRendering(n.renderSegs.bind(n),n.unrender.bind(n),[i]),r.renderEventSelection=D.memoizeRendering(n.selectByInstanceId.bind(n),n.unselectByInstanceId.bind(n),[r.renderFgEvents]),r.renderEventDrag=D.memoizeRendering(n.hideByHash.bind(n),n.showByHash.bind(n),[i]),r.renderEventResize=D.memoizeRendering(n.hideByHash.bind(n),n.showByHash.bind(n),[i]),e.calendar.registerInteractiveComponent(r,{el:r.el,useEventCenter:!1}),r}return i(e,s),e.prototype.render=function(e){this.renderFrame(e.date),this.renderFgEvents(e.fgSegs),this.renderEventSelection(e.eventSelection),this.renderEventDrag(e.eventDragInstances),this.renderEventResize(e.eventResizeInstances)},e.prototype.destroy=function(){s.prototype.destroy.call(this),this.renderFrame.unrender(),this.calendar.unregisterInteractiveComponent(this)},e.prototype._renderFrame=function(e){var t=this.theme,r=this.dateEnv.format(e,D.createFormatter(this.opt("dayPopoverFormat")));this.el.innerHTML='<div class="sstfc-header '+t.getClass("popoverHeader")+'"><span class="sstfc-title">'+D.htmlEscape(r)+'</span><span class="sstfc-close '+t.getIconClass("close")+'"></span></div><div class="sstfc-body '+t.getClass("popoverContent")+'"><div class="sstfc-event-container"></div></div>',this.segContainerEl=this.el.querySelector(".sstfc-event-container")},e.prototype.queryHit=function(e,t,r,n){var i=this.props.date;if(e<r&&t<n)return{component:this,dateSpan:{allDay:!0,range:{start:i,end:D.addDays(i,1)}},dayEl:this.el,rect:{left:0,top:0,right:r,bottom:n},layer:1}},e}(D.DateComponent),o=function(r){function e(e){var t=r.call(this,e.context)||this;return t.dayTile=e,t}return i(e,r),e.prototype.attachSegs=function(e){for(var t=0,r=e;t<r.length;t++){var n=r[t];this.dayTile.segContainerEl.appendChild(n.el)}},e.prototype.detachSegs=function(e){for(var t=0,r=e;t<r.length;t++){var n=r[t];D.removeElement(n.el)}},e}(r),s=function(){function e(e){this.context=e}return e.prototype.renderHtml=function(e){var t,r,n,i,s,o,l,a,d=[];e.renderIntroHtml&&d.push(e.renderIntroHtml());for(var c=0,h=e.cells;c<h.length;c++){var p=h[c];d.push((t=p.date,r=e.dateProfile,n=this.context,i=p.htmlAttrs,a=o=s=void 0,s=n.dateEnv,o=n.theme,l=D.rangeContainsMarker(r.activeRange,t),(a=D.getDayClasses(t,r,n)).unshift("sstfc-day",o.getClass("widgetContent")),'<td class="'+a.join(" ")+'"'+(l?' data-date="'+s.formatIso(t,{omitTime:!0})+'"':"")+(i?" "+i:"")+"></td>"))}return e.cells.length||d.push('<td class="sstfc-day '+this.context.theme.getClass("widgetContent")+'"></td>'),"rtl"===this.context.options.dir&&d.reverse(),"<tr>"+d.join("")+"</tr>"},e}();var m=D.createFormatter({day:"numeric"}),y=D.createFormatter({week:"numeric"}),v=function(l){function e(e,t,r){var n=l.call(this,e,t)||this;n.bottomCoordPadding=0,n.isCellSizesDirty=!1;var i=n.eventRenderer=new a(n),s=n.fillRenderer=new f(n);n.mirrorRenderer=new u(n);var o=n.renderCells=D.memoizeRendering(n._renderCells,n._unrenderCells);return n.renderBusinessHours=D.memoizeRendering(s.renderSegs.bind(s,"businessHours"),s.unrender.bind(s,"businessHours"),[o]),n.renderDateSelection=D.memoizeRendering(s.renderSegs.bind(s,"highlight"),s.unrender.bind(s,"highlight"),[o]),n.renderBgEvents=D.memoizeRendering(s.renderSegs.bind(s,"bgEvent"),s.unrender.bind(s,"bgEvent"),[o]),n.renderFgEvents=D.memoizeRendering(i.renderSegs.bind(i),i.unrender.bind(i),[o]),n.renderEventSelection=D.memoizeRendering(i.selectByInstanceId.bind(i),i.unselectByInstanceId.bind(i),[n.renderFgEvents]),n.renderEventDrag=D.memoizeRendering(n._renderEventDrag,n._unrenderEventDrag,[o]),n.renderEventResize=D.memoizeRendering(n._renderEventResize,n._unrenderEventResize,[o]),n.renderProps=r,n}return i(e,l),e.prototype.render=function(e){var t=e.cells;this.rowCnt=t.length,this.colCnt=t[0].length,this.renderCells(t,e.isRigid),this.renderBusinessHours(e.businessHourSegs),this.renderDateSelection(e.dateSelectionSegs),this.renderBgEvents(e.bgEventSegs),this.renderFgEvents(e.fgEventSegs),this.renderEventSelection(e.eventSelection),this.renderEventDrag(e.eventDrag),this.renderEventResize(e.eventResize),this.segPopoverTile&&this.updateSegPopoverTile()},e.prototype.destroy=function(){l.prototype.destroy.call(this),this.renderCells.unrender()},e.prototype.getCellRange=function(e,t){var r=this.props.cells[e][t].date;return{start:r,end:D.addDays(r,1)}},e.prototype.updateSegPopoverTile=function(e,t){var r=this.props;this.segPopoverTile.receiveProps({date:e||this.segPopoverTile.props.date,fgSegs:t||this.segPopoverTile.props.fgSegs,eventSelection:r.eventSelection,eventDragInstances:r.eventDrag?r.eventDrag.affectedInstances:null,eventResizeInstances:r.eventResize?r.eventResize.affectedInstances:null})},e.prototype._renderCells=function(e,t){var r,n,i=this.view,s=this.dateEnv,o=this.rowCnt,l=this.colCnt,a="";for(r=0;r<o;r++)a+=this.renderDayRowHtml(r,t);for(this.el.innerHTML=a,this.rowEls=D.findElements(this.el,".sstfc-row"),this.cellEls=D.findElements(this.el,".sstfc-day, .sstfc-disabled-day"),this.isRtl&&this.cellEls.reverse(),this.rowPositions=new D.PositionCache(this.el,this.rowEls,!1,!0),this.colPositions=new D.PositionCache(this.el,this.cellEls.slice(0,l),!0,!1),r=0;r<o;r++)for(n=0;n<l;n++)this.publiclyTrigger("dayRender",[{date:s.toDate(e[r][n].date),el:this.getCellEl(r,n),view:i}]);this.isCellSizesDirty=!0},e.prototype._unrenderCells=function(){this.removeSegPopover()},e.prototype.renderDayRowHtml=function(e,t){var r=this.theme,n=["sstfc-row","sstfc-week",r.getClass("dayRow")];t&&n.push("sstfc-rigid");var i=new s(this.context);return'<div class="'+n.join(" ")+'"><div class="sstfc-bg"><table class="'+r.getClass("tableGrid")+'">'+i.renderHtml({cells:this.props.cells[e],dateProfile:this.props.dateProfile,renderIntroHtml:this.renderProps.renderBgIntroHtml})+'</table></div><div class="sstfc-content-skeleton"><table>'+(this.getIsNumbersVisible()?"<thead>"+this.renderNumberTrHtml(e)+"</thead>":"")+"</table></div></div>"},e.prototype.getIsNumbersVisible=function(){return this.getIsDayNumbersVisible()||this.renderProps.cellWeekNumbersVisible||this.renderProps.colWeekNumbersVisible},e.prototype.getIsDayNumbersVisible=function(){return 1<this.rowCnt},e.prototype.renderNumberTrHtml=function(e){var t=this.renderProps.renderNumberIntroHtml(e,this);return"<tr>"+(this.isRtl?"":t)+this.renderNumberCellsHtml(e)+(this.isRtl?t:"")+"</tr>"},e.prototype.renderNumberCellsHtml=function(e){var t,r,n=[];for(t=0;t<this.colCnt;t++)r=this.props.cells[e][t].date,n.push(this.renderNumberCellHtml(r));return this.isRtl&&n.reverse(),n.join("")},e.prototype.renderNumberCellHtml=function(e){var t,r,n=this.view,i=this.dateEnv,s="",o=D.rangeContainsMarker(this.props.dateProfile.activeRange,e),l=this.getIsDayNumbersVisible()&&o;return l||this.renderProps.cellWeekNumbersVisible?((t=D.getDayClasses(e,this.props.dateProfile,this.context)).unshift("sstfc-day-top"),this.renderProps.cellWeekNumbersVisible&&(r=i.weekDow),s+='<td class="'+t.join(" ")+'"'+(o?' data-date="'+i.formatIso(e,{omitTime:!0})+'"':"")+">",this.renderProps.cellWeekNumbersVisible&&e.getUTCDay()===r&&(s+=D.buildGotoAnchorHtml(n,{date:e,type:"week"},{class:"sstfc-week-number"},i.format(e,y))),l&&(s+=D.buildGotoAnchorHtml(n,e,{class:"sstfc-day-number"},i.format(e,m))),s+="</td>"):"<td></td>"},e.prototype.updateSize=function(e){var t=this.fillRenderer,r=this.eventRenderer,n=this.mirrorRenderer;(e||this.isCellSizesDirty||this.view.calendar.isEventsUpdated)&&(this.buildPositionCaches(),this.isCellSizesDirty=!1),t.computeSizes(e),r.computeSizes(e),n.computeSizes(e),t.assignSizes(e),r.assignSizes(e),n.assignSizes(e)},e.prototype.buildPositionCaches=function(){this.buildColPositions(),this.buildRowPositions()},e.prototype.buildColPositions=function(){this.colPositions.build()},e.prototype.buildRowPositions=function(){this.rowPositions.build(),this.rowPositions.bottoms[this.rowCnt-1]+=this.bottomCoordPadding},e.prototype.positionToHit=function(e,t){var r=this.colPositions,n=this.rowPositions,i=r.leftToIndex(e),s=n.topToIndex(t);if(null!=s&&null!=i)return{row:s,col:i,dateSpan:{range:this.getCellRange(s,i),allDay:!0},dayEl:this.getCellEl(s,i),relativeRect:{left:r.lefts[i],right:r.rights[i],top:n.tops[s],bottom:n.bottoms[s]}}},e.prototype.getCellEl=function(e,t){return this.cellEls[e*this.colCnt+t]},e.prototype._renderEventDrag=function(e){e&&(this.eventRenderer.hideByHash(e.affectedInstances),this.fillRenderer.renderSegs("highlight",e.segs))},e.prototype._unrenderEventDrag=function(e){e&&(this.eventRenderer.showByHash(e.affectedInstances),this.fillRenderer.unrender("highlight"))},e.prototype._renderEventResize=function(e){e&&(this.eventRenderer.hideByHash(e.affectedInstances),this.fillRenderer.renderSegs("highlight",e.segs),this.mirrorRenderer.renderSegs(e.segs,{isResizing:!0,sourceSeg:e.sourceSeg}))},e.prototype._unrenderEventResize=function(e){e&&(this.eventRenderer.showByHash(e.affectedInstances),this.fillRenderer.unrender("highlight"),this.mirrorRenderer.unrender(e.segs,{isResizing:!0,sourceSeg:e.sourceSeg}))},e.prototype.removeSegPopover=function(){this.segPopover&&this.segPopover.hide()},e.prototype.limitRows=function(e){var t,r,n=this.eventRenderer.rowStructs||[];for(t=0;t<n.length;t++)this.unlimitRow(t),!1!==(r=!!e&&("number"==typeof e?e:this.computeRowLevelLimit(t)))&&this.limitRow(t,r)},e.prototype.computeRowLevelLimit=function(e){var t,r,n=this.rowEls[e].getBoundingClientRect().bottom,i=D.findChildren(this.eventRenderer.rowStructs[e].tbodyEl);for(t=0;t<i.length;t++)if((r=i[t]).classList.remove("sstfc-limited"),r.getBoundingClientRect().bottom>n)return t;return!1},e.prototype.limitRow=function(t,r){var e,n,i,s,o,l,a,d,c,h,p,u,f,g,m,y=this,v=this.colCnt,b=this.isRtl,w=this.eventRenderer.rowStructs[t],S=[],C=0,E=function(e){for(;C<e;)(l=y.getCellSegs(t,C,r)).length&&(c=n[r-1][C],m=y.renderMoreLink(t,C,l),g=D.createElement("div",null,m),c.appendChild(g),S.push(g)),C++};if(r&&r<w.segLevels.length){for(e=w.segLevels[r-1],n=w.cellMatrix,(i=D.findChildren(w.tbodyEl).slice(r)).forEach(function(e){e.classList.add("sstfc-limited")}),s=0;s<e.length;s++){o=e[s];var R=b?v-1-o.lastCol:o.firstCol,H=b?v-1-o.firstCol:o.lastCol;for(E(R),d=[],a=0;C<=H;)l=this.getCellSegs(t,C,r),d.push(l),a+=l.length,C++;if(a){for(h=(c=n[r-1][R]).rowSpan||1,p=[],u=0;u<d.length;u++)f=D.createElement("td",{className:"sstfc-more-cell",rowSpan:h}),l=d[u],m=this.renderMoreLink(t,R+u,[o].concat(l)),g=D.createElement("div",null,m),f.appendChild(g),p.push(f),S.push(f);c.classList.add("sstfc-limited"),D.insertAfterElement(c,p),i.push(c)}}E(this.colCnt),w.moreEls=S,w.limitedEls=i}},e.prototype.unlimitRow=function(e){var t=this.eventRenderer.rowStructs[e];t.moreEls&&(t.moreEls.forEach(D.removeElement),t.moreEls=null),t.limitedEls&&(t.limitedEls.forEach(function(e){e.classList.remove("sstfc-limited")}),t.limitedEls=null)},e.prototype.renderMoreLink=function(d,c,h){var p=this,u=this.view,f=this.dateEnv,e=D.createElement("a",{className:"sstfc-more"});return e.innerText=this.getMoreLinkText(h.length),e.addEventListener("click",function(e){var t=p.opt("eventLimitClick"),r=p.isRtl?p.colCnt-c-1:c,n=p.props.cells[d][r].date,i=e.currentTarget,s=p.getCellEl(d,c),o=p.getCellSegs(d,c),l=p.resliceDaySegs(o,n),a=p.resliceDaySegs(h,n);"function"==typeof t&&(t=p.publiclyTrigger("eventLimitClick",[{date:f.toDate(n),allDay:!0,dayEl:s,moreEl:i,segs:l,hiddenSegs:a,jsEvent:e,view:u}])),"popover"===t?p.showSegPopover(d,c,i,l):"string"==typeof t&&u.calendar.zoomTo(n,t)}),e},e.prototype.showSegPopover=function(t,e,r,n){var i,s,o=this,l=this.calendar,a=this.view,d=this.theme,c=this.isRtl?this.colCnt-e-1:e,h=r.parentNode;i=1===this.rowCnt?a.el:this.rowEls[t],s={className:"sstfc-more-popover "+d.getClass("popover"),parentEl:a.el,top:D.computeRect(i).top,autoHide:!0,content:function(e){o.segPopoverTile=new g(o.context,e),o.updateSegPopoverTile(o.props.cells[t][c].date,n)},hide:function(){o.segPopoverTile.destroy(),o.segPopoverTile=null,o.segPopover.destroy(),o.segPopover=null}},this.isRtl?s.right=D.computeRect(h).right+1:s.left=D.computeRect(h).left-1,this.segPopover=new p(s),this.segPopover.show(),l.releaseAfterSizingTriggers()},e.prototype.resliceDaySegs=function(e,t){for(var r=t,n={start:r,end:D.addDays(r,1)},i=[],s=0,o=e;s<o.length;s++){var l=o[s],a=l.eventRange,d=a.range,c=D.intersectRanges(d,n);c&&i.push(h({},l,{eventRange:{def:a.def,ui:h({},a.ui,{durationEditable:!1}),instance:a.instance,range:c},isStart:l.isStart&&c.start.valueOf()===d.start.valueOf(),isEnd:l.isEnd&&c.end.valueOf()===d.end.valueOf()}))}return i},e.prototype.getMoreLinkText=function(e){var t=this.opt("eventLimitText");return"function"==typeof t?t(e):"+"+e+" "+t},e.prototype.getCellSegs=function(e,t,r){for(var n,i=this.eventRenderer.rowStructs[e].segMatrix,s=r||0,o=[];s<i.length;)(n=i[s][t])&&o.push(n),s++;return o},e}(D.DateComponent),b=D.createFormatter({week:"numeric"}),l=function(a){function e(e,t,r,n){var i=a.call(this,e,t,r,n)||this;i.renderHeadIntroHtml=function(){var e=i.theme;return i.colWeekNumbersVisible?'<th class="sstfc-week-number '+e.getClass("widgetHeader")+'" '+i.weekNumberStyleAttr()+"><span>"+D.htmlEscape(i.opt("weekLabel"))+"</span></th>":""},i.renderDayGridNumberIntroHtml=function(e,t){var r=i.dateEnv,n=t.props.cells[e][0].date;return i.colWeekNumbersVisible?'<td class="sstfc-week-number" '+i.weekNumberStyleAttr()+">"+D.buildGotoAnchorHtml(i,{date:n,type:"week",forceOff:1===t.colCnt},r.format(n,b))+"</td>":""},i.renderDayGridBgIntroHtml=function(){var e=i.theme;return i.colWeekNumbersVisible?'<td class="sstfc-week-number '+e.getClass("widgetContent")+'" '+i.weekNumberStyleAttr()+"></td>":""},i.renderDayGridIntroHtml=function(){return i.colWeekNumbersVisible?'<td class="sstfc-week-number" '+i.weekNumberStyleAttr()+"></td>":""},i.el.classList.add("sstfc-dayGrid-view"),i.el.innerHTML=i.renderSkeletonHtml(),i.scroller=new D.ScrollComponent("hidden","auto");var s=i.scroller.el;i.el.querySelector(".sstfc-body > tr > td").appendChild(s),s.classList.add("sstfc-day-grid-container");var o,l=D.createElement("div",{className:"sstfc-day-grid"});return s.appendChild(l),i.opt("weekNumbers")?i.opt("weekNumbersWithinDays")?(o=!0,i.colWeekNumbersVisible=!1):(o=!1,i.colWeekNumbersVisible=!0):o=i.colWeekNumbersVisible=!1,i.dayGrid=new v(i.context,l,{renderNumberIntroHtml:i.renderDayGridNumberIntroHtml,renderBgIntroHtml:i.renderDayGridBgIntroHtml,renderIntroHtml:i.renderDayGridIntroHtml,colWeekNumbersVisible:i.colWeekNumbersVisible,cellWeekNumbersVisible:o}),i}return i(e,a),e.prototype.destroy=function(){a.prototype.destroy.call(this),this.dayGrid.destroy(),this.scroller.destroy()},e.prototype.renderSkeletonHtml=function(){var e=this.theme;return'<table class="'+e.getClass("tableGrid")+'">'+(this.opt("columnHeader")?'<thead class="sstfc-head"><tr><td class="sstfc-head-container '+e.getClass("widgetHeader")+'">&nbsp;</td></tr></thead>':"")+'<tbody class="sstfc-body"><tr><td class="'+e.getClass("widgetContent")+'"></td></tr></tbody></table>'},e.prototype.weekNumberStyleAttr=function(){return null!=this.weekNumberWidth?'style="width:'+this.weekNumberWidth+'px"':""},e.prototype.hasRigidRows=function(){var e=this.opt("eventLimit");return e&&"number"!=typeof e},e.prototype.updateSize=function(e,t,r){a.prototype.updateSize.call(this,e,t,r),this.dayGrid.updateSize(e)},e.prototype.updateBaseSize=function(e,t,r){var n,i,s=this.dayGrid,o=this.opt("eventLimit"),l=this.header?this.header.el:null;s.rowEls?(this.colWeekNumbersVisible&&(this.weekNumberWidth=D.matchCellWidths(D.findElements(this.el,".sstfc-week-number"))),this.scroller.clear(),l&&D.uncompensateScroll(l),s.removeSegPopover(),o&&"number"==typeof o&&s.limitRows(o),n=this.computeScrollerHeight(t),this.setGridHeight(n,r),o&&"number"!=typeof o&&s.limitRows(o),r||(this.scroller.setHeight(n),((i=this.scroller.getScrollbarWidths()).left||i.right)&&(l&&D.compensateScroll(l,i),n=this.computeScrollerHeight(t),this.scroller.setHeight(n)),this.scroller.lockOverflow(i))):r||(n=this.computeScrollerHeight(t),this.scroller.setHeight(n))},e.prototype.computeScrollerHeight=function(e){return e-D.subtractInnerElHeight(this.el,this.scroller.el)},e.prototype.setGridHeight=function(e,t){this.opt("monthMode")?(t&&(e*=this.dayGrid.rowCnt/6),D.distributeHeight(this.dayGrid.rowEls,e,!t)):t?D.undistributeHeight(this.dayGrid.rowEls):D.distributeHeight(this.dayGrid.rowEls,e,!0)},e.prototype.computeDateScroll=function(e){return{top:0}},e.prototype.queryDateScroll=function(){return{top:this.scroller.getScrollTop()}},e.prototype.applyDateScroll=function(e){void 0!==e.top&&this.scroller.setScrollTop(e.top)},e}(D.View);l.prototype.dateProfileGeneratorClass=t;var w=function(n){function e(e,t){var r=n.call(this,e,t.el)||this;return r.slicer=new S,r.dayGrid=t,e.calendar.registerInteractiveComponent(r,{el:r.dayGrid.el}),r}return i(e,n),e.prototype.destroy=function(){n.prototype.destroy.call(this),this.calendar.unregisterInteractiveComponent(this)},e.prototype.render=function(e){var t=this.dayGrid,r=e.dateProfile,n=e.dayTable;t.receiveProps(h({},this.slicer.sliceProps(e,r,e.nextDayThreshold,t,n),{dateProfile:r,cells:n.cells,isRigid:e.isRigid}))},e.prototype.buildPositionCaches=function(){this.dayGrid.buildPositionCaches()},e.prototype.queryHit=function(e,t){var r=this.dayGrid.positionToHit(e,t);if(r)return{component:this.dayGrid,dateSpan:r.dateSpan,dayEl:r.dayEl,rect:{left:r.relativeRect.left,right:r.relativeRect.right,top:r.relativeRect.top,bottom:r.relativeRect.bottom},layer:0}},e}(D.DateComponent),S=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.sliceRange=function(e,t){return t.sliceRange(e)},t}(D.Slicer),C=function(s){function e(e,t,r,n){var i=s.call(this,e,t,r,n)||this;return i.buildDayTable=D.memoize(E),i.opt("columnHeader")&&(i.header=new D.DayHeader(i.context,i.el.querySelector(".sstfc-head-container"))),i.simpleDayGrid=new w(i.context,i.dayGrid),i}return i(e,s),e.prototype.destroy=function(){s.prototype.destroy.call(this),this.header&&this.header.destroy(),this.simpleDayGrid.destroy()},e.prototype.render=function(e){s.prototype.render.call(this,e);var t=this.props.dateProfile,r=this.dayTable=this.buildDayTable(t,this.dateProfileGenerator);this.header&&this.header.receiveProps({dateProfile:t,dates:r.headerDates,datesRepDistinctDays:1===r.rowCnt,renderIntroHtml:this.renderHeadIntroHtml}),this.simpleDayGrid.receiveProps({dateProfile:t,dayTable:r,businessHours:e.businessHours,dateSelection:e.dateSelection,eventStore:e.eventStore,eventUiBases:e.eventUiBases,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,isRigid:this.hasRigidRows(),nextDayThreshold:this.nextDayThreshold})},e}(l);function E(e,t){var r=new D.DaySeries(e.renderRange,t);return new D.DayTable(r,/year|month|week/.test(e.currentRangeUnit))}var R=D.createPlugin({defaultView:"dayGridMonth",views:{dayGrid:C,dayGridDay:{type:"dayGrid",duration:{days:1}},dayGridWeek:{type:"dayGrid",duration:{weeks:1}},dayGridMonth:{type:"dayGrid",duration:{months:1},monthMode:!0,fixedWeekCount:!0}}});e.AbstractDayGridView=l,e.DayBgRow=s,e.DayGrid=v,e.DayGridSlicer=S,e.DayGridView=C,e.SimpleDayGrid=w,e.buildBasicDayTable=E,e.default=R,Object.defineProperty(e,"__esModule",{value:!0})});
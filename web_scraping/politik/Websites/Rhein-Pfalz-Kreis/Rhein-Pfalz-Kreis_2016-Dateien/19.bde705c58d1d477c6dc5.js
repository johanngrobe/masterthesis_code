(window.webpackJsonp=window.webpackJsonp||[]).push([[19,18],{409:function(t,r,i){"use strict";i.d(r,"d",(function(){return u})),i.d(r,"c",(function(){return g})),i.d(r,"b",(function(){return h.a})),i.d(r,"e",(function(){return m})),i.d(r,"a",(function(){return w}));var a=i(419),o=i(654),c=i(649),d=i(672),l=i(650),u={methods:{format:function format(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"dd.MM.yyyy HH:mm";return Object(o.a)(Object(c.a)(t),r)},formatRelative:function formatRelative(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{forceRelativeFormat:!1,dateFormat:"dd.MM.yyyy"},i=Object(c.a)(t);return!r.forceRelativeFormat&&Object(d.a)(new Date,1)>i?this.format(t,r.dateFormat):Object(l.a)(i,{locale:a.a,addSuffix:!0})}}},p=i(415),v=i.n(p),g={methods:{readableBytes:function readableBytes(t){return v()(parseInt(t,10))}}},h=i(410),m={methods:{translate:function translate(t){return window.translations&&window.translations[t]?window.translations[t]:t}}},w={methods:{copyToClipboard:function copyToClipboard(t){var r=document.createElement("textarea");r.value=t,r.setAttribute("readonly",""),r.style.position="absolute",r.style.left="-9999px",document.body.appendChild(r),r.select(),document.execCommand("copy"),document.body.removeChild(r)}}}},410:function(t,r,i){"use strict";r.a={methods:{getPublicStatus:function getPublicStatus(t){return{"":"Kein Öffentlichkeitsstatus",1:"Öffentlich",2:"Nichtöffentlich",3:"Vertraulich",4:"Öffentlich/Nichtöffentlich"}[t]}}}},447:function(t,r,i){},448:function(t,r,i){},449:function(t,r,i){},475:function(t,r,i){"use strict";i(447)},476:function(t,r,i){"use strict";i(448)},477:function(t,r){},478:function(t,r,i){"use strict";i(449)},530:function(t,r){},531:function(t,r){},532:function(t,r){},533:function(t,r){},534:function(t,r){},646:function(t,r,i){"use strict";i.r(r);var a=i(526),o=i.n(a),c=i(409),d=i(429),l=i(408),u=i(58),p=i.n(u),v=(i(527),i(528)),g={name:"PDFPage",mixins:[i.n(v).a],props:{page:Object,searchString:{type:String,required:!1,default:""},pdfjsLib:Object,rendered:Boolean},data:function data(){return{isCurrentlyRendering:!1}},computed:{rotation:function rotation(){return this.page.rotation}},watch:{"inViewport.now":function inViewportNow(t){t&&this.$emit("enter-viewport",!0)},rotation:function rotation(){var t=this;this.$refs.page&&(0===this.page.rotation&&(this.$refs.page.style.transitionDuration="unset",this.$refs.page.style.transitionProperty="unset"),this.$refs.page.style.transform="rotate(".concat(this.page.rotation,"deg)"),setTimeout((function(){0===t.page.rotation&&(t.$refs.page.style.removeProperty("transition-duration"),t.$refs.page.style.removeProperty("transition-property"))}),200))}},methods:{render:async function render(){var t=this;if(!this.isCurrentlyRendering){this.rendered&&(this.unrender(),await this.$nextTick()),this.isCurrentlyRendering=!0;var r=this.page.page.render({canvasContext:this.$refs.canvas.getContext("2d"),viewport:this.page.viewport});await r.promise;var i=await this.page.page.getTextContent();i.items.forEach((function(r){t.searchString&&r.str.toLowerCase().includes(t.searchString.toLowerCase())&&(r.highlight=t.searchString.toLowerCase())}));var a=this.pdfjsLib.renderTextLayer({textContent:i,container:this.$refs["text-layer"],viewport:this.page.viewport,textDivs:[]});await a.promise,this.$emit("update:rendered",!0),this.isCurrentlyRendering=!1}},unrender:function unrender(){this.$refs["text-layer"].innerHTML="",this.$refs.canvas.getContext("2d").clearRect(0,0,this.page.viewport.width,this.page.viewport.height),this.$emit("update:rendered",!1)}}},h=(i(475),i(407)),m=Object(h.a)(g,(function(){var t=this,r=t.$createElement,i=t._self._c||r;return i("div",{ref:"page",staticClass:"pdf-viewer-page",style:{height:t.page.viewport.height+"px",width:t.page.viewport.width+"px"}},[i("div",{staticClass:"page"},[i("div",{ref:"text-layer",staticClass:"page-text-layer"}),t._v(" "),i("canvas",{ref:"canvas",style:{height:t.page.viewport.height+"px",width:t.page.viewport.width+"px"},attrs:{height:t.page.viewport.height,width:t.page.viewport.width}})])])}),[],!1,null,null,null).exports,w={props:{icon:[String,Array],errorDescription:String,errorText:{type:String,default:""}}},y=(i(476),Object(h.a)(w,(function(){var t=this,r=t.$createElement,i=t._self._c||r;return i("div",{staticClass:"error-overlay"},[i("div",{staticClass:"error-overlay-content"},[i("div",{staticClass:"error-overlay-content-icon-wrapper"},[i("font-awesome-icon",{staticClass:"error-overlay-content-icon",attrs:{icon:t.icon}})],1),t._v(" "),i("div",{staticClass:"error-overlay-content-text"},[i("div",[i("div",{staticClass:"error-overlay-content-text-headline"},[t._v("\n          Ein Fehler ist aufgetreten\n        ")]),t._v(" "),i("div",{staticClass:"error-overlay-content-text-description"},[t._v("\n          "+t._s(t.errorDescription)+"\n        ")])]),t._v(" "),t.errorText.length>0?i("div",[i("div",{staticClass:"error-overlay-content-text-description"},[t._v("\n          Fehlermeldung\n        ")]),t._v(" "),i("div",{staticClass:"error-overlay-content-text-error"},[t._v("\n          "+t._s(t.errorText)+"\n        ")])]):t._e()])])])}),[],!1,null,"10ce327e",null).exports);function _createForOfIteratorHelper(t,r){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return _arrayLikeToArray(t,r)}(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var a=0,o=function F(){};return{s:o,n:function n(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,d=!0,l=!1;return{s:function s(){i=i.call(t)},n:function n(){var t=i.next();return d=t.done,t},e:function e(t){l=!0,c=t},f:function f(){try{d||null==i.return||i.return()}finally{if(l)throw c}}}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,a=new Array(r);i<r;i++)a[i]=t[i];return a}var b=i(529);b.GlobalWorkerOptions.workerSrc="/pdf-viewer/pdf.worker.min.js";var k={components:{PdfPage:m,LoadingCircle:l.d,ContextMenu:l.b,ErrorOverlay:y},directives:{onClickaway:d.directive,tooltip:l.p},mixins:[c.c,c.a],props:{filename:{type:String,default:""},src:{type:[String,ArrayBuffer],required:!0},searchString:{type:String,required:!1,default:""},fileSize:{type:[String,Number],required:!1,default:0},embedded:{type:Boolean,required:!1,default:!1}},data:function data(){return{pdfjsLib:b,showBookmarks:!1,bookmarks:[],pdf:null,pdfBinary:null,activePageIndex:0,pages:[],errorMessage:"",loading:!0,expandedBookmarksIndex:null,pdfOverallSize:0,pdfDownloadedSize:0,isDownloading:!1,preparePrinting:!1,requestCancelToken:null,currentlyZooming:!1}},computed:{scale:{set:function set(t){this.$store.dispatch("setUserSettings",{pdfViewerZoomScale:t})},get:function get(){return this.$store.state.userSettings.pdfViewerZoomScale}},isArrayBuffer:function isArrayBuffer(){return this.src instanceof ArrayBuffer},downloadBegan:function downloadBegan(){return this.pdfOverallSize>0},loadingPercent:function loadingPercent(){return Math.round(this.pdfDownloadedSize/this.pdfOverallSize*100)}},watch:{activePageIndex:function activePageIndex(){this.renderPdf()}},mounted:async function mounted(){window.cachedFiles||(window.cachedFiles=[]),await this.init(),await this.renderPdf()},methods:{copy:function copy(){this.copyToClipboard("".concat(window.location.origin,"/pdf-viewer.php?src=").concat(window.btoa(this.src),"&name=").concat(window.btoa(this.filename))),this.eventBus.$emit("show-notification",{text:"Link zum Dokument in Zwischenablage kopiert"})},cancelRunningRequest:function cancelRunningRequest(){console.log("cancelling request"),this.requestCancelToken&&this.requestCancelToken.cancel()},bufferArrayToBase64:function bufferArrayToBase64(t){return btoa([].reduce.call(new Uint8Array(t),(function(t,r){return t+String.fromCharCode(r)}),""))},print:function print(){var t=this;this.preparePrinting=!0,setTimeout((function(){o()({printable:t.bufferArrayToBase64(t.pdfBinary),base64:!0,onLoadingEnd:function onLoadingEnd(){t.preparePrinting=!1}})}),100)},collapseBookmarks:function collapseBookmarks(){this.showBookmarks=!1},toggleBookmark:function toggleBookmark(t){t===this.expandedBookmarksIndex?this.expandedBookmarksIndex=null:this.expandedBookmarksIndex=t},scrollToBookmark:function scrollToBookmark(t){var r=this;this.pdf.getPageIndex(JSON.parse(JSON.stringify(t.dest[0]))).then((function(t){r.$refs["page-".concat(t)][0].$refs.page.scrollIntoView()})).catch((function(t){console.error(t)}))},rotateCurrentPage:function rotateCurrentPage(){var t=this;this.pages[this.activePageIndex].rotation+=90,360===this.pages[this.activePageIndex].rotation&&setTimeout((function(){t.pages[t.activePageIndex].rotation=0}),400)},resetPageSizes:async function resetPageSizes(){var t,r=_createForOfIteratorHelper(this.pages);try{for(r.s();!(t=r.n()).done;){var i=t.value,a=i.page.getViewport({scale:this.scale});i.viewport=a,i.height=a.height,i.width=a.width,i.rendered&&await this.$refs["page-".concat(i.number-1)][0].unrender()}}catch(o){r.e(o)}finally{r.f()}},loadPdf:async function loadPdf(){var t=this;return new Promise((function(r,i){t.pdf=null,t.loading=!0,t.errorMessage="";var a=!1;if(t.isArrayBuffer||(a=window.cachedFiles.find((function(r){return r.size==t.fileSize&&r.id==t.src}))),t.isArrayBuffer||a)setTimeout((function(){t.pdfBinary=t.isArrayBuffer?t.src:a.file,b.getDocument({data:t.isArrayBuffer?t.src:a.file}).promise.then((function(i){t.pdf=i,t.loading=!1,r()}))}),100);else{var o=t.src.split("?")[1].split("&"),c=[];o.forEach((function(t){t.includes("=")&&"transid"!==t.split("=")[0]?c[[t.split("=")[0]]]=decodeURIComponent(t.split("=")[1]):c[t]=1})),t.requestCancelToken=p.a.CancelToken.source(),t.$webservice.post(c,{baseURL:t.src.includes("?")?t.src.split("?")[0]:t.src,params:{transid:""},responseType:"arraybuffer",cancelToken:t.requestCancelToken.token,onDownloadProgress:function onDownloadProgress(r){t.pdfOverallSize<=0&&(t.pdfOverallSize=r.total),t.pdfDownloadedSize=r.loaded}}).then((function(a){t.pdfBinary=a.data,b.getDocument({data:a.data}).promise.then((function(i){window.cachedFiles.push({id:t.src,file:a.data,size:t.fileSize}),t.pdf=i,t.loading=!1,r()})).catch((function(r){t.errorMessage=JSON.stringify(r),console.error(r),t.loading=!1,i()}))}))}}))},init:async function init(){try{await this.loadPdf()}catch(o){return}this.pages=[];for(var t=1;t<=this.pdf.numPages;t+=1){var r=await this.pdf.getPage(t),i=r.getViewport({scale:this.scale});this.pages.push({viewport:i,page:r,height:i.height,width:i.width,rotation:0,rendered:!1,number:t})}this.activePageIndex=0;var a=await this.pdf.getOutline();a&&(a.forEach((function(t){t.expanded=!1})),this.bookmarks=a)},zoom:async function zoom(t){this.currentlyZooming||(this.currentlyZooming=!0,this.scale+=t,await this.resetPageSizes(),await this.$nextTick(),await this.renderPdf(),this.currentlyZooming=!1)},renderPdf:async function renderPdf(){var t,r=_createForOfIteratorHelper(this.pages);try{for(r.s();!(t=r.n()).done;){var i=t.value;i.number<=this.pages[this.activePageIndex].number+2&&i.number>=this.pages[this.activePageIndex].number-2?i.rendered||await this.$refs["page-".concat(i.number-1)][0].render():i.rendered&&this.$refs["page-".concat(i.number-1)][0].unrender()}}catch(a){r.e(a)}finally{r.f()}},downloadCurrentlyOpenedFile:function downloadCurrentlyOpenedFile(){var t=new Blob([new Uint8Array(this.pdfBinary).buffer],{type:"application/pdf"}),r=URL.createObjectURL(t),i=document.createElement("a");i.href=r,i.target="_blank",i.download="".concat(this.filename,".pdf"),document.body.appendChild(i),i.click(),i.remove()}}},x=(i(478),Object(h.a)(k,(function(){var t=this,r=t.$createElement,i=t._self._c||r;return i("div",{class:[{"pdf-viewer--embedded":t.embedded},{"pdf-viewer--loading":t.loading},{"pdf-viewer--error":t.errorMessage.length>0}],attrs:{id:"pdf-viewer"}},[t.preparePrinting?i("div",{staticClass:"prepare-printing-message"},[i("loading-circle",{staticClass:"prepare-printing-message-spinner",attrs:{size:50}}),t._v(" "),i("div",{staticClass:"prepare-printing-message-caption"},[t._v("\n      Bereite Drucken vor...\n    ")])],1):t._e(),t._v(" "),i("div",{class:{"loading-spinner-hidden":!t.loading&&0===t.errorMessage.length},attrs:{id:"loading-spinner-wrapper"}},[t.loading?i("div",{staticClass:"loading-spinner-container"},[i("loading-circle",{staticClass:"loading-spinner",attrs:{progress:t.loadingPercent,status:t.downloadBegan?"percent":""}}),t._v(" "),i("div",{staticClass:"loading-spinner-bytes"},[t.pdfOverallSize>t.pdfDownloadedSize?i("div",[t._v("\n          "+t._s(t.readableBytes(t.pdfDownloadedSize))+" / "+t._s(t.readableBytes(t.pdfOverallSize))+"\n        ")]):0===t.pdfOverallSize?i("div",[t._v("\n          bereite vor...\n        ")]):i("div",[t._v("\n          Öffnen...\n        ")])])],1):t.errorMessage.length>0?i("error-overlay",{attrs:{"error-description":"Sie verfügen nicht über die benötigten Rechte  um diese Datei zu öffnen oder sie existiert nicht","error-text":t.errorMessage,icon:["fal","file-times"]}}):t._e()],1),t._v(" "),i("div",{class:{"toolbar-active":!t.loading&&0===t.errorMessage.length},attrs:{id:"toolbar"}},[i("div",{staticClass:"filename"},[t._v("\n      "+t._s(t.filename)+"\n    ")]),t._v(" "),i("div",{staticClass:"pagenumbers"},[i("div",{staticClass:"pagenumbers-current-page",attrs:{id:"current-page"}},[t._v("\n        "+t._s(t.activePageIndex+1)+"\n      ")]),t._v(" "),i("div",{staticClass:"pagenumbers-separator"},[t._v("\n        /\n      ")]),t._v(" "),t.pdf?i("div",{staticClass:"pagenumbers-all-pages",attrs:{id:"page-count"}},[t._v("\n        "+t._s(t.pdf.numPages)+"\n      ")]):t._e()]),t._v(" "),i("div",{staticClass:"buttons"},[t.src.length<500?i("div",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Link kopieren",expression:"'Link kopieren'"}],staticClass:"icon-button hide-on-mobile",attrs:{role:"button",tabindex:"0"},on:{click:function(r){return t.copy()}}},[i("font-awesome-icon",{attrs:{icon:["far","share-alt"]}})],1):t._e(),t._v(" "),i("div",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Herunterladen",expression:"'Herunterladen'"}],staticClass:"icon-button hide-on-mobile",attrs:{role:"button",tabindex:"0"},on:{click:function(r){return t.downloadCurrentlyOpenedFile()}}},[i("font-awesome-icon",{attrs:{icon:["far","download"]}})],1),t._v(" "),i("div",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Seite drehen",expression:"'Seite drehen'"}],staticClass:"icon-button",attrs:{role:"button",tabindex:"0"},on:{click:function(r){return t.rotateCurrentPage()}}},[i("font-awesome-icon",{attrs:{icon:["far","sync"]}})],1),t._v(" "),i("div",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Verkleinern",expression:"'Verkleinern'"}],staticClass:"icon-button",attrs:{role:"button",tabindex:"0"},on:{click:function(r){return t.zoom(-.125)}}},[i("font-awesome-icon",{attrs:{icon:["far","search-minus"]}})],1),t._v(" "),i("div",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Vergrößern",expression:"'Vergrößern'"}],staticClass:"icon-button",attrs:{role:"button",tabindex:"0"},on:{click:function(r){return t.zoom(.125)}}},[i("font-awesome-icon",{attrs:{icon:["far","search-plus"]}})],1),t._v(" "),i("div",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Drucken",expression:"'Drucken'"}],staticClass:"icon-button hide-on-mobile",attrs:{role:"button",tabindex:"0"},on:{click:function(r){return t.print()}}},[i("font-awesome-icon",{attrs:{icon:["far","print"]}})],1),t._v(" "),i("div",{attrs:{id:"bookmark-wrapper"}},[i("div",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Lesezeichen",expression:"'Lesezeichen'"}],staticClass:"icon-button",attrs:{role:"button",tabindex:"0"},on:{click:function(r){t.showBookmarks=!t.showBookmarks}}},[i("font-awesome-icon",{attrs:{icon:["far","bookmark"]}})],1),t._v(" "),t.showBookmarks?i("div",{directives:[{name:"on-clickaway",rawName:"v-on-clickaway",value:t.collapseBookmarks,expression:"collapseBookmarks"}],attrs:{id:"bookmark-content"}},t._l(t.bookmarks,(function(r,a){return i("div",{key:a+" "+t.expandedBookmarksIndex},[i("div",{staticClass:"bookmark-parent"},[i("div",{staticClass:"bookmark-expand-wrapper",class:{"bookmark-expand-wrapper-active":t.expandedBookmarksIndex===a},on:{click:function(r){return t.toggleBookmark(a)}}},[i("div",{staticClass:"bookmark-expand-button"},[r.items.length?i("font-awesome-icon",{attrs:{icon:"angle-down"}}):t._e()],1)]),t._v(" "),i("div",{staticClass:"bookmark-parent-title",on:{click:function(i){return t.scrollToBookmark(r)}}},[t._v("\n                "+t._s(r.title)+"\n              ")])]),t._v(" "),a===t.expandedBookmarksIndex?i("div",{staticClass:"bookmark-children"},t._l(r.items,(function(r){return i("div",{key:r.title,staticClass:"bookmark-child-title",on:{click:function(i){return t.scrollToBookmark(r)}}},[t._v("\n                "+t._s(r.title)+"\n              ")])})),0):t._e()])})),0):t._e()]),t._v(" "),i("div",{staticClass:"context-menu"},[i("context-menu",{attrs:{"mobile-title":"Weitere Optionen",items:[{text:"Link kopieren",action:t.copy},{text:"Herunterladen",action:t.downloadCurrentlyOpenedFile},{text:"Drucken",action:t.print}]}})],1),t._v(" "),t.embedded?t._e():i("div",{staticClass:"file-viewer-modal-document-close-button",attrs:{role:"button",tabindex:"0"},on:{click:function(r){return t.$emit("close")}}},[i("font-awesome-icon",{attrs:{icon:"times"}})],1)])]),t._v(" "),t.loading||0!==t.errorMessage.length?t._e():i("div",{attrs:{id:"canvas-wrapper"}},t._l(t.pages,(function(r,a){return i("pdf-page",{key:a,ref:"page-"+a,refInFor:!0,staticClass:"page-wrapper",attrs:{page:r,"pdfjs-lib":t.pdfjsLib,"search-string":t.searchString,"in-viewport-root-margin":"-50% 0%",rendered:r.rendered},on:{"update:rendered":function(i){return t.$set(r,"rendered",i)},"enter-viewport":function(r){t.activePageIndex=a}}})})),1)])}),[],!1,null,"e8576b7a",null));r.default=x.exports}}]);
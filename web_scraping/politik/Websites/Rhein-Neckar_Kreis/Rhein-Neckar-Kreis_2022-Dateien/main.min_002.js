!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@fullcalendar/core")):"function"==typeof define&&define.amd?define(["exports","@fullcalendar/core"],e):e((t=t||self).SSTFullCalendarList={},t.SSTFullCalendar)}(this,function(t,d){"use strict";var n=function(t,e){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s])}))(t,e)};function e(t,e){function s(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}e(i,s=d.FgEventRenderer),i.prototype.attachSegs=function(t){t.length?this.listView.renderSegList(t):this.listView.renderEmptyMessage()},i.prototype.detachSegs=function(){},i.prototype.renderSegHtml=function(t){var e=this.context,s=e.view,e=e.theme,n=t.eventRange,r=n.def,a=n.instance,i=n.ui,o=r.url,l=["sstfc-list-item"].concat(i.classNames),i=i.backgroundColor,t=r.allDay?d.getAllDayHtml(s):d.isMultiDayRange(n.range)?t.isStart?d.htmlEscape(this._getTimeText(a.range.start,t.end,!1)):t.isEnd?d.htmlEscape(this._getTimeText(t.start,a.range.end,!1)):d.getAllDayHtml(s):d.htmlEscape(this.getTimeText(n));return o&&l.push("sstfc-has-url"),'<tr class="'+l.join(" ")+'">'+(this.displayEventTime?'<td class="sstfc-list-item-time '+e.getClass("widgetContent")+'">'+(t||"")+"</td>":"")+'<td class="sstfc-list-item-marker '+e.getClass("widgetContent")+'"><span class="sstfc-event-dot"'+(i?' style="background-color:'+i+'"':"")+'></span></td><td class="sstfc-list-item-title '+e.getClass("widgetContent")+'"><a'+(o?' href="'+d.htmlEscape(o)+'"':"")+">"+d.htmlEscape(r.title||"")+"</a></td></tr>"},i.prototype.computeEventTimeFormat=function(){return{hour:"numeric",minute:"2-digit",meridiem:"short"}};var l,s,c=i,r=(e(a,l=d.View),a.prototype.render=function(t){var e=this.computeDateVars(t.dateProfile),s=e.dayDates,e=e.dayRanges;this.dayDates=s,this.renderContent(this.eventStoreToSegs(t.eventStore,t.eventUiBases,e))},a.prototype.destroy=function(){l.prototype.destroy.call(this),this.renderContent.unrender(),this.scroller.destroy(),this.calendar.unregisterInteractiveComponent(this)},a.prototype.updateSize=function(t,e,s){l.prototype.updateSize.call(this,t,e,s),this.eventRenderer.computeSizes(t),this.eventRenderer.assignSizes(t),this.scroller.clear(),s||this.scroller.setHeight(this.computeScrollerHeight(e))},a.prototype.computeScrollerHeight=function(t){return t-d.subtractInnerElHeight(this.el,this.scroller.el)},a.prototype._eventStoreToSegs=function(t,e,s){return this.eventRangesToSegs(d.sliceEventStore(t,e,this.props.dateProfile.activeRange,this.nextDayThreshold).fg,s)},a.prototype.eventRangesToSegs=function(t,e){for(var s=[],n=0,r=t;n<r.length;n++){var a=r[n];s.push.apply(s,this.eventRangeToSegs(a,e))}return s},a.prototype.eventRangeToSegs=function(t,e){for(var s,n=this.dateEnv,r=this.nextDayThreshold,a=t.range,i=t.def.allDay,o=[],l=0;l<e.length;l++)if((s=d.intersectRanges(a,e[l]))&&(s={component:this,eventRange:t,start:s.start,end:s.end,isStart:t.isStart&&s.start.valueOf()===a.start.valueOf(),isEnd:t.isEnd&&s.end.valueOf()===a.end.valueOf(),dayIndex:l},o.push(s),!s.isEnd)&&!i&&l+1<e.length&&a.end<n.add(e[l+1].start,r)){s.end=a.end,s.isEnd=!0;break}return o},a.prototype.renderEmptyMessage=function(){this.contentEl.innerHTML='<div class="sstfc-list-empty-wrap2"><div class="sstfc-list-empty-wrap1"><div class="sstfc-list-empty">'+d.htmlEscape(this.opt("noEventsMessage"))+"</div></div></div>"},a.prototype.renderSegList=function(t){for(var e,s,n=this.groupSegsByDay(t),t=d.htmlToElement('<table class="sstfc-list-table '+this.calendar.theme.getClass("tableList")+'"><tbody></tbody></table>'),r=t.querySelector("tbody"),a=0;a<n.length;a++)if(e=n[a])for(r.appendChild(this.buildDayHeaderRow(this.dayDates[a])),e=this.eventRenderer.sortEventSegs(e),s=0;s<e.length;s++)r.appendChild(e[s].el);this.contentEl.innerHTML="",this.contentEl.appendChild(t)},a.prototype.groupSegsByDay=function(t){for(var e,s=[],n=0;n<t.length;n++)(s[(e=t[n]).dayIndex]||(s[e.dayIndex]=[])).push(e);return s},a.prototype.buildDayHeaderRow=function(t){var e=this.dateEnv,s=d.createFormatter(this.opt("listDayFormat")),n=d.createFormatter(this.opt("listDayAltFormat"));return d.createElement("tr",{className:"sstfc-list-heading","data-date":e.formatIso(t,{omitTime:!0})},'<td class="'+(this.calendar.theme.getClass("tableListHeading")||this.calendar.theme.getClass("widgetHeader"))+'" colspan="3">'+(s?d.buildGotoAnchorHtml(this,t,{class:"sstfc-list-heading-main"},d.htmlEscape(e.format(t,s))):"")+(n?d.buildGotoAnchorHtml(this,t,{class:"sstfc-list-heading-alt"},d.htmlEscape(e.format(t,n))):"")+"</td>")},a);function a(t,e,s,n){var r=l.call(this,t,e,s,n)||this,e=(r.computeDateVars=d.memoize(p),r.eventStoreToSegs=d.memoize(r._eventStoreToSegs),r.eventRenderer=new c(r));r.renderContent=d.memoizeRendering(e.renderSegs.bind(e),e.unrender.bind(e)),r.el.classList.add("sstfc-list-view");for(var a=0,i=(r.theme.getClass("listView")||"").split(" ");a<i.length;a++){var o=i[a];o&&r.el.classList.add(o)}return r.scroller=new d.ScrollComponent("hidden","auto"),r.el.appendChild(r.scroller.el),r.contentEl=r.scroller.el,t.calendar.registerInteractiveComponent(r,{el:r.el}),r}function i(t){var e=s.call(this,t.context)||this;return e.listView=t,e}function p(t){for(var e=d.startOfDay(t.renderRange.start),s=t.renderRange.end,n=[],r=[];e<s;)n.push(e),r.push({start:e,end:d.addDays(e,1)}),e=d.addDays(e,1);return{dayDates:n,dayRanges:r}}r.prototype.fgSegSelector=".sstfc-list-item";var o=d.createPlugin({views:{list:{class:r,buttonTextKey:"list",listDayFormat:{month:"long",day:"numeric",year:"numeric"}},listDay:{type:"list",duration:{days:1},listDayFormat:{weekday:"long"}},listWeek:{type:"list",duration:{weeks:1},listDayFormat:{weekday:"long"},listDayAltFormat:{month:"long",day:"numeric",year:"numeric"}},listMonth:{type:"list",duration:{month:1},listDayAltFormat:{weekday:"long"}},listYear:{type:"list",duration:{year:1},listDayAltFormat:{weekday:"long"}}}});t.ListView=r,t.default=o,Object.defineProperty(t,"__esModule",{value:!0})});
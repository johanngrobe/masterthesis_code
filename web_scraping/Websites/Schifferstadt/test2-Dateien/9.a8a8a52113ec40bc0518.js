/*! For license information please see 9.a8a8a52113ec40bc0518.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{409:function(t,i,a){"use strict";a.d(i,"d",(function(){return u})),a.d(i,"c",(function(){return g})),a.d(i,"b",(function(){return p.a})),a.d(i,"e",(function(){return v})),a.d(i,"a",(function(){return b}));var o=a(419),r=a(654),l=a(649),c=a(672),d=a(650),u={methods:{format:function format(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"dd.MM.yyyy HH:mm";return Object(r.a)(Object(l.a)(t),i)},formatRelative:function formatRelative(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{forceRelativeFormat:!1,dateFormat:"dd.MM.yyyy"},a=Object(l.a)(t);return!i.forceRelativeFormat&&Object(c.a)(new Date,1)>a?this.format(t,i.dateFormat):Object(d.a)(a,{locale:o.a,addSuffix:!0})}}},h=a(415),m=a.n(h),g={methods:{readableBytes:function readableBytes(t){return m()(parseInt(t,10))}}},p=a(410),v={methods:{translate:function translate(t){return window.translations&&window.translations[t]?window.translations[t]:t}}},b={methods:{copyToClipboard:function copyToClipboard(t){var i=document.createElement("textarea");i.value=t,i.setAttribute("readonly",""),i.style.position="absolute",i.style.left="-9999px",document.body.appendChild(i),i.select(),document.execCommand("copy"),document.body.removeChild(i)}}}},410:function(t,i,a){"use strict";i.a={methods:{getPublicStatus:function getPublicStatus(t){return{"":"Kein Öffentlichkeitsstatus",1:"Öffentlich",2:"Nichtöffentlich",3:"Vertraulich",4:"Öffentlich/Nichtöffentlich"}[t]}}}},414:function(t,i,a){},416:function(t,i,a){},417:function(t,i,a){"use strict";var o={props:{hasImage:String,userId:[String,Number],fullName:{type:String,default:""},size:{type:Number,default:36},tryFetchingImage:{type:Boolean,default:!1}},data:function data(){return{imageData:""}},computed:{wrapperSize:function wrapperSize(){return"height: ".concat(this.size,"px")},imageStyles:function imageStyles(){return{width:"".concat(this.size,"px"),height:"".concat(this.size,"px"),backgroundImage:"url('".concat(this.avatarUrl,"')")}},iconSize:function iconSize(){return"font-size: ".concat(this.size,"px; height: ").concat(this.size,"px")},avatarUrl:function avatarUrl(){return"/documents.php?id=258&user_id=".concat(this.userId)}},created:function created(){var t=this;this.tryFetchingImage&&this.$webservice.get({id:258,user_id:this.userId,responseType:"arraybuffer"}).then((function(i){i.data.length>0&&(t.imageData=i.data)}))}},r=(a(418),a(407)),l=Object(r.a)(o,(function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",{staticClass:"user-avatar",style:t.wrapperSize,attrs:{role:"img","aria-label":t.fullName},on:{click:function(i){return t.$emit("click")}}},["1"===t.hasImage||""!==t.imageData?a("div",{staticClass:"user-avatar-image",style:t.imageStyles}):a("div",{staticClass:"user-avatar-icon-wrapper",style:t.iconSize},[a("font-awesome-icon",{staticClass:"user-avatar-icon",attrs:{icon:"user-circle"}})],1)])}),[],!1,null,"e20d7600",null);i.a=l.exports},418:function(t,i,a){"use strict";a(414)},420:function(t,i,a){"use strict";var o=a(576),r=a(649),l=a(415),c=a.n(l),d={mixins:[a(409).d],props:{alias:{type:String,default:""},subDocumentText:{type:String,default:""},attachment:Object,small:{type:Boolean,default:!1}},data:function data(){return{supportedVideoFormats:["mp4","mov","webm","ogg"]}},computed:{extension:function extension(){return this.attachment.documentExtension?this.attachment.documentExtension.toLowerCase():this.attachment.documentName.split(".").pop().toLowerCase()},isImage:function isImage(){return["img","jpeg","jpg","png","svg","bmp"].includes(this.extension)},date:function date(){return this.attachment.documentDate&&""!=this.attachment.documentDate&&Object(o.a)(Object(r.a)(this.attachment.documentDate))?this.format(this.attachment.documentDate,"dd.MM.yyyy"):""},size:function size(){return c()(parseInt(this.attachment.documentSize,10))},searchPreviewContent:function searchPreviewContent(){var t="";return this.attachment.search_result&&(t=this.attachment.search_result.vorschau_text.replaceAll("[b]","<b>").replaceAll("[/b]","</b>")),t}},methods:{open:function open(){this.eventBus.$emit("open-file",{src:void 0!==this.attachment.file?this.attachment.file:this.attachment.documentUrl,type:this.extension,filename:this.attachment.documentName})}}},u=(a(421),a(407)),h=Object(u.a)(d,(function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",{staticClass:"document-attachment"},[t.small?a("div",{staticClass:"document-attachment-small",attrs:{role:"button",tabindex:"0"},on:{click:function(i){return t.open()}}},[t.isImage?a("font-awesome-icon",{staticClass:"document-attachment-small-icon",attrs:{icon:"file-image"}}):"mp3"===t.extension?a("font-awesome-icon",{staticClass:"document-attachment-small-icon",attrs:{icon:"file-audio"}}):["mp4","mov"].includes(t.extension)?a("font-awesome-icon",{staticClass:"document-attachment-small-icon",attrs:{icon:"file-video"}}):a("font-awesome-icon",{staticClass:"document-attachment-small-icon",attrs:{icon:"file-pdf"}}),t._v(" "),a("div",{staticClass:"document-attachment-small-name"},[t._v("\n      "+t._s(t.attachment.documentName)+"\n    ")])],1):a("div",{staticClass:"document-attachment-full",class:{"document-attachment-full--highlighted":t.attachment.search_result}},[a("div",{staticClass:"document-attachment-content"},[a("div",{staticClass:"document-attachment-public-status"},[t.isImage?a("font-awesome-icon",{class:"document-attachment-public-status-"+t.attachment.documentPublicStatusId,attrs:{icon:"file-image"}}):"mp3"===t.extension?a("font-awesome-icon",{class:"document-attachment-public-status-"+t.attachment.documentPublicStatusId,attrs:{icon:"file-audio"}}):"doc"===t.extension||"docx"===t.extension?a("font-awesome-icon",{class:"document-attachment-public-status-"+t.attachment.documentPublicStatusId,attrs:{icon:"file-word"}}):"eml"===t.extension||"msg"===t.extension?a("font-awesome-icon",{class:"document-attachment-public-status-"+t.attachment.documentPublicStatusId,attrs:{icon:"envelope"}}):"pdf"===t.extension?a("font-awesome-icon",{class:"document-attachment-public-status-"+t.attachment.documentPublicStatusId,attrs:{icon:"file-pdf"}}):t.supportedVideoFormats.includes(t.extension)?a("font-awesome-icon",{class:"document-attachment-public-status-"+t.attachment.documentPublicStatusId,attrs:{icon:"file-video"}}):a("font-awesome-icon",{class:"document-attachment-public-status-"+t.attachment.documentPublicStatusId,attrs:{icon:"file"}})],1),t._v(" "),a("div",{staticClass:"document-attachment-header-wrapper"},[a("div",{staticClass:"document-attachment-name",attrs:{role:"button",tabindex:"0"},on:{click:function(i){return i.stopPropagation(),t.open()}}},[t._v("\n          "+t._s(""!==t.alias?t.alias:t.attachment.documentName)+"\n        ")]),t._v(" "),a("div",{staticClass:"document-attachment-header"},[""!==t.subDocumentText?a("div",{staticClass:"document-attachment-sub-text"},[t._v("\n            "+t._s(t.subDocumentText)+"\n          ")]):t._e(),t._v(" "),""!==t.subDocumentText?a("div",{staticClass:"document-attachment-header-separator"}):t._e(),t._v(" "),a("div",[t._v("\n            "+t._s(t.size)+"\n          ")]),t._v(" "),""!==t.date?a("div",{staticClass:"document-attachment-header-separator"}):t._e(),t._v(" "),""!==t.date?a("div",{staticClass:"document-attachment-date"},[t._v("\n            "+t._s(t.date)+"\n          ")]):t._e()])])]),t._v(" "),t.attachment.search_result?a("div",{staticClass:"document-attachment-search-preview",domProps:{innerHTML:t._s(t.searchPreviewContent)}}):t._e()])])}),[],!1,null,"a2df09ee",null);i.a=h.exports},421:function(t,i,a){"use strict";a(416)},429:function(t,i,a){"use strict";var o=a(25);o="default"in o?o.default:o;var r="2.2.2";/^2\./.test(o.version)||o.util.warn("VueClickaway 2.2.2 only supports Vue 2.x, and does not support Vue "+o.version);var l="_vue_clickaway_handler";function bind(t,i,a){unbind(t);var o=a.context,r=i.value;if("function"==typeof r){var c=!1;setTimeout((function(){c=!0}),0),t[l]=function(i){var a=i.path||(i.composedPath?i.composedPath():void 0);if(c&&(a?a.indexOf(t)<0:!t.contains(i.target)))return r.call(o,i)},document.documentElement.addEventListener("click",t[l],!1)}}function unbind(t){document.documentElement.removeEventListener("click",t[l],!1),delete t[l]}var c={bind:bind,update:function(t,i){i.value!==i.oldValue&&bind(t,i)},unbind:unbind},d={directives:{onClickaway:c}};i.version=r,i.directive=c,i.mixin=d},430:function(t,i,a){"use strict";var o=a(408),r=window.navigator.userAgent,l=!!r.match(/iPad/i)||!!r.match(/iPhone/i),c=!!r.match(/WebKit/i),d=l&&c&&!r.match(/CriOS/i),u=0;if(d){var h=r.indexOf("Safari");r.substring(h+7),-1!=r.indexOf("Version")&&(h=r.indexOf("Version"),u=(u=r.substring(h+8)).split(".")[0])}var m={components:{editor:d&&0!==u&&u<12?o.f:function(){return a.e(17).then(a.bind(null,671))}},props:{value:String,config:{type:Object,default:function _default(){}},images:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},data:function data(){return{}},methods:{syncImages:function syncImages(t){return this.$refs.editor.syncImages(t)}}},g=a(407),p=Object(g.a)(m,(function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",{staticClass:"ris-editor"},[a("editor",{ref:"editor",attrs:{value:t.value,config:t.config,disabled:t.disabled,images:t.images,type:"textarea"},on:{input:function(i){return t.$emit("input",i)}}})],1)}),[],!1,null,"3e166d36",null);i.a=p.exports},432:function(t,i,a){},433:function(t,i,a){},458:function(t,i,a){"use strict";var o=a(408),r=a(409),l=a(429),c=a(417),d=a(420),u={name:"Comment",components:{Modal:o.i,Avatar:c.a,Attachment:d.a,MaterialButton:o.e},directives:{onClickaway:l.directive},mixins:[r.d],props:{comment:{type:Object,required:!0},showCreationDateWithTime:{type:Boolean,required:!1,default:!0},isReport:{type:Boolean,default:!1,required:!1}},data:function data(){return{contextMenuExpanded:!1,showDeletionWarningModal:!1,removingComment:!1}},computed:{isOwn:function isOwn(){return this.comment.person.Personalnummer==this.$store.state.user.id},date:function date(){return this.showCreationDateWithTime?this.format(this.comment.created_at):this.format(this.comment.created_at,"dd.MM.yyyy")}},methods:{removeComment:function removeComment(){var t=this;this.removingComment=!0,this.$webservice.post({id:102,action:2,idnotiz:this.comment.id}).then((function(i){i.data.erfolg&&t.eventBus.$emit("show-notification",{text:"Kommentar erfolgreich gelöscht"}),t.showDeletionWarningModal=!1,t.removingComment=!1,t.$nextTick((function(){t.$emit("delete")}))}))},collapseContextMenu:function collapseContextMenu(){this.contextMenuExpanded=!1}}},h=(a(461),a(407)),m=Object(h.a)(u,(function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",{staticClass:"comment",class:{"own-comment":t.isOwn}},[a("modal",{staticClass:"comment-deletion-warning-modal",attrs:{show:t.showDeletionWarningModal,buttons:[{text:"Löschen",action:t.removeComment,type:"solid",danger:!0}],"has-close-button":"",loading:t.removingComment,title:"Kommentar wirklich löschen?"},on:{"update:show":function(i){t.showDeletionWarningModal=i}}},[a("div",[t._v("Möchten Sie diesen Kommentar wirklich löschen?")]),t._v(" "),a("div",[t._v("(Dieser Schritt kann nicht rückgängig gemacht werden)")])]),t._v(" "),a("div",{staticClass:"comment-avatar-wrapper"},[a("avatar",{staticClass:"comment-avatar",attrs:{"has-image":t.comment.person.hasImage,"full-name":t.comment.person.fullName,"user-id":t.comment.person.Personalnummer,size:30}})],1),t._v(" "),a("div",{staticClass:"comment-content"},[a("div",{staticClass:"comment-header"},[a("div",{staticClass:"comment-username"},[t._v("\n        "+t._s(t.comment.person.fullName)+"\n      ")]),t._v(" "),a("div",{staticClass:"comment-date-wrapper"},[a("div",[t._v(t._s(t.date)+" "+t._s(t.showCreationDateWithTime?"Uhr":""))]),t._v(" "),t.isOwn&&!t.isReport?a("div",{directives:[{name:"on-clickaway",rawName:"v-on-clickaway",value:t.collapseContextMenu,expression:"collapseContextMenu"}],staticClass:"comment-context-menu-wrapper"},[a("div",{staticClass:"comment-context-menu-button",on:{click:function(i){t.contextMenuExpanded=!t.contextMenuExpanded}}},[a("font-awesome-icon",{attrs:{icon:"ellipsis-h"}})],1),t._v(" "),t.contextMenuExpanded?a("div",{staticClass:"comment-context-menu"},[a("div",[a("material-button",{attrs:{inlined:"",icon:"pencil-alt",text:"Bearbeiten"},on:{click:function(i){return t.$emit("edit")}}}),t._v(" "),a("material-button",{attrs:{inlined:"",icon:"trash",text:"Löschen"},on:{click:function(i){t.showDeletionWarningModal=!0}}})],1)]):t._e()]):t._e()])]),t._v(" "),a("div",{staticClass:"comment-text",domProps:{innerHTML:t._s(t.comment.text)}}),t._v(" "),a("div",{staticClass:"comment-attachments-wrapper"},t._l(t.comment.attachments,(function(i){return a("attachment",{key:i.id,attrs:{small:!t.isReport,attachment:i}})})),1)]),t._v(" "),a("div")],1)}),[],!1,null,"60abe788",null);i.a=m.exports},461:function(t,i,a){"use strict";a(432)},462:function(t,i,a){"use strict";a(433)},491:function(t,i,a){"use strict";var o={name:"AgendaItemSummarizedUserVotes",components:{MaterialTable:a(408).h},props:{agendaItem:{required:!0,type:Object}},computed:{tableHeader:function tableHeader(){var tableHeader={};return this.agendaItem.summarized_user_votes.forEach((function(t,i){tableHeader[i]=t.abstimminfo})),tableHeader},userVotes:function userVotes(){var userVotes=[],t={};return this.agendaItem.summarized_user_votes.forEach((function(i,a){t[a]=i.wert})),userVotes.push(t),userVotes}}},r=a(407),l=Object(r.a)(o,(function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",{staticClass:"agenda-item-summarized-user-votes-wrapper"},[a("material-table",{attrs:{header:t.tableHeader,content:t.userVotes}})],1)}),[],!1,null,"55591552",null);i.a=l.exports},493:function(t,i,a){"use strict";var o=a(409),r={name:"AgendaItemResolutionControl",components:{Comment:a(458).a},mixins:[o.d],props:{resolutionControl:{required:!0,type:Object}},computed:{notYetViewed:function notYetViewed(){return"0"===this.resolutionControl.already_viewed||!this.resolutionControl.already_viewed},reportsAsComments:function reportsAsComments(){var t,i;return null!==(t=this.resolutionControl)&&void 0!==t&&t.reports?null===(i=this.resolutionControl.reports)||void 0===i?void 0:i.map((function(t){return{text:t.bericht,person:t.creator,attachments:t.attachments,created_at:t.datum,type:""}})):[]}}},l=(a(462),a(407)),c=Object(l.a)(r,(function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",{staticClass:"agenda-item-resolution-control-wrapper"},[a("div",{staticClass:"agenda-item-resolution-control-metadata-wrapper"},[""!=t.resolutionControl.status_text?a("div",{staticClass:"agenda-item-resolution-control-creation-date-wrapper"},[a("div",{staticClass:"agenda-item-resolution-control-status-text",class:{"agenda-item-resolution-control-status-text--new":t.notYetViewed}},[t.notYetViewed?a("span",{staticClass:"agenda-item-resolution-control-new"},[t._v("Neu")]):t._e(),t._v(" "),a("span",[t._v(t._s(t.resolutionControl.status_text))])]),t._v(" "),""!=t.resolutionControl.origin_created_at?a("div",{staticClass:"agenda-item-resolution-control-creation-date"},[t._v("\n        "+t._s(t.format(t.resolutionControl.origin_created_at,"dd.MM.yyyy"))+"\n      ")]):t._e()]):t._e(),t._v(" "),""!=t.resolutionControl.message?a("div",{staticClass:"agenda-item-resolution-control-text",domProps:{innerHTML:t._s(t.resolutionControl.message)}}):t._e()]),t._v(" "),t.reportsAsComments&&t.reportsAsComments.length>0?a("div",{staticClass:"agenda-item-resolution-control-attachments-wrapper"},[a("div",{staticClass:"agenda-item-resolution-control-attachments-headline"},[t._v("\n      "+t._s(t.reportsAsComments.length)+" Bericht"+t._s(t.reportsAsComments.length>1?"e":"")+"\n    ")]),t._v(" "),t._l(t.reportsAsComments,(function(i){return a("div",{key:i.id},[a("div",{staticClass:"agenda-item-resolution-control-report-type"},[t._v("\n        "+t._s(i.type.bezeichnung)+" von\n      ")]),t._v(" "),a("comment",{attrs:{comment:i,"is-report":"","show-creation-date-with-time":!1}})],1)}))],2):t._e()])}),[],!1,null,"914138ba",null);i.a=c.exports},535:function(t,i,a){},536:function(t,i,a){},537:function(t,i,a){},538:function(t,i,a){},539:function(t,i,a){},540:function(t,i,a){},541:function(t,i,a){},542:function(t,i,a){},543:function(t,i,a){},544:function(t,i,a){},545:function(t,i,a){},546:function(t,i,a){},607:function(t,i,a){t.exports=function(t){"use strict";function createCommonjsModule(t,i){return t(i={exports:{}},i.exports),i.exports}function getCjsExportFromNamespace(t){return t&&t.default||t}t=t&&t.hasOwnProperty("default")?t.default:t;var i={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},a=createCommonjsModule((function(t){var a={};for(var o in i)i.hasOwnProperty(o)&&(a[i[o]]=o);var r=t.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var l in r)if(r.hasOwnProperty(l)){if(!("channels"in r[l]))throw new Error("missing channels property: "+l);if(!("labels"in r[l]))throw new Error("missing channel labels property: "+l);if(r[l].labels.length!==r[l].channels)throw new Error("channel and label counts mismatch: "+l);var c=r[l].channels,d=r[l].labels;delete r[l].channels,delete r[l].labels,Object.defineProperty(r[l],"channels",{value:c}),Object.defineProperty(r[l],"labels",{value:d})}function comparativeDistance(t,i){return Math.pow(t[0]-i[0],2)+Math.pow(t[1]-i[1],2)+Math.pow(t[2]-i[2],2)}r.rgb.hsl=function(t){var i,a,o=t[0]/255,r=t[1]/255,l=t[2]/255,c=Math.min(o,r,l),d=Math.max(o,r,l),u=d-c;return d===c?i=0:o===d?i=(r-l)/u:r===d?i=2+(l-o)/u:l===d&&(i=4+(o-r)/u),(i=Math.min(60*i,360))<0&&(i+=360),a=(c+d)/2,[i,100*(d===c?0:a<=.5?u/(d+c):u/(2-d-c)),100*a]},r.rgb.hsv=function(t){var i,a,o,r,l,c=t[0]/255,d=t[1]/255,u=t[2]/255,h=Math.max(c,d,u),m=h-Math.min(c,d,u),diffc=function(t){return(h-t)/6/m+.5};return 0===m?r=l=0:(l=m/h,i=diffc(c),a=diffc(d),o=diffc(u),c===h?r=o-a:d===h?r=1/3+i-o:u===h&&(r=2/3+a-i),r<0?r+=1:r>1&&(r-=1)),[360*r,100*l,100*h]},r.rgb.hwb=function(t){var i=t[0],a=t[1],o=t[2];return[r.rgb.hsl(t)[0],1/255*Math.min(i,Math.min(a,o))*100,100*(o=1-1/255*Math.max(i,Math.max(a,o)))]},r.rgb.cmyk=function(t){var i,a=t[0]/255,o=t[1]/255,r=t[2]/255;return[100*((1-a-(i=Math.min(1-a,1-o,1-r)))/(1-i)||0),100*((1-o-i)/(1-i)||0),100*((1-r-i)/(1-i)||0),100*i]},r.rgb.keyword=function(t){var o=a[t];if(o)return o;var r,l=1/0;for(var c in i)if(i.hasOwnProperty(c)){var d=comparativeDistance(t,i[c]);d<l&&(l=d,r=c)}return r},r.keyword.rgb=function(t){return i[t]},r.rgb.xyz=function(t){var i=t[0]/255,a=t[1]/255,o=t[2]/255;return[100*(.4124*(i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92)+.3576*(a=a>.04045?Math.pow((a+.055)/1.055,2.4):a/12.92)+.1805*(o=o>.04045?Math.pow((o+.055)/1.055,2.4):o/12.92)),100*(.2126*i+.7152*a+.0722*o),100*(.0193*i+.1192*a+.9505*o)]},r.rgb.lab=function(t){var i=r.rgb.xyz(t),a=i[0],o=i[1],l=i[2];return o/=100,l/=108.883,a=(a/=95.047)>.008856?Math.pow(a,1/3):7.787*a+16/116,[116*(o=o>.008856?Math.pow(o,1/3):7.787*o+16/116)-16,500*(a-o),200*(o-(l=l>.008856?Math.pow(l,1/3):7.787*l+16/116))]},r.hsl.rgb=function(t){var i,a,o,r,l,c=t[0]/360,d=t[1]/100,u=t[2]/100;if(0===d)return[l=255*u,l,l];i=2*u-(a=u<.5?u*(1+d):u+d-u*d),r=[0,0,0];for(var h=0;h<3;h++)(o=c+1/3*-(h-1))<0&&o++,o>1&&o--,l=6*o<1?i+6*(a-i)*o:2*o<1?a:3*o<2?i+(a-i)*(2/3-o)*6:i,r[h]=255*l;return r},r.hsl.hsv=function(t){var i=t[0],a=t[1]/100,o=t[2]/100,r=a,l=Math.max(o,.01);return a*=(o*=2)<=1?o:2-o,r*=l<=1?l:2-l,[i,100*(0===o?2*r/(l+r):2*a/(o+a)),(o+a)/2*100]},r.hsv.rgb=function(t){var i=t[0]/60,a=t[1]/100,o=t[2]/100,r=Math.floor(i)%6,l=i-Math.floor(i),c=255*o*(1-a),d=255*o*(1-a*l),u=255*o*(1-a*(1-l));switch(o*=255,r){case 0:return[o,u,c];case 1:return[d,o,c];case 2:return[c,o,u];case 3:return[c,d,o];case 4:return[u,c,o];case 5:return[o,c,d]}},r.hsv.hsl=function(t){var i,a,o,r=t[0],l=t[1]/100,c=t[2]/100,d=Math.max(c,.01);return o=(2-l)*c,a=l*d,[r,100*(a=(a/=(i=(2-l)*d)<=1?i:2-i)||0),100*(o/=2)]},r.hwb.rgb=function(t){var i,a,o,r,l,c,d,u=t[0]/360,h=t[1]/100,m=t[2]/100,g=h+m;switch(g>1&&(h/=g,m/=g),o=6*u-(i=Math.floor(6*u)),0!=(1&i)&&(o=1-o),r=h+o*((a=1-m)-h),i){default:case 6:case 0:l=a,c=r,d=h;break;case 1:l=r,c=a,d=h;break;case 2:l=h,c=a,d=r;break;case 3:l=h,c=r,d=a;break;case 4:l=r,c=h,d=a;break;case 5:l=a,c=h,d=r}return[255*l,255*c,255*d]},r.cmyk.rgb=function(t){var i=t[0]/100,a=t[1]/100,o=t[2]/100,r=t[3]/100;return[255*(1-Math.min(1,i*(1-r)+r)),255*(1-Math.min(1,a*(1-r)+r)),255*(1-Math.min(1,o*(1-r)+r))]},r.xyz.rgb=function(t){var i,a,o,r=t[0]/100,l=t[1]/100,c=t[2]/100;return a=-.9689*r+1.8758*l+.0415*c,o=.0557*r+-.204*l+1.057*c,i=(i=3.2406*r+-1.5372*l+-.4986*c)>.0031308?1.055*Math.pow(i,1/2.4)-.055:12.92*i,a=a>.0031308?1.055*Math.pow(a,1/2.4)-.055:12.92*a,o=o>.0031308?1.055*Math.pow(o,1/2.4)-.055:12.92*o,[255*(i=Math.min(Math.max(0,i),1)),255*(a=Math.min(Math.max(0,a),1)),255*(o=Math.min(Math.max(0,o),1))]},r.xyz.lab=function(t){var i=t[0],a=t[1],o=t[2];return a/=100,o/=108.883,i=(i/=95.047)>.008856?Math.pow(i,1/3):7.787*i+16/116,[116*(a=a>.008856?Math.pow(a,1/3):7.787*a+16/116)-16,500*(i-a),200*(a-(o=o>.008856?Math.pow(o,1/3):7.787*o+16/116))]},r.lab.xyz=function(t){var i,a,o,r=t[0];i=t[1]/500+(a=(r+16)/116),o=a-t[2]/200;var l=Math.pow(a,3),c=Math.pow(i,3),d=Math.pow(o,3);return a=l>.008856?l:(a-16/116)/7.787,i=c>.008856?c:(i-16/116)/7.787,o=d>.008856?d:(o-16/116)/7.787,[i*=95.047,a*=100,o*=108.883]},r.lab.lch=function(t){var i,a=t[0],o=t[1],r=t[2];return(i=360*Math.atan2(r,o)/2/Math.PI)<0&&(i+=360),[a,Math.sqrt(o*o+r*r),i]},r.lch.lab=function(t){var i,a=t[0],o=t[1];return i=t[2]/360*2*Math.PI,[a,o*Math.cos(i),o*Math.sin(i)]},r.rgb.ansi16=function(t){var i=t[0],a=t[1],o=t[2],l=1 in arguments?arguments[1]:r.rgb.hsv(t)[2];if(0===(l=Math.round(l/50)))return 30;var c=30+(Math.round(o/255)<<2|Math.round(a/255)<<1|Math.round(i/255));return 2===l&&(c+=60),c},r.hsv.ansi16=function(t){return r.rgb.ansi16(r.hsv.rgb(t),t[2])},r.rgb.ansi256=function(t){var i=t[0],a=t[1],o=t[2];return i===a&&a===o?i<8?16:i>248?231:Math.round((i-8)/247*24)+232:16+36*Math.round(i/255*5)+6*Math.round(a/255*5)+Math.round(o/255*5)},r.ansi16.rgb=function(t){var i=t%10;if(0===i||7===i)return t>50&&(i+=3.5),[i=i/10.5*255,i,i];var a=.5*(1+~~(t>50));return[(1&i)*a*255,(i>>1&1)*a*255,(i>>2&1)*a*255]},r.ansi256.rgb=function(t){if(t>=232){var i=10*(t-232)+8;return[i,i,i]}var a;return t-=16,[Math.floor(t/36)/5*255,Math.floor((a=t%36)/6)/5*255,a%6/5*255]},r.rgb.hex=function(t){var i=(((255&Math.round(t[0]))<<16)+((255&Math.round(t[1]))<<8)+(255&Math.round(t[2]))).toString(16).toUpperCase();return"000000".substring(i.length)+i},r.hex.rgb=function(t){var i=t.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!i)return[0,0,0];var a=i[0];3===i[0].length&&(a=a.split("").map((function(t){return t+t})).join(""));var o=parseInt(a,16);return[o>>16&255,o>>8&255,255&o]},r.rgb.hcg=function(t){var i,a=t[0]/255,o=t[1]/255,r=t[2]/255,l=Math.max(Math.max(a,o),r),c=Math.min(Math.min(a,o),r),d=l-c;return i=d<=0?0:l===a?(o-r)/d%6:l===o?2+(r-a)/d:4+(a-o)/d+4,i/=6,[360*(i%=1),100*d,100*(d<1?c/(1-d):0)]},r.hsl.hcg=function(t){var i=t[1]/100,a=t[2]/100,o=1,r=0;return(o=a<.5?2*i*a:2*i*(1-a))<1&&(r=(a-.5*o)/(1-o)),[t[0],100*o,100*r]},r.hsv.hcg=function(t){var i=t[1]/100,a=t[2]/100,o=i*a,r=0;return o<1&&(r=(a-o)/(1-o)),[t[0],100*o,100*r]},r.hcg.rgb=function(t){var i=t[0]/360,a=t[1]/100,o=t[2]/100;if(0===a)return[255*o,255*o,255*o];var r=[0,0,0],l=i%1*6,c=l%1,d=1-c,u=0;switch(Math.floor(l)){case 0:r[0]=1,r[1]=c,r[2]=0;break;case 1:r[0]=d,r[1]=1,r[2]=0;break;case 2:r[0]=0,r[1]=1,r[2]=c;break;case 3:r[0]=0,r[1]=d,r[2]=1;break;case 4:r[0]=c,r[1]=0,r[2]=1;break;default:r[0]=1,r[1]=0,r[2]=d}return u=(1-a)*o,[255*(a*r[0]+u),255*(a*r[1]+u),255*(a*r[2]+u)]},r.hcg.hsv=function(t){var i=t[1]/100,a=i+t[2]/100*(1-i),o=0;return a>0&&(o=i/a),[t[0],100*o,100*a]},r.hcg.hsl=function(t){var i=t[1]/100,a=t[2]/100*(1-i)+.5*i,o=0;return a>0&&a<.5?o=i/(2*a):a>=.5&&a<1&&(o=i/(2*(1-a))),[t[0],100*o,100*a]},r.hcg.hwb=function(t){var i=t[1]/100,a=i+t[2]/100*(1-i);return[t[0],100*(a-i),100*(1-a)]},r.hwb.hcg=function(t){var i=t[1]/100,a=1-t[2]/100,o=a-i,r=0;return o<1&&(r=(a-o)/(1-o)),[t[0],100*o,100*r]},r.apple.rgb=function(t){return[t[0]/65535*255,t[1]/65535*255,t[2]/65535*255]},r.rgb.apple=function(t){return[t[0]/255*65535,t[1]/255*65535,t[2]/255*65535]},r.gray.rgb=function(t){return[t[0]/100*255,t[0]/100*255,t[0]/100*255]},r.gray.hsl=r.gray.hsv=function(t){return[0,0,t[0]]},r.gray.hwb=function(t){return[0,100,t[0]]},r.gray.cmyk=function(t){return[0,0,0,t[0]]},r.gray.lab=function(t){return[t[0],0,0]},r.gray.hex=function(t){var i=255&Math.round(t[0]/100*255),a=((i<<16)+(i<<8)+i).toString(16).toUpperCase();return"000000".substring(a.length)+a},r.rgb.gray=function(t){return[(t[0]+t[1]+t[2])/3/255*100]}}));function buildGraph(){for(var t={},i=Object.keys(a),o=i.length,r=0;r<o;r++)t[i[r]]={distance:-1,parent:null};return t}function deriveBFS(t){var i=buildGraph(),o=[t];for(i[t].distance=0;o.length;)for(var r=o.pop(),l=Object.keys(a[r]),c=l.length,d=0;d<c;d++){var u=l[d],h=i[u];-1===h.distance&&(h.distance=i[r].distance+1,h.parent=r,o.unshift(u))}return i}function link(t,i){return function(a){return i(t(a))}}function wrapConversion(t,i){for(var o=[i[t].parent,t],r=a[i[t].parent][t],l=i[t].parent;i[l].parent;)o.unshift(i[l].parent),r=link(a[i[l].parent][l],r),l=i[l].parent;return r.conversion=o,r}a.rgb,a.hsl,a.hsv,a.hwb,a.cmyk,a.xyz,a.lab,a.lch,a.hex,a.keyword,a.ansi16,a.ansi256,a.hcg,a.apple,a.gray;var route=function(t){for(var i=deriveBFS(t),a={},o=Object.keys(i),r=o.length,l=0;l<r;l++){var c=o[l];null!==i[c].parent&&(a[c]=wrapConversion(c,i))}return a},o={};function wrapRaw(t){var wrappedFn=function(i){return null==i?i:(arguments.length>1&&(i=Array.prototype.slice.call(arguments)),t(i))};return"conversion"in t&&(wrappedFn.conversion=t.conversion),wrappedFn}function wrapRounded(t){var wrappedFn=function(i){if(null==i)return i;arguments.length>1&&(i=Array.prototype.slice.call(arguments));var a=t(i);if("object"==typeof a)for(var o=a.length,r=0;r<o;r++)a[r]=Math.round(a[r]);return a};return"conversion"in t&&(wrappedFn.conversion=t.conversion),wrappedFn}Object.keys(a).forEach((function(t){o[t]={},Object.defineProperty(o[t],"channels",{value:a[t].channels}),Object.defineProperty(o[t],"labels",{value:a[t].labels});var i=route(t);Object.keys(i).forEach((function(a){var r=i[a];o[t][a]=wrapRounded(r),o[t][a].raw=wrapRaw(r)}))}));var r=o,l={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},c={getRgba:getRgba,getHsla:getHsla,getRgb:getRgb,getHsl:getHsl,getHwb:getHwb,getAlpha:getAlpha,hexString:hexString,rgbString:rgbString,rgbaString:rgbaString,percentString:percentString,percentaString:percentaString,hslString:hslString,hslaString:hslaString,hwbString:hwbString,keyword:keyword};function getRgba(t){if(t){var i=/^#([a-fA-F0-9]{3,4})$/i,a=/^#([a-fA-F0-9]{6}([a-fA-F0-9]{2})?)$/i,o=/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/i,r=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/i,c=/(\w+)/,d=[0,0,0],u=1,h=t.match(i),m="";if(h){m=(h=h[1])[3];for(var g=0;g<d.length;g++)d[g]=parseInt(h[g]+h[g],16);m&&(u=Math.round(parseInt(m+m,16)/255*100)/100)}else if(h=t.match(a)){for(m=h[2],h=h[1],g=0;g<d.length;g++)d[g]=parseInt(h.slice(2*g,2*g+2),16);m&&(u=Math.round(parseInt(m,16)/255*100)/100)}else if(h=t.match(o)){for(g=0;g<d.length;g++)d[g]=parseInt(h[g+1]);u=parseFloat(h[4])}else if(h=t.match(r)){for(g=0;g<d.length;g++)d[g]=Math.round(2.55*parseFloat(h[g+1]));u=parseFloat(h[4])}else if(h=t.match(c)){if("transparent"==h[1])return[0,0,0,0];if(!(d=l[h[1]]))return}for(g=0;g<d.length;g++)d[g]=scale(d[g],0,255);return u=u||0==u?scale(u,0,1):1,d[3]=u,d}}function getHsla(t){if(t){var i=/^hsla?\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/,a=t.match(i);if(a){var o=parseFloat(a[4]);return[scale(parseInt(a[1]),0,360),scale(parseFloat(a[2]),0,100),scale(parseFloat(a[3]),0,100),scale(isNaN(o)?1:o,0,1)]}}}function getHwb(t){if(t){var i=/^hwb\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/,a=t.match(i);if(a){var o=parseFloat(a[4]);return[scale(parseInt(a[1]),0,360),scale(parseFloat(a[2]),0,100),scale(parseFloat(a[3]),0,100),scale(isNaN(o)?1:o,0,1)]}}}function getRgb(t){var i=getRgba(t);return i&&i.slice(0,3)}function getHsl(t){var i=getHsla(t);return i&&i.slice(0,3)}function getAlpha(t){var i=getRgba(t);return i||(i=getHsla(t))||(i=getHwb(t))?i[3]:void 0}function hexString(t,i){return i=void 0!==i&&3===t.length?i:t[3],"#"+hexDouble(t[0])+hexDouble(t[1])+hexDouble(t[2])+(i>=0&&i<1?hexDouble(Math.round(255*i)):"")}function rgbString(t,i){return i<1||t[3]&&t[3]<1?rgbaString(t,i):"rgb("+t[0]+", "+t[1]+", "+t[2]+")"}function rgbaString(t,i){return void 0===i&&(i=void 0!==t[3]?t[3]:1),"rgba("+t[0]+", "+t[1]+", "+t[2]+", "+i+")"}function percentString(t,i){return i<1||t[3]&&t[3]<1?percentaString(t,i):"rgb("+Math.round(t[0]/255*100)+"%, "+Math.round(t[1]/255*100)+"%, "+Math.round(t[2]/255*100)+"%)"}function percentaString(t,i){return"rgba("+Math.round(t[0]/255*100)+"%, "+Math.round(t[1]/255*100)+"%, "+Math.round(t[2]/255*100)+"%, "+(i||t[3]||1)+")"}function hslString(t,i){return i<1||t[3]&&t[3]<1?hslaString(t,i):"hsl("+t[0]+", "+t[1]+"%, "+t[2]+"%)"}function hslaString(t,i){return void 0===i&&(i=void 0!==t[3]?t[3]:1),"hsla("+t[0]+", "+t[1]+"%, "+t[2]+"%, "+i+")"}function hwbString(t,i){return void 0===i&&(i=void 0!==t[3]?t[3]:1),"hwb("+t[0]+", "+t[1]+"%, "+t[2]+"%"+(void 0!==i&&1!==i?", "+i:"")+")"}function keyword(t){return d[t.slice(0,3)]}function scale(t,i,a){return Math.min(Math.max(i,t),a)}function hexDouble(t){var i=t.toString(16).toUpperCase();return i.length<2?"0"+i:i}var d={};for(var u in l)d[l[u]]=u;var Color=function(t){return t instanceof Color?t:this instanceof Color?(this.valid=!1,this.values={rgb:[0,0,0],hsl:[0,0,0],hsv:[0,0,0],hwb:[0,0,0],cmyk:[0,0,0,0],alpha:1},void("string"==typeof t?(i=c.getRgba(t))?this.setValues("rgb",i):(i=c.getHsla(t))?this.setValues("hsl",i):(i=c.getHwb(t))&&this.setValues("hwb",i):"object"==typeof t&&(void 0!==(i=t).r||void 0!==i.red?this.setValues("rgb",i):void 0!==i.l||void 0!==i.lightness?this.setValues("hsl",i):void 0!==i.v||void 0!==i.value?this.setValues("hsv",i):void 0!==i.w||void 0!==i.whiteness?this.setValues("hwb",i):void 0===i.c&&void 0===i.cyan||this.setValues("cmyk",i)))):new Color(t);var i};Color.prototype={isValid:function(){return this.valid},rgb:function(){return this.setSpace("rgb",arguments)},hsl:function(){return this.setSpace("hsl",arguments)},hsv:function(){return this.setSpace("hsv",arguments)},hwb:function(){return this.setSpace("hwb",arguments)},cmyk:function(){return this.setSpace("cmyk",arguments)},rgbArray:function(){return this.values.rgb},hslArray:function(){return this.values.hsl},hsvArray:function(){return this.values.hsv},hwbArray:function(){var t=this.values;return 1!==t.alpha?t.hwb.concat([t.alpha]):t.hwb},cmykArray:function(){return this.values.cmyk},rgbaArray:function(){var t=this.values;return t.rgb.concat([t.alpha])},hslaArray:function(){var t=this.values;return t.hsl.concat([t.alpha])},alpha:function(t){return void 0===t?this.values.alpha:(this.setValues("alpha",t),this)},red:function(t){return this.setChannel("rgb",0,t)},green:function(t){return this.setChannel("rgb",1,t)},blue:function(t){return this.setChannel("rgb",2,t)},hue:function(t){return t&&(t=(t%=360)<0?360+t:t),this.setChannel("hsl",0,t)},saturation:function(t){return this.setChannel("hsl",1,t)},lightness:function(t){return this.setChannel("hsl",2,t)},saturationv:function(t){return this.setChannel("hsv",1,t)},whiteness:function(t){return this.setChannel("hwb",1,t)},blackness:function(t){return this.setChannel("hwb",2,t)},value:function(t){return this.setChannel("hsv",2,t)},cyan:function(t){return this.setChannel("cmyk",0,t)},magenta:function(t){return this.setChannel("cmyk",1,t)},yellow:function(t){return this.setChannel("cmyk",2,t)},black:function(t){return this.setChannel("cmyk",3,t)},hexString:function(){return c.hexString(this.values.rgb)},rgbString:function(){return c.rgbString(this.values.rgb,this.values.alpha)},rgbaString:function(){return c.rgbaString(this.values.rgb,this.values.alpha)},percentString:function(){return c.percentString(this.values.rgb,this.values.alpha)},hslString:function(){return c.hslString(this.values.hsl,this.values.alpha)},hslaString:function(){return c.hslaString(this.values.hsl,this.values.alpha)},hwbString:function(){return c.hwbString(this.values.hwb,this.values.alpha)},keyword:function(){return c.keyword(this.values.rgb,this.values.alpha)},rgbNumber:function(){var t=this.values.rgb;return t[0]<<16|t[1]<<8|t[2]},luminosity:function(){for(var t=this.values.rgb,i=[],a=0;a<t.length;a++){var o=t[a]/255;i[a]=o<=.03928?o/12.92:Math.pow((o+.055)/1.055,2.4)}return.2126*i[0]+.7152*i[1]+.0722*i[2]},contrast:function(t){var i=this.luminosity(),a=t.luminosity();return i>a?(i+.05)/(a+.05):(a+.05)/(i+.05)},level:function(t){var i=this.contrast(t);return i>=7.1?"AAA":i>=4.5?"AA":""},dark:function(){var t=this.values.rgb;return(299*t[0]+587*t[1]+114*t[2])/1e3<128},light:function(){return!this.dark()},negate:function(){for(var t=[],i=0;i<3;i++)t[i]=255-this.values.rgb[i];return this.setValues("rgb",t),this},lighten:function(t){var i=this.values.hsl;return i[2]+=i[2]*t,this.setValues("hsl",i),this},darken:function(t){var i=this.values.hsl;return i[2]-=i[2]*t,this.setValues("hsl",i),this},saturate:function(t){var i=this.values.hsl;return i[1]+=i[1]*t,this.setValues("hsl",i),this},desaturate:function(t){var i=this.values.hsl;return i[1]-=i[1]*t,this.setValues("hsl",i),this},whiten:function(t){var i=this.values.hwb;return i[1]+=i[1]*t,this.setValues("hwb",i),this},blacken:function(t){var i=this.values.hwb;return i[2]+=i[2]*t,this.setValues("hwb",i),this},greyscale:function(){var t=this.values.rgb,i=.3*t[0]+.59*t[1]+.11*t[2];return this.setValues("rgb",[i,i,i]),this},clearer:function(t){var i=this.values.alpha;return this.setValues("alpha",i-i*t),this},opaquer:function(t){var i=this.values.alpha;return this.setValues("alpha",i+i*t),this},rotate:function(t){var i=this.values.hsl,a=(i[0]+t)%360;return i[0]=a<0?360+a:a,this.setValues("hsl",i),this},mix:function(t,i){var a=this,o=t,r=void 0===i?.5:i,l=2*r-1,c=a.alpha()-o.alpha(),d=((l*c==-1?l:(l+c)/(1+l*c))+1)/2,u=1-d;return this.rgb(d*a.red()+u*o.red(),d*a.green()+u*o.green(),d*a.blue()+u*o.blue()).alpha(a.alpha()*r+o.alpha()*(1-r))},toJSON:function(){return this.rgb()},clone:function(){var t,i,a=new Color,o=this.values,r=a.values;for(var l in o)o.hasOwnProperty(l)&&(t=o[l],"[object Array]"===(i={}.toString.call(t))?r[l]=t.slice(0):"[object Number]"===i?r[l]=t:console.error("unexpected color value:",t));return a}},Color.prototype.spaces={rgb:["red","green","blue"],hsl:["hue","saturation","lightness"],hsv:["hue","saturation","value"],hwb:["hue","whiteness","blackness"],cmyk:["cyan","magenta","yellow","black"]},Color.prototype.maxes={rgb:[255,255,255],hsl:[360,100,100],hsv:[360,100,100],hwb:[360,100,100],cmyk:[100,100,100,100]},Color.prototype.getValues=function(t){for(var i=this.values,a={},o=0;o<t.length;o++)a[t.charAt(o)]=i[t][o];return 1!==i.alpha&&(a.a=i.alpha),a},Color.prototype.setValues=function(t,i){var a,o,l=this.values,c=this.spaces,d=this.maxes,u=1;if(this.valid=!0,"alpha"===t)u=i;else if(i.length)l[t]=i.slice(0,t.length),u=i[t.length];else if(void 0!==i[t.charAt(0)]){for(a=0;a<t.length;a++)l[t][a]=i[t.charAt(a)];u=i.a}else if(void 0!==i[c[t][0]]){var h=c[t];for(a=0;a<t.length;a++)l[t][a]=i[h[a]];u=i.alpha}if(l.alpha=Math.max(0,Math.min(1,void 0===u?l.alpha:u)),"alpha"===t)return!1;for(a=0;a<t.length;a++)o=Math.max(0,Math.min(d[t][a],l[t][a])),l[t][a]=Math.round(o);for(var m in c)m!==t&&(l[m]=r[t][m](l[t]));return!0},Color.prototype.setSpace=function(t,i){var a=i[0];return void 0===a?this.getValues(t):("number"==typeof a&&(a=Array.prototype.slice.call(i)),this.setValues(t,a),this)},Color.prototype.setChannel=function(t,i,a){var o=this.values[t];return void 0===a?o[i]:(a===o[i]||(o[i]=a,this.setValues(t,o)),this)},"undefined"!=typeof window&&(window.Color=Color);var h=Color;function isValidKey(t){return-1===["__proto__","prototype","constructor"].indexOf(t)}var m,g={noop:function(){},uid:(m=0,function(){return m++}),isNullOrUndef:function(t){return null==t},isArray:function(t){if(Array.isArray&&Array.isArray(t))return!0;var i=Object.prototype.toString.call(t);return"[object"===i.substr(0,7)&&"Array]"===i.substr(-6)},isObject:function(t){return null!==t&&"[object Object]"===Object.prototype.toString.call(t)},isFinite:function(t){return("number"==typeof t||t instanceof Number)&&isFinite(t)},valueOrDefault:function(t,i){return void 0===t?i:t},valueAtIndexOrDefault:function(t,i,a){return g.valueOrDefault(g.isArray(t)?t[i]:t,a)},callback:function(t,i,a){if(t&&"function"==typeof t.call)return t.apply(a,i)},each:function(t,i,a,o){var r,l,c;if(g.isArray(t))if(l=t.length,o)for(r=l-1;r>=0;r--)i.call(a,t[r],r);else for(r=0;r<l;r++)i.call(a,t[r],r);else if(g.isObject(t))for(l=(c=Object.keys(t)).length,r=0;r<l;r++)i.call(a,t[c[r]],c[r])},arrayEquals:function(t,i){var a,o,r,l;if(!t||!i||t.length!==i.length)return!1;for(a=0,o=t.length;a<o;++a)if(r=t[a],l=i[a],r instanceof Array&&l instanceof Array){if(!g.arrayEquals(r,l))return!1}else if(r!==l)return!1;return!0},clone:function(t){if(g.isArray(t))return t.map(g.clone);if(g.isObject(t)){for(var i=Object.create(t),a=Object.keys(t),o=a.length,r=0;r<o;++r)i[a[r]]=g.clone(t[a[r]]);return i}return t},_merger:function(t,i,a,o){if(isValidKey(t)){var r=i[t],l=a[t];g.isObject(r)&&g.isObject(l)?g.merge(r,l,o):i[t]=g.clone(l)}},_mergerIf:function(t,i,a){if(isValidKey(t)){var o=i[t],r=a[t];g.isObject(o)&&g.isObject(r)?g.mergeIf(o,r):i.hasOwnProperty(t)||(i[t]=g.clone(r))}},merge:function(t,i,a){var o,r,l,c,d,u=g.isArray(i)?i:[i],h=u.length;if(!g.isObject(t))return t;for(o=(a=a||{}).merger||g._merger,r=0;r<h;++r)if(i=u[r],g.isObject(i))for(d=0,c=(l=Object.keys(i)).length;d<c;++d)o(l[d],t,i,a);return t},mergeIf:function(t,i){return g.merge(t,i,{merger:g._mergerIf})},extend:Object.assign||function(t){return g.merge(t,[].slice.call(arguments,1),{merger:function(t,i,a){i[t]=a[t]}})},inherits:function(t){var i=this,a=t&&t.hasOwnProperty("constructor")?t.constructor:function(){return i.apply(this,arguments)},Surrogate=function(){this.constructor=a};return Surrogate.prototype=i.prototype,a.prototype=new Surrogate,a.extend=g.inherits,t&&g.extend(a.prototype,t),a.__super__=i.prototype,a},_deprecated:function(t,i,a,o){void 0!==i&&console.warn(t+': "'+a+'" is deprecated. Please use "'+o+'" instead')}},p=g;g.callCallback=g.callback,g.indexOf=function(t,i,a){return Array.prototype.indexOf.call(t,i,a)},g.getValueOrDefault=g.valueOrDefault,g.getValueAtIndexOrDefault=g.valueAtIndexOrDefault;var v={linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return-t*(t-2)},easeInOutQuad:function(t){return(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1)},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return(t-=1)*t*t+1},easeInOutCubic:function(t){return(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return-((t-=1)*t*t*t-1)},easeInOutQuart:function(t){return(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},easeInQuint:function(t){return t*t*t*t*t},easeOutQuint:function(t){return(t-=1)*t*t*t*t+1},easeInOutQuint:function(t){return(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},easeInSine:function(t){return 1-Math.cos(t*(Math.PI/2))},easeOutSine:function(t){return Math.sin(t*(Math.PI/2))},easeInOutSine:function(t){return-.5*(Math.cos(Math.PI*t)-1)},easeInExpo:function(t){return 0===t?0:Math.pow(2,10*(t-1))},easeOutExpo:function(t){return 1===t?1:1-Math.pow(2,-10*t)},easeInOutExpo:function(t){return 0===t?0:1===t?1:(t/=.5)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*--t))},easeInCirc:function(t){return t>=1?t:-(Math.sqrt(1-t*t)-1)},easeOutCirc:function(t){return Math.sqrt(1-(t-=1)*t)},easeInOutCirc:function(t){return(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},easeInElastic:function(t){var i=1.70158,a=0,o=1;return 0===t?0:1===t?1:(a||(a=.3),o<1?(o=1,i=a/4):i=a/(2*Math.PI)*Math.asin(1/o),-o*Math.pow(2,10*(t-=1))*Math.sin((t-i)*(2*Math.PI)/a))},easeOutElastic:function(t){var i=1.70158,a=0,o=1;return 0===t?0:1===t?1:(a||(a=.3),o<1?(o=1,i=a/4):i=a/(2*Math.PI)*Math.asin(1/o),o*Math.pow(2,-10*t)*Math.sin((t-i)*(2*Math.PI)/a)+1)},easeInOutElastic:function(t){var i=1.70158,a=0,o=1;return 0===t?0:2==(t/=.5)?1:(a||(a=.45),o<1?(o=1,i=a/4):i=a/(2*Math.PI)*Math.asin(1/o),t<1?o*Math.pow(2,10*(t-=1))*Math.sin((t-i)*(2*Math.PI)/a)*-.5:o*Math.pow(2,-10*(t-=1))*Math.sin((t-i)*(2*Math.PI)/a)*.5+1)},easeInBack:function(t){var i=1.70158;return t*t*((i+1)*t-i)},easeOutBack:function(t){var i=1.70158;return(t-=1)*t*((i+1)*t+i)+1},easeInOutBack:function(t){var i=1.70158;return(t/=.5)<1?t*t*((1+(i*=1.525))*t-i)*.5:.5*((t-=2)*t*((1+(i*=1.525))*t+i)+2)},easeInBounce:function(t){return 1-v.easeOutBounce(1-t)},easeOutBounce:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:function(t){return t<.5?.5*v.easeInBounce(2*t):.5*v.easeOutBounce(2*t-1)+.5}},b={effects:v};p.easingEffects=v;var _=Math.PI,y=_/180,x=2*_,w=_/2,C=_/4,M=2*_/3,k={clear:function(t){t.ctx.clearRect(0,0,t.width,t.height)},roundedRect:function(t,i,a,o,r,l){if(l){var c=Math.min(l,r/2,o/2),d=i+c,u=a+c,h=i+o-c,m=a+r-c;t.moveTo(i,u),d<h&&u<m?(t.arc(d,u,c,-_,-w),t.arc(h,u,c,-w,0),t.arc(h,m,c,0,w),t.arc(d,m,c,w,_)):d<h?(t.moveTo(d,a),t.arc(h,u,c,-w,w),t.arc(d,u,c,w,_+w)):u<m?(t.arc(d,u,c,-_,0),t.arc(d,m,c,0,_)):t.arc(d,u,c,-_,_),t.closePath(),t.moveTo(i,a)}else t.rect(i,a,o,r)},drawPoint:function(t,i,a,o,r,l){var c,d,u,h,m,g=(l||0)*y;if(i&&"object"==typeof i&&("[object HTMLImageElement]"===(c=i.toString())||"[object HTMLCanvasElement]"===c))return t.save(),t.translate(o,r),t.rotate(g),t.drawImage(i,-i.width/2,-i.height/2,i.width,i.height),void t.restore();if(!(isNaN(a)||a<=0)){switch(t.beginPath(),i){default:t.arc(o,r,a,0,x),t.closePath();break;case"triangle":t.moveTo(o+Math.sin(g)*a,r-Math.cos(g)*a),g+=M,t.lineTo(o+Math.sin(g)*a,r-Math.cos(g)*a),g+=M,t.lineTo(o+Math.sin(g)*a,r-Math.cos(g)*a),t.closePath();break;case"rectRounded":h=a-(m=.516*a),d=Math.cos(g+C)*h,u=Math.sin(g+C)*h,t.arc(o-d,r-u,m,g-_,g-w),t.arc(o+u,r-d,m,g-w,g),t.arc(o+d,r+u,m,g,g+w),t.arc(o-u,r+d,m,g+w,g+_),t.closePath();break;case"rect":if(!l){h=Math.SQRT1_2*a,t.rect(o-h,r-h,2*h,2*h);break}g+=C;case"rectRot":d=Math.cos(g)*a,u=Math.sin(g)*a,t.moveTo(o-d,r-u),t.lineTo(o+u,r-d),t.lineTo(o+d,r+u),t.lineTo(o-u,r+d),t.closePath();break;case"crossRot":g+=C;case"cross":d=Math.cos(g)*a,u=Math.sin(g)*a,t.moveTo(o-d,r-u),t.lineTo(o+d,r+u),t.moveTo(o+u,r-d),t.lineTo(o-u,r+d);break;case"star":d=Math.cos(g)*a,u=Math.sin(g)*a,t.moveTo(o-d,r-u),t.lineTo(o+d,r+u),t.moveTo(o+u,r-d),t.lineTo(o-u,r+d),g+=C,d=Math.cos(g)*a,u=Math.sin(g)*a,t.moveTo(o-d,r-u),t.lineTo(o+d,r+u),t.moveTo(o+u,r-d),t.lineTo(o-u,r+d);break;case"line":d=Math.cos(g)*a,u=Math.sin(g)*a,t.moveTo(o-d,r-u),t.lineTo(o+d,r+u);break;case"dash":t.moveTo(o,r),t.lineTo(o+Math.cos(g)*a,r+Math.sin(g)*a)}t.fill(),t.stroke()}},_isPointInArea:function(t,i){var a=1e-6;return t.x>i.left-a&&t.x<i.right+a&&t.y>i.top-a&&t.y<i.bottom+a},clipArea:function(t,i){t.save(),t.beginPath(),t.rect(i.left,i.top,i.right-i.left,i.bottom-i.top),t.clip()},unclipArea:function(t){t.restore()},lineTo:function(t,i,a,o){var r=a.steppedLine;if(r){if("middle"===r){var l=(i.x+a.x)/2;t.lineTo(l,o?a.y:i.y),t.lineTo(l,o?i.y:a.y)}else"after"===r&&!o||"after"!==r&&o?t.lineTo(i.x,a.y):t.lineTo(a.x,i.y);t.lineTo(a.x,a.y)}else a.tension?t.bezierCurveTo(o?i.controlPointPreviousX:i.controlPointNextX,o?i.controlPointPreviousY:i.controlPointNextY,o?a.controlPointNextX:a.controlPointPreviousX,o?a.controlPointNextY:a.controlPointPreviousY,a.x,a.y):t.lineTo(a.x,a.y)}},I=k;p.clear=k.clear,p.drawRoundedRectangle=function(t){t.beginPath(),k.roundedRect.apply(k,arguments)};var A={_set:function(t,i){return p.merge(this[t]||(this[t]={}),i)}};A._set("global",{defaultColor:"rgba(0,0,0,0.1)",defaultFontColor:"#666",defaultFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",defaultFontSize:12,defaultFontStyle:"normal",defaultLineHeight:1.2,showLines:!0});var S=A,T=p.valueOrDefault;function toFontString(t){return!t||p.isNullOrUndef(t.size)||p.isNullOrUndef(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}var P={toLineHeight:function(t,i){var a=(""+t).match(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/);if(!a||"normal"===a[1])return 1.2*i;switch(t=+a[2],a[3]){case"px":return t;case"%":t/=100}return i*t},toPadding:function(t){var i,a,o,r;return p.isObject(t)?(i=+t.top||0,a=+t.right||0,o=+t.bottom||0,r=+t.left||0):i=a=o=r=+t||0,{top:i,right:a,bottom:o,left:r,height:i+o,width:r+a}},_parseFont:function(t){var i=S.global,a=T(t.fontSize,i.defaultFontSize),o={family:T(t.fontFamily,i.defaultFontFamily),lineHeight:p.options.toLineHeight(T(t.lineHeight,i.defaultLineHeight),a),size:a,style:T(t.fontStyle,i.defaultFontStyle),weight:null,string:""};return o.string=toFontString(o),o},resolve:function(t,i,a,o){var r,l,c,d=!0;for(r=0,l=t.length;r<l;++r)if(void 0!==(c=t[r])&&(void 0!==i&&"function"==typeof c&&(c=c(i),d=!1),void 0!==a&&p.isArray(c)&&(c=c[a],d=!1),void 0!==c))return o&&!d&&(o.cacheable=!1),c}},D={_factorize:function(t){var i,a=[],o=Math.sqrt(t);for(i=1;i<o;i++)t%i==0&&(a.push(i),a.push(t/i));return o===(0|o)&&a.push(o),a.sort((function(t,i){return t-i})).pop(),a},log10:Math.log10||function(t){var i=Math.log(t)*Math.LOG10E,a=Math.round(i);return t===Math.pow(10,a)?a:i}},O=D;p.log10=D.log10;var getRtlAdapter=function(t,i){return{x:function(a){return t+t+i-a},setWidth:function(t){i=t},textAlign:function(t){return"center"===t?t:"right"===t?"left":"right"},xPlus:function(t,i){return t-i},leftForLtr:function(t,i){return t-i}}},getLtrAdapter=function(){return{x:function(t){return t},setWidth:function(t){},textAlign:function(t){return t},xPlus:function(t,i){return t+i},leftForLtr:function(t,i){return t}}},V=p,z=b,B=I,L=P,N=O,R={getRtlAdapter:function(t,i,a){return t?getRtlAdapter(i,a):getLtrAdapter()},overrideTextDirection:function(t,i){var a,o;"ltr"!==i&&"rtl"!==i||(o=[(a=t.canvas.style).getPropertyValue("direction"),a.getPropertyPriority("direction")],a.setProperty("direction",i,"important"),t.prevTextDirection=o)},restoreTextDirection:function(t){var i=t.prevTextDirection;void 0!==i&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",i[0],i[1]))}};function interpolate(t,i,a,o){var r,l,c,d,u,m,g,p,v,b=Object.keys(a);for(r=0,l=b.length;r<l;++r)if(m=a[c=b[r]],i.hasOwnProperty(c)||(i[c]=m),(d=i[c])!==m&&"_"!==c[0]){if(t.hasOwnProperty(c)||(t[c]=d),(g=typeof m)==typeof(u=t[c]))if("string"===g){if((p=h(u)).valid&&(v=h(m)).valid){i[c]=v.mix(p,o).rgbString();continue}}else if(V.isFinite(u)&&V.isFinite(m)){i[c]=u+(m-u)*o;continue}i[c]=m}}V.easing=z,V.canvas=B,V.options=L,V.math=N,V.rtl=R;var Element=function(t){V.extend(this,t),this.initialize.apply(this,arguments)};V.extend(Element.prototype,{_type:void 0,initialize:function(){this.hidden=!1},pivot:function(){var t=this;return t._view||(t._view=V.extend({},t._model)),t._start={},t},transition:function(t){var i=this,a=i._model,o=i._start,r=i._view;return a&&1!==t?(r||(r=i._view={}),o||(o=i._start={}),interpolate(o,r,a,t),i):(i._view=V.extend({},a),i._start=null,i)},tooltipPosition:function(){return{x:this._model.x,y:this._model.y}},hasValue:function(){return V.isNumber(this._model.x)&&V.isNumber(this._model.y)}}),Element.extend=V.inherits;var E=Element,j=E.extend({chart:null,currentStep:0,numSteps:60,easing:"",render:null,onAnimationProgress:null,onAnimationComplete:null}),W=j;Object.defineProperty(j.prototype,"animationObject",{get:function(){return this}}),Object.defineProperty(j.prototype,"chartInstance",{get:function(){return this.chart},set:function(t){this.chart=t}}),S._set("global",{animation:{duration:1e3,easing:"easeOutQuart",onProgress:V.noop,onComplete:V.noop}});var H={animations:[],request:null,addAnimation:function(t,i,a,o){var r,l,c=this.animations;for(i.chart=t,i.startTime=Date.now(),i.duration=a,o||(t.animating=!0),r=0,l=c.length;r<l;++r)if(c[r].chart===t)return void(c[r]=i);c.push(i),1===c.length&&this.requestAnimationFrame()},cancelAnimation:function(t){var i=V.findIndex(this.animations,(function(i){return i.chart===t}));-1!==i&&(this.animations.splice(i,1),t.animating=!1)},requestAnimationFrame:function(){var t=this;null===t.request&&(t.request=V.requestAnimFrame.call(window,(function(){t.request=null,t.startDigest()})))},startDigest:function(){var t=this;t.advance(),t.animations.length>0&&t.requestAnimationFrame()},advance:function(){for(var t,i,a,o,r=this.animations,l=0;l<r.length;)i=(t=r[l]).chart,a=t.numSteps,o=Math.floor((Date.now()-t.startTime)/t.duration*a)+1,t.currentStep=Math.min(o,a),V.callback(t.render,[i,t],i),V.callback(t.onAnimationProgress,[t],i),t.currentStep>=a?(V.callback(t.onAnimationComplete,[t],i),i.animating=!1,r.splice(l,1)):++l}},$=V.options.resolve,U=["push","pop","shift","splice","unshift"];function listenArrayEvents(t,i){t._chartjs?t._chartjs.listeners.push(i):(Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[i]}}),U.forEach((function(i){var a="onData"+i.charAt(0).toUpperCase()+i.slice(1),o=t[i];Object.defineProperty(t,i,{configurable:!0,enumerable:!1,value:function(){var i=Array.prototype.slice.call(arguments),r=o.apply(this,i);return V.each(t._chartjs.listeners,(function(t){"function"==typeof t[a]&&t[a].apply(t,i)})),r}})})))}function unlistenArrayEvents(t,i){var a=t._chartjs;if(a){var o=a.listeners,r=o.indexOf(i);-1!==r&&o.splice(r,1),o.length>0||(U.forEach((function(i){delete t[i]})),delete t._chartjs)}}var DatasetController=function(t,i){this.initialize(t,i)};V.extend(DatasetController.prototype,{datasetElementType:null,dataElementType:null,_datasetElementOptions:["backgroundColor","borderCapStyle","borderColor","borderDash","borderDashOffset","borderJoinStyle","borderWidth"],_dataElementOptions:["backgroundColor","borderColor","borderWidth","pointStyle"],initialize:function(t,i){var a=this;a.chart=t,a.index=i,a.linkScales(),a.addElements(),a._type=a.getMeta().type},updateIndex:function(t){this.index=t},linkScales:function(){var t=this,i=t.getMeta(),a=t.chart,o=a.scales,r=t.getDataset(),l=a.options.scales;null!==i.xAxisID&&i.xAxisID in o&&!r.xAxisID||(i.xAxisID=r.xAxisID||l.xAxes[0].id),null!==i.yAxisID&&i.yAxisID in o&&!r.yAxisID||(i.yAxisID=r.yAxisID||l.yAxes[0].id)},getDataset:function(){return this.chart.data.datasets[this.index]},getMeta:function(){return this.chart.getDatasetMeta(this.index)},getScaleForId:function(t){return this.chart.scales[t]},_getValueScaleId:function(){return this.getMeta().yAxisID},_getIndexScaleId:function(){return this.getMeta().xAxisID},_getValueScale:function(){return this.getScaleForId(this._getValueScaleId())},_getIndexScale:function(){return this.getScaleForId(this._getIndexScaleId())},reset:function(){this._update(!0)},destroy:function(){this._data&&unlistenArrayEvents(this._data,this)},createMetaDataset:function(){var t=this,i=t.datasetElementType;return i&&new i({_chart:t.chart,_datasetIndex:t.index})},createMetaData:function(t){var i=this,a=i.dataElementType;return a&&new a({_chart:i.chart,_datasetIndex:i.index,_index:t})},addElements:function(){var t,i,a=this,o=a.getMeta(),r=a.getDataset().data||[],l=o.data;for(t=0,i=r.length;t<i;++t)l[t]=l[t]||a.createMetaData(t);o.dataset=o.dataset||a.createMetaDataset()},addElementAndReset:function(t){var i=this.createMetaData(t);this.getMeta().data.splice(t,0,i),this.updateElement(i,t,!0)},buildOrUpdateElements:function(){var t=this,i=t.getDataset(),a=i.data||(i.data=[]);t._data!==a&&(t._data&&unlistenArrayEvents(t._data,t),a&&Object.isExtensible(a)&&listenArrayEvents(a,t),t._data=a),t.resyncElements()},_configure:function(){var t=this;t._config=V.merge(Object.create(null),[t.chart.options.datasets[t._type],t.getDataset()],{merger:function(t,i,a){"_meta"!==t&&"data"!==t&&V._merger(t,i,a)}})},_update:function(t){var i=this;i._configure(),i._cachedDataOpts=null,i.update(t)},update:V.noop,transition:function(t){for(var i=this.getMeta(),a=i.data||[],o=a.length,r=0;r<o;++r)a[r].transition(t);i.dataset&&i.dataset.transition(t)},draw:function(){var t=this.getMeta(),i=t.data||[],a=i.length,o=0;for(t.dataset&&t.dataset.draw();o<a;++o)i[o].draw()},getStyle:function(t){var i,a=this,o=a.getMeta(),r=o.dataset;return a._configure(),r&&void 0===t?i=a._resolveDatasetElementOptions(r||{}):(t=t||0,i=a._resolveDataElementOptions(o.data[t]||{},t)),!1!==i.fill&&null!==i.fill||(i.backgroundColor=i.borderColor),i},_resolveDatasetElementOptions:function(t,i){var a,o,r,l,c=this,d=c.chart,u=c._config,h=t.custom||{},m=d.options.elements[c.datasetElementType.prototype._type]||{},g=c._datasetElementOptions,p={},v={chart:d,dataset:c.getDataset(),datasetIndex:c.index,hover:i};for(a=0,o=g.length;a<o;++a)r=g[a],l=i?"hover"+r.charAt(0).toUpperCase()+r.slice(1):r,p[r]=$([h[l],u[l],m[l]],v);return p},_resolveDataElementOptions:function(t,i){var a=this,o=t&&t.custom,r=a._cachedDataOpts;if(r&&!o)return r;var l,c,d,u,h=a.chart,m=a._config,g=h.options.elements[a.dataElementType.prototype._type]||{},p=a._dataElementOptions,v={},b={chart:h,dataIndex:i,dataset:a.getDataset(),datasetIndex:a.index},_={cacheable:!o};if(o=o||{},V.isArray(p))for(c=0,d=p.length;c<d;++c)v[u=p[c]]=$([o[u],m[u],g[u]],b,i,_);else for(c=0,d=(l=Object.keys(p)).length;c<d;++c)v[u=l[c]]=$([o[u],m[p[u]],m[u],g[u]],b,i,_);return _.cacheable&&(a._cachedDataOpts=Object.freeze(v)),v},removeHoverStyle:function(t){V.merge(t._model,t.$previousStyle||{}),delete t.$previousStyle},setHoverStyle:function(t){var i=this.chart.data.datasets[t._datasetIndex],a=t._index,o=t.custom||{},r=t._model,l=V.getHoverColor;t.$previousStyle={backgroundColor:r.backgroundColor,borderColor:r.borderColor,borderWidth:r.borderWidth},r.backgroundColor=$([o.hoverBackgroundColor,i.hoverBackgroundColor,l(r.backgroundColor)],void 0,a),r.borderColor=$([o.hoverBorderColor,i.hoverBorderColor,l(r.borderColor)],void 0,a),r.borderWidth=$([o.hoverBorderWidth,i.hoverBorderWidth,r.borderWidth],void 0,a)},_removeDatasetHoverStyle:function(){var t=this.getMeta().dataset;t&&this.removeHoverStyle(t)},_setDatasetHoverStyle:function(){var t,i,a,o,r,l,c=this.getMeta().dataset,d={};if(c){for(l=c._model,r=this._resolveDatasetElementOptions(c,!0),t=0,i=(o=Object.keys(r)).length;t<i;++t)d[a=o[t]]=l[a],l[a]=r[a];c.$previousStyle=d}},resyncElements:function(){var t=this,i=t.getMeta(),a=t.getDataset().data,o=i.data.length,r=a.length;r<o?i.data.splice(r,o-r):r>o&&t.insertElements(o,r-o)},insertElements:function(t,i){for(var a=0;a<i;++a)this.addElementAndReset(t+a)},onDataPush:function(){var t=arguments.length;this.insertElements(this.getDataset().data.length-t,t)},onDataPop:function(){this.getMeta().data.pop()},onDataShift:function(){this.getMeta().data.shift()},onDataSplice:function(t,i){this.getMeta().data.splice(t,i),this.insertElements(t,arguments.length-2)},onDataUnshift:function(){this.insertElements(0,arguments.length)}}),DatasetController.extend=V.inherits;var q=DatasetController,K=2*Math.PI;function clipArc(t,i){var a=i.startAngle,o=i.endAngle,r=i.pixelMargin,l=r/i.outerRadius,c=i.x,d=i.y;t.beginPath(),t.arc(c,d,i.outerRadius,a-l,o+l),i.innerRadius>r?(l=r/i.innerRadius,t.arc(c,d,i.innerRadius-r,o+l,a-l,!0)):t.arc(c,d,r,o+Math.PI/2,a-Math.PI/2),t.closePath(),t.clip()}function drawFullCircleBorders(t,i,a,o){var r,l=a.endAngle;for(o&&(a.endAngle=a.startAngle+K,clipArc(t,a),a.endAngle=l,a.endAngle===a.startAngle&&a.fullCircles&&(a.endAngle+=K,a.fullCircles--)),t.beginPath(),t.arc(a.x,a.y,a.innerRadius,a.startAngle+K,a.startAngle,!0),r=0;r<a.fullCircles;++r)t.stroke();for(t.beginPath(),t.arc(a.x,a.y,i.outerRadius,a.startAngle,a.startAngle+K),r=0;r<a.fullCircles;++r)t.stroke()}function drawBorder(t,i,a){var o="inner"===i.borderAlign;o?(t.lineWidth=2*i.borderWidth,t.lineJoin="round"):(t.lineWidth=i.borderWidth,t.lineJoin="bevel"),a.fullCircles&&drawFullCircleBorders(t,i,a,o),o&&clipArc(t,a),t.beginPath(),t.arc(a.x,a.y,i.outerRadius,a.startAngle,a.endAngle),t.arc(a.x,a.y,a.innerRadius,a.endAngle,a.startAngle,!0),t.closePath(),t.stroke()}S._set("global",{elements:{arc:{backgroundColor:S.global.defaultColor,borderColor:"#fff",borderWidth:2,borderAlign:"center"}}});var Y=E.extend({_type:"arc",inLabelRange:function(t){var i=this._view;return!!i&&Math.pow(t-i.x,2)<Math.pow(i.radius+i.hoverRadius,2)},inRange:function(t,i){var a=this._view;if(a){for(var o=V.getAngleFromPoint(a,{x:t,y:i}),r=o.angle,l=o.distance,c=a.startAngle,d=a.endAngle;d<c;)d+=K;for(;r>d;)r-=K;for(;r<c;)r+=K;var u=r>=c&&r<=d,h=l>=a.innerRadius&&l<=a.outerRadius;return u&&h}return!1},getCenterPoint:function(){var t=this._view,i=(t.startAngle+t.endAngle)/2,a=(t.innerRadius+t.outerRadius)/2;return{x:t.x+Math.cos(i)*a,y:t.y+Math.sin(i)*a}},getArea:function(){var t=this._view;return Math.PI*((t.endAngle-t.startAngle)/(2*Math.PI))*(Math.pow(t.outerRadius,2)-Math.pow(t.innerRadius,2))},tooltipPosition:function(){var t=this._view,i=t.startAngle+(t.endAngle-t.startAngle)/2,a=(t.outerRadius-t.innerRadius)/2+t.innerRadius;return{x:t.x+Math.cos(i)*a,y:t.y+Math.sin(i)*a}},draw:function(){var t,i=this._chart.ctx,a=this._view,o="inner"===a.borderAlign?.33:0,r={x:a.x,y:a.y,innerRadius:a.innerRadius,outerRadius:Math.max(a.outerRadius-o,0),pixelMargin:o,startAngle:a.startAngle,endAngle:a.endAngle,fullCircles:Math.floor(a.circumference/K)};if(i.save(),i.fillStyle=a.backgroundColor,i.strokeStyle=a.borderColor,r.fullCircles){for(r.endAngle=r.startAngle+K,i.beginPath(),i.arc(r.x,r.y,r.outerRadius,r.startAngle,r.endAngle),i.arc(r.x,r.y,r.innerRadius,r.endAngle,r.startAngle,!0),i.closePath(),t=0;t<r.fullCircles;++t)i.fill();r.endAngle=r.startAngle+a.circumference%K}i.beginPath(),i.arc(r.x,r.y,r.outerRadius,r.startAngle,r.endAngle),i.arc(r.x,r.y,r.innerRadius,r.endAngle,r.startAngle,!0),i.closePath(),i.fill(),a.borderWidth&&drawBorder(i,a,r),i.restore()}}),G=V.valueOrDefault,Z=S.global.defaultColor;S._set("global",{elements:{line:{tension:.4,backgroundColor:Z,borderWidth:3,borderColor:Z,borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",capBezierPoints:!0,fill:!0}}});var X=E.extend({_type:"line",draw:function(){var t,i,a,o=this,r=o._view,l=o._chart.ctx,c=r.spanGaps,d=o._children.slice(),u=S.global,h=u.elements.line,m=-1,g=o._loop;if(d.length){if(o._loop){for(t=0;t<d.length;++t)if(i=V.previousItem(d,t),!d[t]._view.skip&&i._view.skip){d=d.slice(t).concat(d.slice(0,t)),g=c;break}g&&d.push(d[0])}for(l.save(),l.lineCap=r.borderCapStyle||h.borderCapStyle,l.setLineDash&&l.setLineDash(r.borderDash||h.borderDash),l.lineDashOffset=G(r.borderDashOffset,h.borderDashOffset),l.lineJoin=r.borderJoinStyle||h.borderJoinStyle,l.lineWidth=G(r.borderWidth,h.borderWidth),l.strokeStyle=r.borderColor||u.defaultColor,l.beginPath(),(a=d[0]._view).skip||(l.moveTo(a.x,a.y),m=0),t=1;t<d.length;++t)a=d[t]._view,i=-1===m?V.previousItem(d,t):d[m],a.skip||(m!==t-1&&!c||-1===m?l.moveTo(a.x,a.y):V.canvas.lineTo(l,i._view,a),m=t);g&&l.closePath(),l.stroke(),l.restore()}}}),J=V.valueOrDefault,Q=S.global.defaultColor;function xRange(t){var i=this._view;return!!i&&Math.abs(t-i.x)<i.radius+i.hitRadius}function yRange(t){var i=this._view;return!!i&&Math.abs(t-i.y)<i.radius+i.hitRadius}S._set("global",{elements:{point:{radius:3,pointStyle:"circle",backgroundColor:Q,borderColor:Q,borderWidth:1,hitRadius:1,hoverRadius:4,hoverBorderWidth:1}}});var tt=E.extend({_type:"point",inRange:function(t,i){var a=this._view;return!!a&&Math.pow(t-a.x,2)+Math.pow(i-a.y,2)<Math.pow(a.hitRadius+a.radius,2)},inLabelRange:xRange,inXRange:xRange,inYRange:yRange,getCenterPoint:function(){var t=this._view;return{x:t.x,y:t.y}},getArea:function(){return Math.PI*Math.pow(this._view.radius,2)},tooltipPosition:function(){var t=this._view;return{x:t.x,y:t.y,padding:t.radius+t.borderWidth}},draw:function(t){var i=this._view,a=this._chart.ctx,o=i.pointStyle,r=i.rotation,l=i.radius,c=i.x,d=i.y,u=S.global,h=u.defaultColor;i.skip||(void 0===t||V.canvas._isPointInArea(i,t))&&(a.strokeStyle=i.borderColor||h,a.lineWidth=J(i.borderWidth,u.elements.point.borderWidth),a.fillStyle=i.backgroundColor||h,V.canvas.drawPoint(a,o,l,c,d,r))}}),et=S.global.defaultColor;function isVertical(t){return t&&void 0!==t.width}function getBarBounds(t){var i,a,o,r,l;return isVertical(t)?(l=t.width/2,i=t.x-l,a=t.x+l,o=Math.min(t.y,t.base),r=Math.max(t.y,t.base)):(l=t.height/2,i=Math.min(t.x,t.base),a=Math.max(t.x,t.base),o=t.y-l,r=t.y+l),{left:i,top:o,right:a,bottom:r}}function swap(t,i,a){return t===i?a:t===a?i:t}function parseBorderSkipped(t){var i=t.borderSkipped,a={};return i?(t.horizontal?t.base>t.x&&(i=swap(i,"left","right")):t.base<t.y&&(i=swap(i,"bottom","top")),a[i]=!0,a):a}function parseBorderWidth(t,i,a){var o,r,l,c,d=t.borderWidth,u=parseBorderSkipped(t);return V.isObject(d)?(o=+d.top||0,r=+d.right||0,l=+d.bottom||0,c=+d.left||0):o=r=l=c=+d||0,{t:u.top||o<0?0:o>a?a:o,r:u.right||r<0?0:r>i?i:r,b:u.bottom||l<0?0:l>a?a:l,l:u.left||c<0?0:c>i?i:c}}function boundingRects(t){var i=getBarBounds(t),a=i.right-i.left,o=i.bottom-i.top,r=parseBorderWidth(t,a/2,o/2);return{outer:{x:i.left,y:i.top,w:a,h:o},inner:{x:i.left+r.l,y:i.top+r.t,w:a-r.l-r.r,h:o-r.t-r.b}}}function inRange(t,i,a){var o=null===i,r=null===a,l=!(!t||o&&r)&&getBarBounds(t);return l&&(o||i>=l.left&&i<=l.right)&&(r||a>=l.top&&a<=l.bottom)}S._set("global",{elements:{rectangle:{backgroundColor:et,borderColor:et,borderSkipped:"bottom",borderWidth:0}}});var nt=E.extend({_type:"rectangle",draw:function(){var t=this._chart.ctx,i=this._view,a=boundingRects(i),o=a.outer,r=a.inner;t.fillStyle=i.backgroundColor,t.fillRect(o.x,o.y,o.w,o.h),o.w===r.w&&o.h===r.h||(t.save(),t.beginPath(),t.rect(o.x,o.y,o.w,o.h),t.clip(),t.fillStyle=i.borderColor,t.rect(r.x,r.y,r.w,r.h),t.fill("evenodd"),t.restore())},height:function(){var t=this._view;return t.base-t.y},inRange:function(t,i){return inRange(this._view,t,i)},inLabelRange:function(t,i){var a=this._view;return isVertical(a)?inRange(a,t,null):inRange(a,null,i)},inXRange:function(t){return inRange(this._view,t,null)},inYRange:function(t){return inRange(this._view,null,t)},getCenterPoint:function(){var t,i,a=this._view;return isVertical(a)?(t=a.x,i=(a.y+a.base)/2):(t=(a.x+a.base)/2,i=a.y),{x:t,y:i}},getArea:function(){var t=this._view;return isVertical(t)?t.width*Math.abs(t.y-t.base):t.height*Math.abs(t.x-t.base)},tooltipPosition:function(){var t=this._view;return{x:t.x,y:t.y}}}),it={},at=Y,ot=X,rt=tt,st=nt;it.Arc=at,it.Line=ot,it.Point=rt,it.Rectangle=st;var lt=V._deprecated,ct=V.valueOrDefault;function computeMinSampleSize(t,i){var a,o,r,l,c=t._length;for(r=1,l=i.length;r<l;++r)c=Math.min(c,Math.abs(i[r]-i[r-1]));for(r=0,l=t.getTicks().length;r<l;++r)o=t.getPixelForTick(r),c=r>0?Math.min(c,Math.abs(o-a)):c,a=o;return c}function computeFitCategoryTraits(t,i,a){var o,r,l=a.barThickness,c=i.stackCount,d=i.pixels[t],u=V.isNullOrUndef(l)?computeMinSampleSize(i.scale,i.pixels):-1;return V.isNullOrUndef(l)?(o=u*a.categoryPercentage,r=a.barPercentage):(o=l*c,r=1),{chunk:o/c,ratio:r,start:d-o/2}}function computeFlexCategoryTraits(t,i,a){var o,r=i.pixels,l=r[t],c=t>0?r[t-1]:null,d=t<r.length-1?r[t+1]:null,u=a.categoryPercentage;return null===c&&(c=l-(null===d?i.end-i.start:d-l)),null===d&&(d=l+l-c),o=l-(l-Math.min(c,d))/2*u,{chunk:Math.abs(d-c)/2*u/i.stackCount,ratio:a.barPercentage,start:o}}S._set("bar",{hover:{mode:"label"},scales:{xAxes:[{type:"category",offset:!0,gridLines:{offsetGridLines:!0}}],yAxes:[{type:"linear"}]}}),S._set("global",{datasets:{bar:{categoryPercentage:.8,barPercentage:.9}}});var dt=q.extend({dataElementType:it.Rectangle,_dataElementOptions:["backgroundColor","borderColor","borderSkipped","borderWidth","barPercentage","barThickness","categoryPercentage","maxBarThickness","minBarLength"],initialize:function(){var t,i,a=this;q.prototype.initialize.apply(a,arguments),(t=a.getMeta()).stack=a.getDataset().stack,t.bar=!0,i=a._getIndexScale().options,lt("bar chart",i.barPercentage,"scales.[x/y]Axes.barPercentage","dataset.barPercentage"),lt("bar chart",i.barThickness,"scales.[x/y]Axes.barThickness","dataset.barThickness"),lt("bar chart",i.categoryPercentage,"scales.[x/y]Axes.categoryPercentage","dataset.categoryPercentage"),lt("bar chart",a._getValueScale().options.minBarLength,"scales.[x/y]Axes.minBarLength","dataset.minBarLength"),lt("bar chart",i.maxBarThickness,"scales.[x/y]Axes.maxBarThickness","dataset.maxBarThickness")},update:function(t){var i,a,o=this,r=o.getMeta().data;for(o._ruler=o.getRuler(),i=0,a=r.length;i<a;++i)o.updateElement(r[i],i,t)},updateElement:function(t,i,a){var o=this,r=o.getMeta(),l=o.getDataset(),c=o._resolveDataElementOptions(t,i);t._xScale=o.getScaleForId(r.xAxisID),t._yScale=o.getScaleForId(r.yAxisID),t._datasetIndex=o.index,t._index=i,t._model={backgroundColor:c.backgroundColor,borderColor:c.borderColor,borderSkipped:c.borderSkipped,borderWidth:c.borderWidth,datasetLabel:l.label,label:o.chart.data.labels[i]},V.isArray(l.data[i])&&(t._model.borderSkipped=null),o._updateElementGeometry(t,i,a,c),t.pivot()},_updateElementGeometry:function(t,i,a,o){var r=this,l=t._model,c=r._getValueScale(),d=c.getBasePixel(),u=c.isHorizontal(),h=r._ruler||r.getRuler(),m=r.calculateBarValuePixels(r.index,i,o),g=r.calculateBarIndexPixels(r.index,i,h,o);l.horizontal=u,l.base=a?d:m.base,l.x=u?a?d:m.head:g.center,l.y=u?g.center:a?d:m.head,l.height=u?g.size:void 0,l.width=u?void 0:g.size},_getStacks:function(t){var i,a,o=this,r=o._getIndexScale(),l=r._getMatchingVisibleMetas(o._type),c=r.options.stacked,d=l.length,u=[];for(i=0;i<d&&(a=l[i],(!1===c||-1===u.indexOf(a.stack)||void 0===c&&void 0===a.stack)&&u.push(a.stack),a.index!==t);++i);return u},getStackCount:function(){return this._getStacks().length},getStackIndex:function(t,i){var a=this._getStacks(t),o=void 0!==i?a.indexOf(i):-1;return-1===o?a.length-1:o},getRuler:function(){var t,i,a=this,o=a._getIndexScale(),r=[];for(t=0,i=a.getMeta().data.length;t<i;++t)r.push(o.getPixelForValue(null,t,a.index));return{pixels:r,start:o._startPixel,end:o._endPixel,stackCount:a.getStackCount(),scale:o}},calculateBarValuePixels:function(t,i,a){var o,r,l,c,d,u,h,m=this,g=m.chart,p=m._getValueScale(),v=p.isHorizontal(),b=g.data.datasets,_=p._getMatchingVisibleMetas(m._type),y=p._parseValue(b[t].data[i]),x=a.minBarLength,w=p.options.stacked,C=m.getMeta().stack,M=void 0===y.start?0:y.max>=0&&y.min>=0?y.min:y.max,k=void 0===y.start?y.end:y.max>=0&&y.min>=0?y.max-y.min:y.min-y.max,I=_.length;if(w||void 0===w&&void 0!==C)for(o=0;o<I&&(r=_[o]).index!==t;++o)r.stack===C&&(l=void 0===(h=p._parseValue(b[r.index].data[i])).start?h.end:h.min>=0&&h.max>=0?h.max:h.min,(y.min<0&&l<0||y.max>=0&&l>0)&&(M+=l));return c=p.getPixelForValue(M),u=(d=p.getPixelForValue(M+k))-c,void 0!==x&&Math.abs(u)<x&&(u=x,d=k>=0&&!v||k<0&&v?c-x:c+x),{size:u,base:c,head:d,center:d+u/2}},calculateBarIndexPixels:function(t,i,a,o){var r=this,l="flex"===o.barThickness?computeFlexCategoryTraits(i,a,o):computeFitCategoryTraits(i,a,o),c=r.getStackIndex(t,r.getMeta().stack),d=l.start+l.chunk*c+l.chunk/2,u=Math.min(ct(o.maxBarThickness,1/0),l.chunk*l.ratio);return{base:d-u/2,head:d+u/2,center:d,size:u}},draw:function(){var t=this,i=t.chart,a=t._getValueScale(),o=t.getMeta().data,r=t.getDataset(),l=o.length,c=0;for(V.canvas.clipArea(i.ctx,i.chartArea);c<l;++c){var d=a._parseValue(r.data[c]);isNaN(d.min)||isNaN(d.max)||o[c].draw()}V.canvas.unclipArea(i.ctx)},_resolveDataElementOptions:function(){var t=this,i=V.extend({},q.prototype._resolveDataElementOptions.apply(t,arguments)),a=t._getIndexScale().options,o=t._getValueScale().options;return i.barPercentage=ct(a.barPercentage,i.barPercentage),i.barThickness=ct(a.barThickness,i.barThickness),i.categoryPercentage=ct(a.categoryPercentage,i.categoryPercentage),i.maxBarThickness=ct(a.maxBarThickness,i.maxBarThickness),i.minBarLength=ct(o.minBarLength,i.minBarLength),i}}),ut=V.valueOrDefault,ht=V.options.resolve;S._set("bubble",{hover:{mode:"single"},scales:{xAxes:[{type:"linear",position:"bottom",id:"x-axis-0"}],yAxes:[{type:"linear",position:"left",id:"y-axis-0"}]},tooltips:{callbacks:{title:function(){return""},label:function(t,i){var a=i.datasets[t.datasetIndex].label||"",o=i.datasets[t.datasetIndex].data[t.index];return a+": ("+t.xLabel+", "+t.yLabel+", "+o.r+")"}}}});var mt=q.extend({dataElementType:it.Point,_dataElementOptions:["backgroundColor","borderColor","borderWidth","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth","hoverRadius","hitRadius","pointStyle","rotation"],update:function(t){var i=this,a=i.getMeta().data;V.each(a,(function(a,o){i.updateElement(a,o,t)}))},updateElement:function(t,i,a){var o=this,r=o.getMeta(),l=t.custom||{},c=o.getScaleForId(r.xAxisID),d=o.getScaleForId(r.yAxisID),u=o._resolveDataElementOptions(t,i),h=o.getDataset().data[i],m=o.index,g=a?c.getPixelForDecimal(.5):c.getPixelForValue("object"==typeof h?h:NaN,i,m),p=a?d.getBasePixel():d.getPixelForValue(h,i,m);t._xScale=c,t._yScale=d,t._options=u,t._datasetIndex=m,t._index=i,t._model={backgroundColor:u.backgroundColor,borderColor:u.borderColor,borderWidth:u.borderWidth,hitRadius:u.hitRadius,pointStyle:u.pointStyle,rotation:u.rotation,radius:a?0:u.radius,skip:l.skip||isNaN(g)||isNaN(p),x:g,y:p},t.pivot()},setHoverStyle:function(t){var i=t._model,a=t._options,o=V.getHoverColor;t.$previousStyle={backgroundColor:i.backgroundColor,borderColor:i.borderColor,borderWidth:i.borderWidth,radius:i.radius},i.backgroundColor=ut(a.hoverBackgroundColor,o(a.backgroundColor)),i.borderColor=ut(a.hoverBorderColor,o(a.borderColor)),i.borderWidth=ut(a.hoverBorderWidth,a.borderWidth),i.radius=a.radius+a.hoverRadius},_resolveDataElementOptions:function(t,i){var a=this,o=a.chart,r=a.getDataset(),l=t.custom||{},c=r.data[i]||{},d=q.prototype._resolveDataElementOptions.apply(a,arguments),u={chart:o,dataIndex:i,dataset:r,datasetIndex:a.index};return a._cachedDataOpts===d&&(d=V.extend({},d)),d.radius=ht([l.radius,c.r,a._config.radius,o.options.elements.point.radius],u,i),d}}),gt=V.valueOrDefault,ft=Math.PI,pt=2*ft,vt=ft/2;S._set("doughnut",{animation:{animateRotate:!0,animateScale:!1},hover:{mode:"single"},legendCallback:function(t){var i,a,o,r=document.createElement("ul"),l=t.data,c=l.datasets,d=l.labels;if(r.setAttribute("class",t.id+"-legend"),c.length)for(i=0,a=c[0].data.length;i<a;++i)(o=r.appendChild(document.createElement("li"))).appendChild(document.createElement("span")).style.backgroundColor=c[0].backgroundColor[i],d[i]&&o.appendChild(document.createTextNode(d[i]));return r.outerHTML},legend:{labels:{generateLabels:function(t){var i=t.data;return i.labels.length&&i.datasets.length?i.labels.map((function(a,o){var r=t.getDatasetMeta(0),l=r.controller.getStyle(o);return{text:a,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,lineWidth:l.borderWidth,hidden:isNaN(i.datasets[0].data[o])||r.data[o].hidden,index:o}})):[]}},onClick:function(t,i){var a,o,r,l=i.index,c=this.chart;for(a=0,o=(c.data.datasets||[]).length;a<o;++a)(r=c.getDatasetMeta(a)).data[l]&&(r.data[l].hidden=!r.data[l].hidden);c.update()}},cutoutPercentage:50,rotation:-vt,circumference:pt,tooltips:{callbacks:{title:function(){return""},label:function(t,i){var a=i.labels[t.index],o=": "+i.datasets[t.datasetIndex].data[t.index];return V.isArray(a)?(a=a.slice())[0]+=o:a+=o,a}}}});var bt=q.extend({dataElementType:it.Arc,linkScales:V.noop,_dataElementOptions:["backgroundColor","borderColor","borderWidth","borderAlign","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth"],getRingIndex:function(t){for(var i=0,a=0;a<t;++a)this.chart.isDatasetVisible(a)&&++i;return i},update:function(t){var i,a,o,r,l=this,c=l.chart,d=c.chartArea,u=c.options,h=1,m=1,g=0,p=0,v=l.getMeta(),b=v.data,_=u.cutoutPercentage/100||0,y=u.circumference,x=l._getRingWeight(l.index);if(y<pt){var w=u.rotation%pt,C=(w+=w>=ft?-pt:w<-ft?pt:0)+y,M=Math.cos(w),k=Math.sin(w),I=Math.cos(C),A=Math.sin(C),S=w<=0&&C>=0||C>=pt,T=w<=vt&&C>=vt||C>=pt+vt,P=w<=-vt&&C>=-vt||C>=ft+vt,D=w===-ft||C>=ft?-1:Math.min(M,M*_,I,I*_),O=P?-1:Math.min(k,k*_,A,A*_),V=S?1:Math.max(M,M*_,I,I*_),z=T?1:Math.max(k,k*_,A,A*_);h=(V-D)/2,m=(z-O)/2,g=-(V+D)/2,p=-(z+O)/2}for(o=0,r=b.length;o<r;++o)b[o]._options=l._resolveDataElementOptions(b[o],o);for(c.borderWidth=l.getMaxBorderWidth(),i=(d.right-d.left-c.borderWidth)/h,a=(d.bottom-d.top-c.borderWidth)/m,c.outerRadius=Math.max(Math.min(i,a)/2,0),c.innerRadius=Math.max(c.outerRadius*_,0),c.radiusLength=(c.outerRadius-c.innerRadius)/(l._getVisibleDatasetWeightTotal()||1),c.offsetX=g*c.outerRadius,c.offsetY=p*c.outerRadius,v.total=l.calculateTotal(),l.outerRadius=c.outerRadius-c.radiusLength*l._getRingWeightOffset(l.index),l.innerRadius=Math.max(l.outerRadius-c.radiusLength*x,0),o=0,r=b.length;o<r;++o)l.updateElement(b[o],o,t)},updateElement:function(t,i,a){var o=this,r=o.chart,l=r.chartArea,c=r.options,d=c.animation,u=(l.left+l.right)/2,h=(l.top+l.bottom)/2,m=c.rotation,g=c.rotation,p=o.getDataset(),v=a&&d.animateRotate||t.hidden?0:o.calculateCircumference(p.data[i])*(c.circumference/pt),b=a&&d.animateScale?0:o.innerRadius,_=a&&d.animateScale?0:o.outerRadius,y=t._options||{};V.extend(t,{_datasetIndex:o.index,_index:i,_model:{backgroundColor:y.backgroundColor,borderColor:y.borderColor,borderWidth:y.borderWidth,borderAlign:y.borderAlign,x:u+r.offsetX,y:h+r.offsetY,startAngle:m,endAngle:g,circumference:v,outerRadius:_,innerRadius:b,label:V.valueAtIndexOrDefault(p.label,i,r.data.labels[i])}});var x=t._model;a&&d.animateRotate||(x.startAngle=0===i?c.rotation:o.getMeta().data[i-1]._model.endAngle,x.endAngle=x.startAngle+x.circumference),t.pivot()},calculateTotal:function(){var t,i=this.getDataset(),a=this.getMeta(),o=0;return V.each(a.data,(function(a,r){t=i.data[r],isNaN(t)||a.hidden||(o+=Math.abs(t))})),o},calculateCircumference:function(t){var i=this.getMeta().total;return i>0&&!isNaN(t)?pt*(Math.abs(t)/i):0},getMaxBorderWidth:function(t){var i,a,o,r,l,c,d,u,h=this,m=0,g=h.chart;if(!t)for(i=0,a=g.data.datasets.length;i<a;++i)if(g.isDatasetVisible(i)){t=(o=g.getDatasetMeta(i)).data,i!==h.index&&(l=o.controller);break}if(!t)return 0;for(i=0,a=t.length;i<a;++i)r=t[i],l?(l._configure(),c=l._resolveDataElementOptions(r,i)):c=r._options,"inner"!==c.borderAlign&&(d=c.borderWidth,m=(u=c.hoverBorderWidth)>(m=d>m?d:m)?u:m);return m},setHoverStyle:function(t){var i=t._model,a=t._options,o=V.getHoverColor;t.$previousStyle={backgroundColor:i.backgroundColor,borderColor:i.borderColor,borderWidth:i.borderWidth},i.backgroundColor=gt(a.hoverBackgroundColor,o(a.backgroundColor)),i.borderColor=gt(a.hoverBorderColor,o(a.borderColor)),i.borderWidth=gt(a.hoverBorderWidth,a.borderWidth)},_getRingWeightOffset:function(t){for(var i=0,a=0;a<t;++a)this.chart.isDatasetVisible(a)&&(i+=this._getRingWeight(a));return i},_getRingWeight:function(t){return Math.max(gt(this.chart.data.datasets[t].weight,1),0)},_getVisibleDatasetWeightTotal:function(){return this._getRingWeightOffset(this.chart.data.datasets.length)}});S._set("horizontalBar",{hover:{mode:"index",axis:"y"},scales:{xAxes:[{type:"linear",position:"bottom"}],yAxes:[{type:"category",position:"left",offset:!0,gridLines:{offsetGridLines:!0}}]},elements:{rectangle:{borderSkipped:"left"}},tooltips:{mode:"index",axis:"y"}}),S._set("global",{datasets:{horizontalBar:{categoryPercentage:.8,barPercentage:.9}}});var _t=dt.extend({_getValueScaleId:function(){return this.getMeta().xAxisID},_getIndexScaleId:function(){return this.getMeta().yAxisID}}),yt=V.valueOrDefault,xt=V.options.resolve,wt=V.canvas._isPointInArea;function scaleClip(t,i){var a=t&&t.options.ticks||{},o=a.reverse,r=void 0===a.min?i:0,l=void 0===a.max?i:0;return{start:o?l:r,end:o?r:l}}function defaultClip(t,i,a){var o=a/2,r=scaleClip(t,o),l=scaleClip(i,o);return{top:l.end,right:r.end,bottom:l.start,left:r.start}}function toClip(t){var i,a,o,r;return V.isObject(t)?(i=t.top,a=t.right,o=t.bottom,r=t.left):i=a=o=r=t,{top:i,right:a,bottom:o,left:r}}S._set("line",{showLines:!0,spanGaps:!1,hover:{mode:"label"},scales:{xAxes:[{type:"category",id:"x-axis-0"}],yAxes:[{type:"linear",id:"y-axis-0"}]}});var Ct=q.extend({datasetElementType:it.Line,dataElementType:it.Point,_datasetElementOptions:["backgroundColor","borderCapStyle","borderColor","borderDash","borderDashOffset","borderJoinStyle","borderWidth","cubicInterpolationMode","fill"],_dataElementOptions:{backgroundColor:"pointBackgroundColor",borderColor:"pointBorderColor",borderWidth:"pointBorderWidth",hitRadius:"pointHitRadius",hoverBackgroundColor:"pointHoverBackgroundColor",hoverBorderColor:"pointHoverBorderColor",hoverBorderWidth:"pointHoverBorderWidth",hoverRadius:"pointHoverRadius",pointStyle:"pointStyle",radius:"pointRadius",rotation:"pointRotation"},update:function(t){var i,a,o=this,r=o.getMeta(),l=r.dataset,c=r.data||[],d=o.chart.options,u=o._config,h=o._showLine=yt(u.showLine,d.showLines);for(o._xScale=o.getScaleForId(r.xAxisID),o._yScale=o.getScaleForId(r.yAxisID),h&&(void 0!==u.tension&&void 0===u.lineTension&&(u.lineTension=u.tension),l._scale=o._yScale,l._datasetIndex=o.index,l._children=c,l._model=o._resolveDatasetElementOptions(l),l.pivot()),i=0,a=c.length;i<a;++i)o.updateElement(c[i],i,t);for(h&&0!==l._model.tension&&o.updateBezierControlPoints(),i=0,a=c.length;i<a;++i)c[i].pivot()},updateElement:function(t,i,a){var o,r,l=this,c=l.getMeta(),d=t.custom||{},u=l.getDataset(),h=l.index,m=u.data[i],g=l._xScale,p=l._yScale,v=c.dataset._model,b=l._resolveDataElementOptions(t,i);o=g.getPixelForValue("object"==typeof m?m:NaN,i,h),r=a?p.getBasePixel():l.calculatePointY(m,i,h),t._xScale=g,t._yScale=p,t._options=b,t._datasetIndex=h,t._index=i,t._model={x:o,y:r,skip:d.skip||isNaN(o)||isNaN(r),radius:b.radius,pointStyle:b.pointStyle,rotation:b.rotation,backgroundColor:b.backgroundColor,borderColor:b.borderColor,borderWidth:b.borderWidth,tension:yt(d.tension,v?v.tension:0),steppedLine:!!v&&v.steppedLine,hitRadius:b.hitRadius}},_resolveDatasetElementOptions:function(t){var i=this,a=i._config,o=t.custom||{},r=i.chart.options,l=r.elements.line,c=q.prototype._resolveDatasetElementOptions.apply(i,arguments);return c.spanGaps=yt(a.spanGaps,r.spanGaps),c.tension=yt(a.lineTension,l.tension),c.steppedLine=xt([o.steppedLine,a.steppedLine,l.stepped]),c.clip=toClip(yt(a.clip,defaultClip(i._xScale,i._yScale,c.borderWidth))),c},calculatePointY:function(t,i,a){var o,r,l,c,d,u,h,m=this,g=m.chart,p=m._yScale,v=0,b=0;if(p.options.stacked){for(d=+p.getRightValue(t),h=(u=g._getSortedVisibleDatasetMetas()).length,o=0;o<h&&(l=u[o]).index!==a;++o)r=g.data.datasets[l.index],"line"===l.type&&l.yAxisID===p.id&&((c=+p.getRightValue(r.data[i]))<0?b+=c||0:v+=c||0);return d<0?p.getPixelForValue(b+d):p.getPixelForValue(v+d)}return p.getPixelForValue(t)},updateBezierControlPoints:function(){var t,i,a,o,r=this,l=r.chart,c=r.getMeta(),d=c.dataset._model,u=l.chartArea,h=c.data||[];function capControlPoint(t,i,a){return Math.max(Math.min(t,a),i)}if(d.spanGaps&&(h=h.filter((function(t){return!t._model.skip}))),"monotone"===d.cubicInterpolationMode)V.splineCurveMonotone(h);else for(t=0,i=h.length;t<i;++t)a=h[t]._model,o=V.splineCurve(V.previousItem(h,t)._model,a,V.nextItem(h,t)._model,d.tension),a.controlPointPreviousX=o.previous.x,a.controlPointPreviousY=o.previous.y,a.controlPointNextX=o.next.x,a.controlPointNextY=o.next.y;if(l.options.elements.line.capBezierPoints)for(t=0,i=h.length;t<i;++t)a=h[t]._model,wt(a,u)&&(t>0&&wt(h[t-1]._model,u)&&(a.controlPointPreviousX=capControlPoint(a.controlPointPreviousX,u.left,u.right),a.controlPointPreviousY=capControlPoint(a.controlPointPreviousY,u.top,u.bottom)),t<h.length-1&&wt(h[t+1]._model,u)&&(a.controlPointNextX=capControlPoint(a.controlPointNextX,u.left,u.right),a.controlPointNextY=capControlPoint(a.controlPointNextY,u.top,u.bottom)))},draw:function(){var t,i=this,a=i.chart,o=i.getMeta(),r=o.data||[],l=a.chartArea,c=a.canvas,d=0,u=r.length;for(i._showLine&&(t=o.dataset._model.clip,V.canvas.clipArea(a.ctx,{left:!1===t.left?0:l.left-t.left,right:!1===t.right?c.width:l.right+t.right,top:!1===t.top?0:l.top-t.top,bottom:!1===t.bottom?c.height:l.bottom+t.bottom}),o.dataset.draw(),V.canvas.unclipArea(a.ctx));d<u;++d)r[d].draw(l)},setHoverStyle:function(t){var i=t._model,a=t._options,o=V.getHoverColor;t.$previousStyle={backgroundColor:i.backgroundColor,borderColor:i.borderColor,borderWidth:i.borderWidth,radius:i.radius},i.backgroundColor=yt(a.hoverBackgroundColor,o(a.backgroundColor)),i.borderColor=yt(a.hoverBorderColor,o(a.borderColor)),i.borderWidth=yt(a.hoverBorderWidth,a.borderWidth),i.radius=yt(a.hoverRadius,a.radius)}}),Mt=V.options.resolve;S._set("polarArea",{scale:{type:"radialLinear",angleLines:{display:!1},gridLines:{circular:!0},pointLabels:{display:!1},ticks:{beginAtZero:!0}},animation:{animateRotate:!0,animateScale:!0},startAngle:-.5*Math.PI,legendCallback:function(t){var i,a,o,r=document.createElement("ul"),l=t.data,c=l.datasets,d=l.labels;if(r.setAttribute("class",t.id+"-legend"),c.length)for(i=0,a=c[0].data.length;i<a;++i)(o=r.appendChild(document.createElement("li"))).appendChild(document.createElement("span")).style.backgroundColor=c[0].backgroundColor[i],d[i]&&o.appendChild(document.createTextNode(d[i]));return r.outerHTML},legend:{labels:{generateLabels:function(t){var i=t.data;return i.labels.length&&i.datasets.length?i.labels.map((function(a,o){var r=t.getDatasetMeta(0),l=r.controller.getStyle(o);return{text:a,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,lineWidth:l.borderWidth,hidden:isNaN(i.datasets[0].data[o])||r.data[o].hidden,index:o}})):[]}},onClick:function(t,i){var a,o,r,l=i.index,c=this.chart;for(a=0,o=(c.data.datasets||[]).length;a<o;++a)(r=c.getDatasetMeta(a)).data[l].hidden=!r.data[l].hidden;c.update()}},tooltips:{callbacks:{title:function(){return""},label:function(t,i){return i.labels[t.index]+": "+t.yLabel}}}});var kt=q.extend({dataElementType:it.Arc,linkScales:V.noop,_dataElementOptions:["backgroundColor","borderColor","borderWidth","borderAlign","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth"],_getIndexScaleId:function(){return this.chart.scale.id},_getValueScaleId:function(){return this.chart.scale.id},update:function(t){var i,a,o,r=this,l=r.getDataset(),c=r.getMeta(),d=r.chart.options.startAngle||0,u=r._starts=[],h=r._angles=[],m=c.data;for(r._updateRadius(),c.count=r.countVisibleElements(),i=0,a=l.data.length;i<a;i++)u[i]=d,o=r._computeAngle(i),h[i]=o,d+=o;for(i=0,a=m.length;i<a;++i)m[i]._options=r._resolveDataElementOptions(m[i],i),r.updateElement(m[i],i,t)},_updateRadius:function(){var t=this,i=t.chart,a=i.chartArea,o=i.options,r=Math.min(a.right-a.left,a.bottom-a.top);i.outerRadius=Math.max(r/2,0),i.innerRadius=Math.max(o.cutoutPercentage?i.outerRadius/100*o.cutoutPercentage:1,0),i.radiusLength=(i.outerRadius-i.innerRadius)/i.getVisibleDatasetCount(),t.outerRadius=i.outerRadius-i.radiusLength*t.index,t.innerRadius=t.outerRadius-i.radiusLength},updateElement:function(t,i,a){var o=this,r=o.chart,l=o.getDataset(),c=r.options,d=c.animation,u=r.scale,h=r.data.labels,m=u.xCenter,g=u.yCenter,p=c.startAngle,v=t.hidden?0:u.getDistanceFromCenterForValue(l.data[i]),b=o._starts[i],_=b+(t.hidden?0:o._angles[i]),y=d.animateScale?0:u.getDistanceFromCenterForValue(l.data[i]),x=t._options||{};V.extend(t,{_datasetIndex:o.index,_index:i,_scale:u,_model:{backgroundColor:x.backgroundColor,borderColor:x.borderColor,borderWidth:x.borderWidth,borderAlign:x.borderAlign,x:m,y:g,innerRadius:0,outerRadius:a?y:v,startAngle:a&&d.animateRotate?p:b,endAngle:a&&d.animateRotate?p:_,label:V.valueAtIndexOrDefault(h,i,h[i])}}),t.pivot()},countVisibleElements:function(){var t=this.getDataset(),i=this.getMeta(),a=0;return V.each(i.data,(function(i,o){isNaN(t.data[o])||i.hidden||a++})),a},setHoverStyle:function(t){var i=t._model,a=t._options,o=V.getHoverColor,r=V.valueOrDefault;t.$previousStyle={backgroundColor:i.backgroundColor,borderColor:i.borderColor,borderWidth:i.borderWidth},i.backgroundColor=r(a.hoverBackgroundColor,o(a.backgroundColor)),i.borderColor=r(a.hoverBorderColor,o(a.borderColor)),i.borderWidth=r(a.hoverBorderWidth,a.borderWidth)},_computeAngle:function(t){var i=this,a=this.getMeta().count,o=i.getDataset(),r=i.getMeta();if(isNaN(o.data[t])||r.data[t].hidden)return 0;var l={chart:i.chart,dataIndex:t,dataset:o,datasetIndex:i.index};return Mt([i.chart.options.elements.arc.angle,2*Math.PI/a],l,t)}});S._set("pie",V.clone(S.doughnut)),S._set("pie",{cutoutPercentage:0});var It=bt,At=V.valueOrDefault;S._set("radar",{spanGaps:!1,scale:{type:"radialLinear"},elements:{line:{fill:"start",tension:0}}});var St=q.extend({datasetElementType:it.Line,dataElementType:it.Point,linkScales:V.noop,_datasetElementOptions:["backgroundColor","borderWidth","borderColor","borderCapStyle","borderDash","borderDashOffset","borderJoinStyle","fill"],_dataElementOptions:{backgroundColor:"pointBackgroundColor",borderColor:"pointBorderColor",borderWidth:"pointBorderWidth",hitRadius:"pointHitRadius",hoverBackgroundColor:"pointHoverBackgroundColor",hoverBorderColor:"pointHoverBorderColor",hoverBorderWidth:"pointHoverBorderWidth",hoverRadius:"pointHoverRadius",pointStyle:"pointStyle",radius:"pointRadius",rotation:"pointRotation"},_getIndexScaleId:function(){return this.chart.scale.id},_getValueScaleId:function(){return this.chart.scale.id},update:function(t){var i,a,o=this,r=o.getMeta(),l=r.dataset,c=r.data||[],d=o.chart.scale,u=o._config;for(void 0!==u.tension&&void 0===u.lineTension&&(u.lineTension=u.tension),l._scale=d,l._datasetIndex=o.index,l._children=c,l._loop=!0,l._model=o._resolveDatasetElementOptions(l),l.pivot(),i=0,a=c.length;i<a;++i)o.updateElement(c[i],i,t);for(o.updateBezierControlPoints(),i=0,a=c.length;i<a;++i)c[i].pivot()},updateElement:function(t,i,a){var o=this,r=t.custom||{},l=o.getDataset(),c=o.chart.scale,d=c.getPointPositionForValue(i,l.data[i]),u=o._resolveDataElementOptions(t,i),h=o.getMeta().dataset._model,m=a?c.xCenter:d.x,g=a?c.yCenter:d.y;t._scale=c,t._options=u,t._datasetIndex=o.index,t._index=i,t._model={x:m,y:g,skip:r.skip||isNaN(m)||isNaN(g),radius:u.radius,pointStyle:u.pointStyle,rotation:u.rotation,backgroundColor:u.backgroundColor,borderColor:u.borderColor,borderWidth:u.borderWidth,tension:At(r.tension,h?h.tension:0),hitRadius:u.hitRadius}},_resolveDatasetElementOptions:function(){var t=this,i=t._config,a=t.chart.options,o=q.prototype._resolveDatasetElementOptions.apply(t,arguments);return o.spanGaps=At(i.spanGaps,a.spanGaps),o.tension=At(i.lineTension,a.elements.line.tension),o},updateBezierControlPoints:function(){var t,i,a,o,r=this,l=r.getMeta(),c=r.chart.chartArea,d=l.data||[];function capControlPoint(t,i,a){return Math.max(Math.min(t,a),i)}for(l.dataset._model.spanGaps&&(d=d.filter((function(t){return!t._model.skip}))),t=0,i=d.length;t<i;++t)a=d[t]._model,o=V.splineCurve(V.previousItem(d,t,!0)._model,a,V.nextItem(d,t,!0)._model,a.tension),a.controlPointPreviousX=capControlPoint(o.previous.x,c.left,c.right),a.controlPointPreviousY=capControlPoint(o.previous.y,c.top,c.bottom),a.controlPointNextX=capControlPoint(o.next.x,c.left,c.right),a.controlPointNextY=capControlPoint(o.next.y,c.top,c.bottom)},setHoverStyle:function(t){var i=t._model,a=t._options,o=V.getHoverColor;t.$previousStyle={backgroundColor:i.backgroundColor,borderColor:i.borderColor,borderWidth:i.borderWidth,radius:i.radius},i.backgroundColor=At(a.hoverBackgroundColor,o(a.backgroundColor)),i.borderColor=At(a.hoverBorderColor,o(a.borderColor)),i.borderWidth=At(a.hoverBorderWidth,a.borderWidth),i.radius=At(a.hoverRadius,a.radius)}});S._set("scatter",{hover:{mode:"single"},scales:{xAxes:[{id:"x-axis-1",type:"linear",position:"bottom"}],yAxes:[{id:"y-axis-1",type:"linear",position:"left"}]},tooltips:{callbacks:{title:function(){return""},label:function(t){return"("+t.xLabel+", "+t.yLabel+")"}}}}),S._set("global",{datasets:{scatter:{showLine:!1}}});var Tt={bar:dt,bubble:mt,doughnut:bt,horizontalBar:_t,line:Ct,polarArea:kt,pie:It,radar:St,scatter:Ct};function getRelativePosition(t,i){return t.native?{x:t.x,y:t.y}:V.getRelativePosition(t,i)}function parseVisibleItems(t,i){var a,o,r,l,c,d,u=t._getSortedVisibleDatasetMetas();for(o=0,l=u.length;o<l;++o)for(r=0,c=(a=u[o].data).length;r<c;++r)(d=a[r])._view.skip||i(d)}function getIntersectItems(t,i){var a=[];return parseVisibleItems(t,(function(t){t.inRange(i.x,i.y)&&a.push(t)})),a}function getNearestItems(t,i,a,o){var r=Number.POSITIVE_INFINITY,l=[];return parseVisibleItems(t,(function(t){if(!a||t.inRange(i.x,i.y)){var c=t.getCenterPoint(),d=o(i,c);d<r?(l=[t],r=d):d===r&&l.push(t)}})),l}function getDistanceMetricForAxis(t){var i=-1!==t.indexOf("x"),a=-1!==t.indexOf("y");return function(t,o){var r=i?Math.abs(t.x-o.x):0,l=a?Math.abs(t.y-o.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(l,2))}}function indexMode(t,i,a){var o=getRelativePosition(i,t);a.axis=a.axis||"x";var r=getDistanceMetricForAxis(a.axis),l=a.intersect?getIntersectItems(t,o):getNearestItems(t,o,!1,r),c=[];return l.length?(t._getSortedVisibleDatasetMetas().forEach((function(t){var i=t.data[l[0]._index];i&&!i._view.skip&&c.push(i)})),c):[]}var Pt={modes:{single:function(t,i){var a=getRelativePosition(i,t),o=[];return parseVisibleItems(t,(function(t){if(t.inRange(a.x,a.y))return o.push(t),o})),o.slice(0,1)},label:indexMode,index:indexMode,dataset:function(t,i,a){var o=getRelativePosition(i,t);a.axis=a.axis||"xy";var r=getDistanceMetricForAxis(a.axis),l=a.intersect?getIntersectItems(t,o):getNearestItems(t,o,!1,r);return l.length>0&&(l=t.getDatasetMeta(l[0]._datasetIndex).data),l},"x-axis":function(t,i){return indexMode(t,i,{intersect:!1})},point:function(t,i){return getIntersectItems(t,getRelativePosition(i,t))},nearest:function(t,i,a){var o=getRelativePosition(i,t);a.axis=a.axis||"xy";var r=getDistanceMetricForAxis(a.axis);return getNearestItems(t,o,a.intersect,r)},x:function(t,i,a){var o=getRelativePosition(i,t),r=[],l=!1;return parseVisibleItems(t,(function(t){t.inXRange(o.x)&&r.push(t),t.inRange(o.x,o.y)&&(l=!0)})),a.intersect&&!l&&(r=[]),r},y:function(t,i,a){var o=getRelativePosition(i,t),r=[],l=!1;return parseVisibleItems(t,(function(t){t.inYRange(o.y)&&r.push(t),t.inRange(o.x,o.y)&&(l=!0)})),a.intersect&&!l&&(r=[]),r}}},Dt=V.extend;function filterByPosition(t,i){return V.where(t,(function(t){return t.pos===i}))}function sortByWeight(t,i){return t.sort((function(t,a){var o=i?a:t,r=i?t:a;return o.weight===r.weight?o.index-r.index:o.weight-r.weight}))}function wrapBoxes(t){var i,a,o,r=[];for(i=0,a=(t||[]).length;i<a;++i)o=t[i],r.push({index:i,box:o,pos:o.position,horizontal:o.isHorizontal(),weight:o.weight});return r}function setLayoutDims(t,i){var a,o,r;for(a=0,o=t.length;a<o;++a)(r=t[a]).width=r.horizontal?r.box.fullWidth&&i.availableWidth:i.vBoxMaxWidth,r.height=r.horizontal&&i.hBoxMaxHeight}function buildLayoutBoxes(t){var i=wrapBoxes(t),a=sortByWeight(filterByPosition(i,"left"),!0),o=sortByWeight(filterByPosition(i,"right")),r=sortByWeight(filterByPosition(i,"top"),!0),l=sortByWeight(filterByPosition(i,"bottom"));return{leftAndTop:a.concat(r),rightAndBottom:o.concat(l),chartArea:filterByPosition(i,"chartArea"),vertical:a.concat(o),horizontal:r.concat(l)}}function getCombinedMax(t,i,a,o){return Math.max(t[a],i[a])+Math.max(t[o],i[o])}function updateDims(t,i,a){var o,r,l=a.box,c=t.maxPadding;if(a.size&&(t[a.pos]-=a.size),a.size=a.horizontal?l.height:l.width,t[a.pos]+=a.size,l.getPadding){var d=l.getPadding();c.top=Math.max(c.top,d.top),c.left=Math.max(c.left,d.left),c.bottom=Math.max(c.bottom,d.bottom),c.right=Math.max(c.right,d.right)}if(o=i.outerWidth-getCombinedMax(c,t,"left","right"),r=i.outerHeight-getCombinedMax(c,t,"top","bottom"),o!==t.w||r!==t.h){t.w=o,t.h=r;var u=a.horizontal?[o,t.w]:[r,t.h];return!(u[0]===u[1]||isNaN(u[0])&&isNaN(u[1]))}}function handleMaxPadding(t){var i=t.maxPadding;function updatePos(a){var o=Math.max(i[a]-t[a],0);return t[a]+=o,o}t.y+=updatePos("top"),t.x+=updatePos("left"),updatePos("right"),updatePos("bottom")}function getMargins(t,i){var a=i.maxPadding;function marginForPositions(t){var o={left:0,top:0,right:0,bottom:0};return t.forEach((function(t){o[t]=Math.max(i[t],a[t])})),o}return marginForPositions(t?["left","right"]:["top","bottom"])}function fitBoxes(t,i,a){var o,r,l,c,d,u,h=[];for(o=0,r=t.length;o<r;++o)(c=(l=t[o]).box).update(l.width||i.w,l.height||i.h,getMargins(l.horizontal,i)),updateDims(i,a,l)&&(u=!0,h.length&&(d=!0)),c.fullWidth||h.push(l);return d&&fitBoxes(h,i,a)||u}function placeBoxes(t,i,a){var o,r,l,c,d=a.padding,u=i.x,h=i.y;for(o=0,r=t.length;o<r;++o)c=(l=t[o]).box,l.horizontal?(c.left=c.fullWidth?d.left:i.left,c.right=c.fullWidth?a.outerWidth-d.right:i.left+i.w,c.top=h,c.bottom=h+c.height,c.width=c.right-c.left,h=c.bottom):(c.left=u,c.right=u+c.width,c.top=i.top,c.bottom=i.top+i.h,c.height=c.bottom-c.top,u=c.right);i.x=u,i.y=h}S._set("global",{layout:{padding:{top:0,right:0,bottom:0,left:0}}});var Ot={defaults:{},addBox:function(t,i){t.boxes||(t.boxes=[]),i.fullWidth=i.fullWidth||!1,i.position=i.position||"top",i.weight=i.weight||0,i._layers=i._layers||function(){return[{z:0,draw:function(){i.draw.apply(i,arguments)}}]},t.boxes.push(i)},removeBox:function(t,i){var a=t.boxes?t.boxes.indexOf(i):-1;-1!==a&&t.boxes.splice(a,1)},configure:function(t,i,a){for(var o,r=["fullWidth","position","weight"],l=r.length,c=0;c<l;++c)o=r[c],a.hasOwnProperty(o)&&(i[o]=a[o])},update:function(t,i,a){if(t){var o=t.options.layout||{},r=V.options.toPadding(o.padding),l=i-r.width,c=a-r.height,d=buildLayoutBoxes(t.boxes),u=d.vertical,h=d.horizontal,m=Object.freeze({outerWidth:i,outerHeight:a,padding:r,availableWidth:l,vBoxMaxWidth:l/2/u.length,hBoxMaxHeight:c/2}),g=Dt({maxPadding:Dt({},r),w:l,h:c,x:r.left,y:r.top},r);setLayoutDims(u.concat(h),m),fitBoxes(u,g,m),fitBoxes(h,g,m)&&fitBoxes(u,g,m),handleMaxPadding(g),placeBoxes(d.leftAndTop,g,m),g.x+=g.w,g.y+=g.h,placeBoxes(d.rightAndBottom,g,m),t.chartArea={left:g.left,top:g.top,right:g.left+g.w,bottom:g.top+g.h},V.each(d.chartArea,(function(i){var a=i.box;Dt(a,t.chartArea),a.update(g.w,g.h)}))}}},Ft={acquireContext:function(t){return t&&t.canvas&&(t=t.canvas),t&&t.getContext("2d")||null}},Vt="/*\r\n * DOM element rendering detection\r\n * https://davidwalsh.name/detect-node-insertion\r\n */\r\n@keyframes chartjs-render-animation {\r\n\tfrom { opacity: 0.99; }\r\n\tto { opacity: 1; }\r\n}\r\n\r\n.chartjs-render-monitor {\r\n\tanimation: chartjs-render-animation 0.001s;\r\n}\r\n\r\n/*\r\n * DOM element resizing detection\r\n * https://github.com/marcj/css-element-queries\r\n */\r\n.chartjs-size-monitor,\r\n.chartjs-size-monitor-expand,\r\n.chartjs-size-monitor-shrink {\r\n\tposition: absolute;\r\n\tdirection: ltr;\r\n\tleft: 0;\r\n\ttop: 0;\r\n\tright: 0;\r\n\tbottom: 0;\r\n\toverflow: hidden;\r\n\tpointer-events: none;\r\n\tvisibility: hidden;\r\n\tz-index: -1;\r\n}\r\n\r\n.chartjs-size-monitor-expand > div {\r\n\tposition: absolute;\r\n\twidth: 1000000px;\r\n\theight: 1000000px;\r\n\tleft: 0;\r\n\ttop: 0;\r\n}\r\n\r\n.chartjs-size-monitor-shrink > div {\r\n\tposition: absolute;\r\n\twidth: 200%;\r\n\theight: 200%;\r\n\tleft: 0;\r\n\ttop: 0;\r\n}\r\n",zt=getCjsExportFromNamespace(Object.freeze({__proto__:null,default:Vt})),Bt="$chartjs",Lt="chartjs-",Nt=Lt+"size-monitor",Rt=Lt+"render-monitor",Et=Lt+"render-animation",jt=["animationstart","webkitAnimationStart"],Wt={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"};function readUsedSize(t,i){var a=V.getStyle(t,i),o=a&&a.match(/^(\d+)(\.\d+)?px$/);return o?Number(o[1]):void 0}function initCanvas(t,i){var a=t.style,o=t.getAttribute("height"),r=t.getAttribute("width");if(t[Bt]={initial:{height:o,width:r,style:{display:a.display,height:a.height,width:a.width}}},a.display=a.display||"block",null===r||""===r){var l=readUsedSize(t,"width");void 0!==l&&(t.width=l)}if(null===o||""===o)if(""===t.style.height)t.height=t.width/(i.options.aspectRatio||2);else{var c=readUsedSize(t,"height");void 0!==l&&(t.height=c)}return t}var Ht=!!function(){var t=!1;try{var i=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("e",null,i)}catch(a){}return t}()&&{passive:!0};function addListener(t,i,a){t.addEventListener(i,a,Ht)}function removeListener(t,i,a){t.removeEventListener(i,a,Ht)}function createEvent(t,i,a,o,r){return{type:t,chart:i,native:r||null,x:void 0!==a?a:null,y:void 0!==o?o:null}}function fromNativeEvent(t,i){var a=Wt[t.type]||t.type,o=V.getRelativePosition(t,i);return createEvent(a,i,o.x,o.y,t)}function throttled(t,i){var a=!1,o=[];return function(){o=Array.prototype.slice.call(arguments),i=i||this,a||(a=!0,V.requestAnimFrame.call(window,(function(){a=!1,t.apply(i,o)})))}}function createDiv(t){var i=document.createElement("div");return i.className=t||"",i}function createResizer(t){var i=1e6,a=createDiv(Nt),o=createDiv(Nt+"-expand"),r=createDiv(Nt+"-shrink");o.appendChild(createDiv()),r.appendChild(createDiv()),a.appendChild(o),a.appendChild(r),a._reset=function(){o.scrollLeft=i,o.scrollTop=i,r.scrollLeft=i,r.scrollTop=i};var onScroll=function(){a._reset(),t()};return addListener(o,"scroll",onScroll.bind(o,"expand")),addListener(r,"scroll",onScroll.bind(r,"shrink")),a}function watchForRender(t,i){var a=t[Bt]||(t[Bt]={}),o=a.renderProxy=function(t){t.animationName===Et&&i()};V.each(jt,(function(i){addListener(t,i,o)})),a.reflow=!!t.offsetParent,t.classList.add(Rt)}function unwatchForRender(t){var i=t[Bt]||{},a=i.renderProxy;a&&(V.each(jt,(function(i){removeListener(t,i,a)})),delete i.renderProxy),t.classList.remove(Rt)}function addResizeListener(t,i,a){var o=t[Bt]||(t[Bt]={}),r=o.resizer=createResizer(throttled((function(){if(o.resizer){var r=a.options.maintainAspectRatio&&t.parentNode,l=r?r.clientWidth:0;i(createEvent("resize",a)),r&&r.clientWidth<l&&a.canvas&&i(createEvent("resize",a))}})));watchForRender(t,(function(){if(o.resizer){var i=t.parentNode;i&&i!==r.parentNode&&i.insertBefore(r,i.firstChild),r._reset()}}))}function removeResizeListener(t){var i=t[Bt]||{},a=i.resizer;delete i.resizer,unwatchForRender(t),a&&a.parentNode&&a.parentNode.removeChild(a)}function injectCSS(t,i){var a=t[Bt]||(t[Bt]={});if(!a.containsStyles){a.containsStyles=!0,i="/* Chart.js */\n"+i;var o=document.createElement("style");o.setAttribute("type","text/css"),o.appendChild(document.createTextNode(i)),t.appendChild(o)}}var $t={disableCSSInjection:!1,_enabled:"undefined"!=typeof window&&"undefined"!=typeof document,_ensureLoaded:function(t){if(!this.disableCSSInjection){var i=t.getRootNode?t.getRootNode():document;injectCSS(i.host?i:document.head,zt)}},acquireContext:function(t,i){"string"==typeof t?t=document.getElementById(t):t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas);var a=t&&t.getContext&&t.getContext("2d");return a&&a.canvas===t?(this._ensureLoaded(t),initCanvas(t,i),a):null},releaseContext:function(t){var i=t.canvas;if(i[Bt]){var a=i[Bt].initial;["height","width"].forEach((function(t){var o=a[t];V.isNullOrUndef(o)?i.removeAttribute(t):i.setAttribute(t,o)})),V.each(a.style||{},(function(t,a){i.style[a]=t})),i.width=i.width,delete i[Bt]}},addEventListener:function(t,i,a){var o=t.canvas;if("resize"!==i){var r=a[Bt]||(a[Bt]={});addListener(o,i,(r.proxies||(r.proxies={}))[t.id+"_"+i]=function(i){a(fromNativeEvent(i,t))})}else addResizeListener(o,a,t)},removeEventListener:function(t,i,a){var o=t.canvas;if("resize"!==i){var r=((a[Bt]||{}).proxies||{})[t.id+"_"+i];r&&removeListener(o,i,r)}else removeResizeListener(o)}};V.addEvent=addListener,V.removeEvent=removeListener;var Ut=$t._enabled?$t:Ft,qt=V.extend({initialize:function(){},acquireContext:function(){},releaseContext:function(){},addEventListener:function(){},removeEventListener:function(){}},Ut);S._set("global",{plugins:{}});var Kt={_plugins:[],_cacheId:0,register:function(t){var i=this._plugins;[].concat(t).forEach((function(t){-1===i.indexOf(t)&&i.push(t)})),this._cacheId++},unregister:function(t){var i=this._plugins;[].concat(t).forEach((function(t){var a=i.indexOf(t);-1!==a&&i.splice(a,1)})),this._cacheId++},clear:function(){this._plugins=[],this._cacheId++},count:function(){return this._plugins.length},getAll:function(){return this._plugins},notify:function(t,i,a){var o,r,l,c,d,u=this.descriptors(t),h=u.length;for(o=0;o<h;++o)if("function"==typeof(d=(l=(r=u[o]).plugin)[i])&&((c=[t].concat(a||[])).push(r.options),!1===d.apply(l,c)))return!1;return!0},descriptors:function(t){var i=t.$plugins||(t.$plugins={});if(i.id===this._cacheId)return i.descriptors;var a=[],o=[],r=t&&t.config||{},l=r.options&&r.options.plugins||{};return this._plugins.concat(r.plugins||[]).forEach((function(t){if(-1===a.indexOf(t)){var i=t.id,r=l[i];!1!==r&&(!0===r&&(r=V.clone(S.global.plugins[i])),a.push(t),o.push({plugin:t,options:r||{}}))}})),i.descriptors=o,i.id=this._cacheId,o},_invalidate:function(t){delete t.$plugins}},Yt={constructors:{},defaults:{},registerScaleType:function(t,i,a){this.constructors[t]=i,this.defaults[t]=V.clone(a)},getScaleConstructor:function(t){return this.constructors.hasOwnProperty(t)?this.constructors[t]:void 0},getScaleDefaults:function(t){return this.defaults.hasOwnProperty(t)?V.merge(Object.create(null),[S.scale,this.defaults[t]]):{}},updateScaleDefaults:function(t,i){var a=this;a.defaults.hasOwnProperty(t)&&(a.defaults[t]=V.extend(a.defaults[t],i))},addScalesToLayout:function(t){V.each(t.scales,(function(i){i.fullWidth=i.options.fullWidth,i.position=i.options.position,i.weight=i.options.weight,Ot.addBox(t,i)}))}},Gt=V.valueOrDefault,Zt=V.rtl.getRtlAdapter;S._set("global",{tooltips:{enabled:!0,custom:null,mode:"nearest",position:"average",intersect:!0,backgroundColor:"rgba(0,0,0,0.8)",titleFontStyle:"bold",titleSpacing:2,titleMarginBottom:6,titleFontColor:"#fff",titleAlign:"left",bodySpacing:2,bodyFontColor:"#fff",bodyAlign:"left",footerFontStyle:"bold",footerSpacing:2,footerMarginTop:6,footerFontColor:"#fff",footerAlign:"left",yPadding:6,xPadding:6,caretPadding:2,caretSize:5,cornerRadius:6,multiKeyBackground:"#fff",displayColors:!0,borderColor:"rgba(0,0,0,0)",borderWidth:0,callbacks:{beforeTitle:V.noop,title:function(t,i){var a="",o=i.labels,r=o?o.length:0;if(t.length>0){var l=t[0];l.label?a=l.label:l.xLabel?a=l.xLabel:r>0&&l.index<r&&(a=o[l.index])}return a},afterTitle:V.noop,beforeBody:V.noop,beforeLabel:V.noop,label:function(t,i){var a=i.datasets[t.datasetIndex].label||"";return a&&(a+=": "),V.isNullOrUndef(t.value)?a+=t.yLabel:a+=t.value,a},labelColor:function(t,i){var a=i.getDatasetMeta(t.datasetIndex).data[t.index]._view;return{borderColor:a.borderColor,backgroundColor:a.backgroundColor}},labelTextColor:function(){return this._options.bodyFontColor},afterLabel:V.noop,afterBody:V.noop,beforeFooter:V.noop,footer:V.noop,afterFooter:V.noop}}});var Xt={average:function(t){if(!t.length)return!1;var i,a,o=0,r=0,l=0;for(i=0,a=t.length;i<a;++i){var c=t[i];if(c&&c.hasValue()){var d=c.tooltipPosition();o+=d.x,r+=d.y,++l}}return{x:o/l,y:r/l}},nearest:function(t,i){var a,o,r,l=i.x,c=i.y,d=Number.POSITIVE_INFINITY;for(a=0,o=t.length;a<o;++a){var u=t[a];if(u&&u.hasValue()){var h=u.getCenterPoint(),m=V.distanceBetweenPoints(i,h);m<d&&(d=m,r=u)}}if(r){var g=r.tooltipPosition();l=g.x,c=g.y}return{x:l,y:c}}};function pushOrConcat(t,i){return i&&(V.isArray(i)?Array.prototype.push.apply(t,i):t.push(i)),t}function splitNewlines(t){return("string"==typeof t||t instanceof String)&&t.indexOf("\n")>-1?t.split("\n"):t}function createTooltipItem(t){var i=t._xScale,a=t._yScale||t._scale,o=t._index,r=t._datasetIndex,l=t._chart.getDatasetMeta(r).controller,c=l._getIndexScale(),d=l._getValueScale();return{xLabel:i?i.getLabelForIndex(o,r):"",yLabel:a?a.getLabelForIndex(o,r):"",label:c?""+c.getLabelForIndex(o,r):"",value:d?""+d.getLabelForIndex(o,r):"",index:o,datasetIndex:r,x:t._model.x,y:t._model.y}}function getBaseModel(t){var i=S.global;return{xPadding:t.xPadding,yPadding:t.yPadding,xAlign:t.xAlign,yAlign:t.yAlign,rtl:t.rtl,textDirection:t.textDirection,bodyFontColor:t.bodyFontColor,_bodyFontFamily:Gt(t.bodyFontFamily,i.defaultFontFamily),_bodyFontStyle:Gt(t.bodyFontStyle,i.defaultFontStyle),_bodyAlign:t.bodyAlign,bodyFontSize:Gt(t.bodyFontSize,i.defaultFontSize),bodySpacing:t.bodySpacing,titleFontColor:t.titleFontColor,_titleFontFamily:Gt(t.titleFontFamily,i.defaultFontFamily),_titleFontStyle:Gt(t.titleFontStyle,i.defaultFontStyle),titleFontSize:Gt(t.titleFontSize,i.defaultFontSize),_titleAlign:t.titleAlign,titleSpacing:t.titleSpacing,titleMarginBottom:t.titleMarginBottom,footerFontColor:t.footerFontColor,_footerFontFamily:Gt(t.footerFontFamily,i.defaultFontFamily),_footerFontStyle:Gt(t.footerFontStyle,i.defaultFontStyle),footerFontSize:Gt(t.footerFontSize,i.defaultFontSize),_footerAlign:t.footerAlign,footerSpacing:t.footerSpacing,footerMarginTop:t.footerMarginTop,caretSize:t.caretSize,cornerRadius:t.cornerRadius,backgroundColor:t.backgroundColor,opacity:0,legendColorBackground:t.multiKeyBackground,displayColors:t.displayColors,borderColor:t.borderColor,borderWidth:t.borderWidth}}function getTooltipSize(t,i){var a=t._chart.ctx,o=2*i.yPadding,r=0,l=i.body,c=l.reduce((function(t,i){return t+i.before.length+i.lines.length+i.after.length}),0);c+=i.beforeBody.length+i.afterBody.length;var d=i.title.length,u=i.footer.length,h=i.titleFontSize,m=i.bodyFontSize,g=i.footerFontSize;o+=d*h,o+=d?(d-1)*i.titleSpacing:0,o+=d?i.titleMarginBottom:0,o+=c*m,o+=c?(c-1)*i.bodySpacing:0,o+=u?i.footerMarginTop:0,o+=u*g,o+=u?(u-1)*i.footerSpacing:0;var p=0,maxLineWidth=function(t){r=Math.max(r,a.measureText(t).width+p)};return a.font=V.fontString(h,i._titleFontStyle,i._titleFontFamily),V.each(i.title,maxLineWidth),a.font=V.fontString(m,i._bodyFontStyle,i._bodyFontFamily),V.each(i.beforeBody.concat(i.afterBody),maxLineWidth),p=i.displayColors?m+2:0,V.each(l,(function(t){V.each(t.before,maxLineWidth),V.each(t.lines,maxLineWidth),V.each(t.after,maxLineWidth)})),p=0,a.font=V.fontString(g,i._footerFontStyle,i._footerFontFamily),V.each(i.footer,maxLineWidth),{width:r+=2*i.xPadding,height:o}}function determineAlignment(t,i){var a,o,r,l,c,d=t._model,u=t._chart,h=t._chart.chartArea,m="center",g="center";d.y<i.height?g="top":d.y>u.height-i.height&&(g="bottom");var p=(h.left+h.right)/2,v=(h.top+h.bottom)/2;"center"===g?(a=function(t){return t<=p},o=function(t){return t>p}):(a=function(t){return t<=i.width/2},o=function(t){return t>=u.width-i.width/2}),r=function(t){return t+i.width+d.caretSize+d.caretPadding>u.width},l=function(t){return t-i.width-d.caretSize-d.caretPadding<0},c=function(t){return t<=v?"top":"bottom"},a(d.x)?(m="left",r(d.x)&&(m="center",g=c(d.y))):o(d.x)&&(m="right",l(d.x)&&(m="center",g=c(d.y)));var b=t._options;return{xAlign:b.xAlign?b.xAlign:m,yAlign:b.yAlign?b.yAlign:g}}function getBackgroundPoint(t,i,a,o){var r=t.x,l=t.y,c=t.caretSize,d=t.caretPadding,u=t.cornerRadius,h=a.xAlign,m=a.yAlign,g=c+d,p=u+d;return"right"===h?r-=i.width:"center"===h&&((r-=i.width/2)+i.width>o.width&&(r=o.width-i.width),r<0&&(r=0)),"top"===m?l+=g:l-="bottom"===m?i.height+g:i.height/2,"center"===m?"left"===h?r+=g:"right"===h&&(r-=g):"left"===h?r-=p:"right"===h&&(r+=p),{x:r,y:l}}function getAlignedX(t,i){return"center"===i?t.x+t.width/2:"right"===i?t.x+t.width-t.xPadding:t.x+t.xPadding}function getBeforeAfterBodyLines(t){return pushOrConcat([],splitNewlines(t))}var Jt=E.extend({initialize:function(){this._model=getBaseModel(this._options),this._lastActive=[]},getTitle:function(){var t=this,i=t._options.callbacks,a=i.beforeTitle.apply(t,arguments),o=i.title.apply(t,arguments),r=i.afterTitle.apply(t,arguments),l=[];return l=pushOrConcat(l,splitNewlines(a)),l=pushOrConcat(l,splitNewlines(o)),l=pushOrConcat(l,splitNewlines(r))},getBeforeBody:function(){return getBeforeAfterBodyLines(this._options.callbacks.beforeBody.apply(this,arguments))},getBody:function(t,i){var a=this,o=a._options.callbacks,r=[];return V.each(t,(function(t){var l={before:[],lines:[],after:[]};pushOrConcat(l.before,splitNewlines(o.beforeLabel.call(a,t,i))),pushOrConcat(l.lines,o.label.call(a,t,i)),pushOrConcat(l.after,splitNewlines(o.afterLabel.call(a,t,i))),r.push(l)})),r},getAfterBody:function(){return getBeforeAfterBodyLines(this._options.callbacks.afterBody.apply(this,arguments))},getFooter:function(){var t=this,i=t._options.callbacks,a=i.beforeFooter.apply(t,arguments),o=i.footer.apply(t,arguments),r=i.afterFooter.apply(t,arguments),l=[];return l=pushOrConcat(l,splitNewlines(a)),l=pushOrConcat(l,splitNewlines(o)),l=pushOrConcat(l,splitNewlines(r))},update:function(t){var i,a,o=this,r=o._options,l=o._model,c=o._model=getBaseModel(r),d=o._active,u=o._data,h={xAlign:l.xAlign,yAlign:l.yAlign},m={x:l.x,y:l.y},g={width:l.width,height:l.height},p={x:l.caretX,y:l.caretY};if(d.length){c.opacity=1;var v=[],b=[];p=Xt[r.position].call(o,d,o._eventPosition);var _=[];for(i=0,a=d.length;i<a;++i)_.push(createTooltipItem(d[i]));r.filter&&(_=_.filter((function(t){return r.filter(t,u)}))),r.itemSort&&(_=_.sort((function(t,i){return r.itemSort(t,i,u)}))),V.each(_,(function(t){v.push(r.callbacks.labelColor.call(o,t,o._chart)),b.push(r.callbacks.labelTextColor.call(o,t,o._chart))})),c.title=o.getTitle(_,u),c.beforeBody=o.getBeforeBody(_,u),c.body=o.getBody(_,u),c.afterBody=o.getAfterBody(_,u),c.footer=o.getFooter(_,u),c.x=p.x,c.y=p.y,c.caretPadding=r.caretPadding,c.labelColors=v,c.labelTextColors=b,c.dataPoints=_,m=getBackgroundPoint(c,g=getTooltipSize(this,c),h=determineAlignment(this,g),o._chart)}else c.opacity=0;return c.xAlign=h.xAlign,c.yAlign=h.yAlign,c.x=m.x,c.y=m.y,c.width=g.width,c.height=g.height,c.caretX=p.x,c.caretY=p.y,o._model=c,t&&r.custom&&r.custom.call(o,c),o},drawCaret:function(t,i){var a=this._chart.ctx,o=this._view,r=this.getCaretPosition(t,i,o);a.lineTo(r.x1,r.y1),a.lineTo(r.x2,r.y2),a.lineTo(r.x3,r.y3)},getCaretPosition:function(t,i,a){var o,r,l,c,d,u,h=a.caretSize,m=a.cornerRadius,g=a.xAlign,p=a.yAlign,v=t.x,b=t.y,_=i.width,y=i.height;if("center"===p)d=b+y/2,"left"===g?(r=(o=v)-h,l=o,c=d+h,u=d-h):(r=(o=v+_)+h,l=o,c=d-h,u=d+h);else if("left"===g?(o=(r=v+m+h)-h,l=r+h):"right"===g?(o=(r=v+_-m-h)-h,l=r+h):(o=(r=a.caretX)-h,l=r+h),"top"===p)d=(c=b)-h,u=c;else{d=(c=b+y)+h,u=c;var x=l;l=o,o=x}return{x1:o,x2:r,x3:l,y1:c,y2:d,y3:u}},drawTitle:function(t,i,a){var o,r,l,c=i.title,d=c.length;if(d){var u=Zt(i.rtl,i.x,i.width);for(t.x=getAlignedX(i,i._titleAlign),a.textAlign=u.textAlign(i._titleAlign),a.textBaseline="middle",o=i.titleFontSize,r=i.titleSpacing,a.fillStyle=i.titleFontColor,a.font=V.fontString(o,i._titleFontStyle,i._titleFontFamily),l=0;l<d;++l)a.fillText(c[l],u.x(t.x),t.y+o/2),t.y+=o+r,l+1===d&&(t.y+=i.titleMarginBottom-r)}},drawBody:function(t,i,a){var o,r,l,c,d,u,h,m,g=i.bodyFontSize,p=i.bodySpacing,v=i._bodyAlign,b=i.body,_=i.displayColors,y=0,x=_?getAlignedX(i,"left"):0,w=Zt(i.rtl,i.x,i.width),fillLineOfText=function(i){a.fillText(i,w.x(t.x+y),t.y+g/2),t.y+=g+p},C=w.textAlign(v);for(a.textAlign=v,a.textBaseline="middle",a.font=V.fontString(g,i._bodyFontStyle,i._bodyFontFamily),t.x=getAlignedX(i,C),a.fillStyle=i.bodyFontColor,V.each(i.beforeBody,fillLineOfText),y=_&&"right"!==C?"center"===v?g/2+1:g+2:0,d=0,h=b.length;d<h;++d){for(o=b[d],r=i.labelTextColors[d],l=i.labelColors[d],a.fillStyle=r,V.each(o.before,fillLineOfText),u=0,m=(c=o.lines).length;u<m;++u){if(_){var M=w.x(x);a.fillStyle=i.legendColorBackground,a.fillRect(w.leftForLtr(M,g),t.y,g,g),a.lineWidth=1,a.strokeStyle=l.borderColor,a.strokeRect(w.leftForLtr(M,g),t.y,g,g),a.fillStyle=l.backgroundColor,a.fillRect(w.leftForLtr(w.xPlus(M,1),g-2),t.y+1,g-2,g-2),a.fillStyle=r}fillLineOfText(c[u])}V.each(o.after,fillLineOfText)}y=0,V.each(i.afterBody,fillLineOfText),t.y-=p},drawFooter:function(t,i,a){var o,r,l=i.footer,c=l.length;if(c){var d=Zt(i.rtl,i.x,i.width);for(t.x=getAlignedX(i,i._footerAlign),t.y+=i.footerMarginTop,a.textAlign=d.textAlign(i._footerAlign),a.textBaseline="middle",o=i.footerFontSize,a.fillStyle=i.footerFontColor,a.font=V.fontString(o,i._footerFontStyle,i._footerFontFamily),r=0;r<c;++r)a.fillText(l[r],d.x(t.x),t.y+o/2),t.y+=o+i.footerSpacing}},drawBackground:function(t,i,a,o){a.fillStyle=i.backgroundColor,a.strokeStyle=i.borderColor,a.lineWidth=i.borderWidth;var r=i.xAlign,l=i.yAlign,c=t.x,d=t.y,u=o.width,h=o.height,m=i.cornerRadius;a.beginPath(),a.moveTo(c+m,d),"top"===l&&this.drawCaret(t,o),a.lineTo(c+u-m,d),a.quadraticCurveTo(c+u,d,c+u,d+m),"center"===l&&"right"===r&&this.drawCaret(t,o),a.lineTo(c+u,d+h-m),a.quadraticCurveTo(c+u,d+h,c+u-m,d+h),"bottom"===l&&this.drawCaret(t,o),a.lineTo(c+m,d+h),a.quadraticCurveTo(c,d+h,c,d+h-m),"center"===l&&"left"===r&&this.drawCaret(t,o),a.lineTo(c,d+m),a.quadraticCurveTo(c,d,c+m,d),a.closePath(),a.fill(),i.borderWidth>0&&a.stroke()},draw:function(){var t=this._chart.ctx,i=this._view;if(0!==i.opacity){var a={width:i.width,height:i.height},o={x:i.x,y:i.y},r=Math.abs(i.opacity<.001)?0:i.opacity,l=i.title.length||i.beforeBody.length||i.body.length||i.afterBody.length||i.footer.length;this._options.enabled&&l&&(t.save(),t.globalAlpha=r,this.drawBackground(o,i,t,a),o.y+=i.yPadding,V.rtl.overrideTextDirection(t,i.textDirection),this.drawTitle(o,i,t),this.drawBody(o,i,t),this.drawFooter(o,i,t),V.rtl.restoreTextDirection(t,i.textDirection),t.restore())}},handleEvent:function(t){var i=this,a=i._options,o=!1;return i._lastActive=i._lastActive||[],"mouseout"===t.type?i._active=[]:(i._active=i._chart.getElementsAtEventForMode(t,a.mode,a),a.reverse&&i._active.reverse()),(o=!V.arrayEquals(i._active,i._lastActive))&&(i._lastActive=i._active,(a.enabled||a.custom)&&(i._eventPosition={x:t.x,y:t.y},i.update(!0),i.pivot())),o}}),Qt=Xt,te=Jt;te.positioners=Qt;var ee=V.valueOrDefault;function mergeScaleConfig(){return V.merge(Object.create(null),[].slice.call(arguments),{merger:function(t,i,a,o){if("xAxes"===t||"yAxes"===t){var r,l,c,d=a[t].length;for(i[t]||(i[t]=[]),r=0;r<d;++r)c=a[t][r],l=ee(c.type,"xAxes"===t?"category":"linear"),r>=i[t].length&&i[t].push({}),!i[t][r].type||c.type&&c.type!==i[t][r].type?V.merge(i[t][r],[Yt.getScaleDefaults(l),c]):V.merge(i[t][r],c)}else V._merger(t,i,a,o)}})}function mergeConfig(){return V.merge(Object.create(null),[].slice.call(arguments),{merger:function(t,i,a,o){var r=i[t]||Object.create(null),l=a[t];"scales"===t?i[t]=mergeScaleConfig(r,l):"scale"===t?i[t]=V.merge(r,[Yt.getScaleDefaults(l.type),l]):V._merger(t,i,a,o)}})}function initConfig(t){var i=(t=t||Object.create(null)).data=t.data||{};return i.datasets=i.datasets||[],i.labels=i.labels||[],t.options=mergeConfig(S.global,S[t.type],t.options||{}),t}function updateConfig(t){var i=t.options;V.each(t.scales,(function(i){Ot.removeBox(t,i)})),i=mergeConfig(S.global,S[t.config.type],i),t.options=t.config.options=i,t.ensureScalesHaveIDs(),t.buildOrUpdateScales(),t.tooltip._options=i.tooltips,t.tooltip.initialize()}function nextAvailableScaleId(t,i,a){var o,hasId=function(t){return t.id===o};do{o=i+a++}while(V.findIndex(t,hasId)>=0);return o}function positionIsHorizontal(t){return"top"===t||"bottom"===t}function compare2Level(t,i){return function(a,o){return a[t]===o[t]?a[i]-o[i]:a[t]-o[t]}}S._set("global",{elements:{},events:["mousemove","mouseout","click","touchstart","touchmove"],hover:{onHover:null,mode:"nearest",intersect:!0,animationDuration:400},onClick:null,maintainAspectRatio:!0,responsive:!0,responsiveAnimationDuration:0});var Chart=function(t,i){return this.construct(t,i),this};V.extend(Chart.prototype,{construct:function(t,i){var a=this;i=initConfig(i);var o=qt.acquireContext(t,i),r=o&&o.canvas,l=r&&r.height,c=r&&r.width;a.id=V.uid(),a.ctx=o,a.canvas=r,a.config=i,a.width=c,a.height=l,a.aspectRatio=l?c/l:null,a.options=i.options,a._bufferedRender=!1,a._layers=[],a.chart=a,a.controller=a,Chart.instances[a.id]=a,Object.defineProperty(a,"data",{get:function(){return a.config.data},set:function(t){a.config.data=t}}),o&&r?(a.initialize(),a.update()):console.error("Failed to create chart: can't acquire context from the given item")},initialize:function(){var t=this;return Kt.notify(t,"beforeInit"),V.retinaScale(t,t.options.devicePixelRatio),t.bindEvents(),t.options.responsive&&t.resize(!0),t.initToolTip(),Kt.notify(t,"afterInit"),t},clear:function(){return V.canvas.clear(this),this},stop:function(){return H.cancelAnimation(this),this},resize:function(t){var i=this,a=i.options,o=i.canvas,r=a.maintainAspectRatio&&i.aspectRatio||null,l=Math.max(0,Math.floor(V.getMaximumWidth(o))),c=Math.max(0,Math.floor(r?l/r:V.getMaximumHeight(o)));if((i.width!==l||i.height!==c)&&(o.width=i.width=l,o.height=i.height=c,o.style.width=l+"px",o.style.height=c+"px",V.retinaScale(i,a.devicePixelRatio),!t)){var d={width:l,height:c};Kt.notify(i,"resize",[d]),a.onResize&&a.onResize(i,d),i.stop(),i.update({duration:a.responsiveAnimationDuration})}},ensureScalesHaveIDs:function(){var t=this.options,i=t.scales||{},a=t.scale;V.each(i.xAxes,(function(t,a){t.id||(t.id=nextAvailableScaleId(i.xAxes,"x-axis-",a))})),V.each(i.yAxes,(function(t,a){t.id||(t.id=nextAvailableScaleId(i.yAxes,"y-axis-",a))})),a&&(a.id=a.id||"scale")},buildOrUpdateScales:function(){var t=this,i=t.options,a=t.scales||{},o=[],r=Object.keys(a).reduce((function(t,i){return t[i]=!1,t}),{});i.scales&&(o=o.concat((i.scales.xAxes||[]).map((function(t){return{options:t,dtype:"category",dposition:"bottom"}})),(i.scales.yAxes||[]).map((function(t){return{options:t,dtype:"linear",dposition:"left"}})))),i.scale&&o.push({options:i.scale,dtype:"radialLinear",isDefault:!0,dposition:"chartArea"}),V.each(o,(function(i){var o=i.options,l=o.id,c=ee(o.type,i.dtype);positionIsHorizontal(o.position)!==positionIsHorizontal(i.dposition)&&(o.position=i.dposition),r[l]=!0;var d=null;if(l in a&&a[l].type===c)(d=a[l]).options=o,d.ctx=t.ctx,d.chart=t;else{var u=Yt.getScaleConstructor(c);if(!u)return;d=new u({id:l,type:c,options:o,ctx:t.ctx,chart:t}),a[d.id]=d}d.mergeTicksOptions(),i.isDefault&&(t.scale=d)})),V.each(r,(function(t,i){t||delete a[i]})),t.scales=a,Yt.addScalesToLayout(this)},buildOrUpdateControllers:function(){var t,i,a=this,o=[],r=a.data.datasets;for(t=0,i=r.length;t<i;t++){var l=r[t],c=a.getDatasetMeta(t),d=l.type||a.config.type;if(c.type&&c.type!==d&&(a.destroyDatasetMeta(t),c=a.getDatasetMeta(t)),c.type=d,c.order=l.order||0,c.index=t,c.controller)c.controller.updateIndex(t),c.controller.linkScales();else{var u=Tt[c.type];if(void 0===u)throw new Error('"'+c.type+'" is not a chart type.');c.controller=new u(a,t),o.push(c.controller)}}return o},resetElements:function(){var t=this;V.each(t.data.datasets,(function(i,a){t.getDatasetMeta(a).controller.reset()}),t)},reset:function(){this.resetElements(),this.tooltip.initialize()},update:function(t){var i,a,o=this;if(t&&"object"==typeof t||(t={duration:t,lazy:arguments[1]}),updateConfig(o),Kt._invalidate(o),!1!==Kt.notify(o,"beforeUpdate")){o.tooltip._data=o.data;var r=o.buildOrUpdateControllers();for(i=0,a=o.data.datasets.length;i<a;i++)o.getDatasetMeta(i).controller.buildOrUpdateElements();o.updateLayout(),o.options.animation&&o.options.animation.duration&&V.each(r,(function(t){t.reset()})),o.updateDatasets(),o.tooltip.initialize(),o.lastActive=[],Kt.notify(o,"afterUpdate"),o._layers.sort(compare2Level("z","_idx")),o._bufferedRender?o._bufferedRequest={duration:t.duration,easing:t.easing,lazy:t.lazy}:o.render(t)}},updateLayout:function(){var t=this;!1!==Kt.notify(t,"beforeLayout")&&(Ot.update(this,this.width,this.height),t._layers=[],V.each(t.boxes,(function(i){i._configure&&i._configure(),t._layers.push.apply(t._layers,i._layers())}),t),t._layers.forEach((function(t,i){t._idx=i})),Kt.notify(t,"afterScaleUpdate"),Kt.notify(t,"afterLayout"))},updateDatasets:function(){var t=this;if(!1!==Kt.notify(t,"beforeDatasetsUpdate")){for(var i=0,a=t.data.datasets.length;i<a;++i)t.updateDataset(i);Kt.notify(t,"afterDatasetsUpdate")}},updateDataset:function(t){var i=this,a=i.getDatasetMeta(t),o={meta:a,index:t};!1!==Kt.notify(i,"beforeDatasetUpdate",[o])&&(a.controller._update(),Kt.notify(i,"afterDatasetUpdate",[o]))},render:function(t){var i=this;t&&"object"==typeof t||(t={duration:t,lazy:arguments[1]});var a=i.options.animation,o=ee(t.duration,a&&a.duration),r=t.lazy;if(!1!==Kt.notify(i,"beforeRender")){var onComplete=function(t){Kt.notify(i,"afterRender"),V.callback(a&&a.onComplete,[t],i)};if(a&&o){var l=new W({numSteps:o/16.66,easing:t.easing||a.easing,render:function(t,i){var a=V.easing.effects[i.easing],o=i.currentStep,r=o/i.numSteps;t.draw(a(r),r,o)},onAnimationProgress:a.onProgress,onAnimationComplete:onComplete});H.addAnimation(i,l,o,r)}else i.draw(),onComplete(new W({numSteps:0,chart:i}));return i}},draw:function(t){var i,a,o=this;if(o.clear(),V.isNullOrUndef(t)&&(t=1),o.transition(t),!(o.width<=0||o.height<=0)&&!1!==Kt.notify(o,"beforeDraw",[t])){for(a=o._layers,i=0;i<a.length&&a[i].z<=0;++i)a[i].draw(o.chartArea);for(o.drawDatasets(t);i<a.length;++i)a[i].draw(o.chartArea);o._drawTooltip(t),Kt.notify(o,"afterDraw",[t])}},transition:function(t){for(var i=this,a=0,o=(i.data.datasets||[]).length;a<o;++a)i.isDatasetVisible(a)&&i.getDatasetMeta(a).controller.transition(t);i.tooltip.transition(t)},_getSortedDatasetMetas:function(t){var i,a,o=this,r=[];for(i=0,a=(o.data.datasets||[]).length;i<a;++i)t&&!o.isDatasetVisible(i)||r.push(o.getDatasetMeta(i));return r.sort(compare2Level("order","index")),r},_getSortedVisibleDatasetMetas:function(){return this._getSortedDatasetMetas(!0)},drawDatasets:function(t){var i,a,o=this;if(!1!==Kt.notify(o,"beforeDatasetsDraw",[t])){for(a=(i=o._getSortedVisibleDatasetMetas()).length-1;a>=0;--a)o.drawDataset(i[a],t);Kt.notify(o,"afterDatasetsDraw",[t])}},drawDataset:function(t,i){var a=this,o={meta:t,index:t.index,easingValue:i};!1!==Kt.notify(a,"beforeDatasetDraw",[o])&&(t.controller.draw(i),Kt.notify(a,"afterDatasetDraw",[o]))},_drawTooltip:function(t){var i=this,a=i.tooltip,o={tooltip:a,easingValue:t};!1!==Kt.notify(i,"beforeTooltipDraw",[o])&&(a.draw(),Kt.notify(i,"afterTooltipDraw",[o]))},getElementAtEvent:function(t){return Pt.modes.single(this,t)},getElementsAtEvent:function(t){return Pt.modes.label(this,t,{intersect:!0})},getElementsAtXAxis:function(t){return Pt.modes["x-axis"](this,t,{intersect:!0})},getElementsAtEventForMode:function(t,i,a){var o=Pt.modes[i];return"function"==typeof o?o(this,t,a):[]},getDatasetAtEvent:function(t){return Pt.modes.dataset(this,t,{intersect:!0})},getDatasetMeta:function(t){var i=this,a=i.data.datasets[t];a._meta||(a._meta={});var o=a._meta[i.id];return o||(o=a._meta[i.id]={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:a.order||0,index:t}),o},getVisibleDatasetCount:function(){for(var t=0,i=0,a=this.data.datasets.length;i<a;++i)this.isDatasetVisible(i)&&t++;return t},isDatasetVisible:function(t){var i=this.getDatasetMeta(t);return"boolean"==typeof i.hidden?!i.hidden:!this.data.datasets[t].hidden},generateLegend:function(){return this.options.legendCallback(this)},destroyDatasetMeta:function(t){var i=this.id,a=this.data.datasets[t],o=a._meta&&a._meta[i];o&&(o.controller.destroy(),delete a._meta[i])},destroy:function(){var t,i,a=this,o=a.canvas;for(a.stop(),t=0,i=a.data.datasets.length;t<i;++t)a.destroyDatasetMeta(t);o&&(a.unbindEvents(),V.canvas.clear(a),qt.releaseContext(a.ctx),a.canvas=null,a.ctx=null),Kt.notify(a,"destroy"),delete Chart.instances[a.id]},toBase64Image:function(){return this.canvas.toDataURL.apply(this.canvas,arguments)},initToolTip:function(){var t=this;t.tooltip=new te({_chart:t,_chartInstance:t,_data:t.data,_options:t.options.tooltips},t)},bindEvents:function(){var t=this,i=t._listeners={},listener=function(){t.eventHandler.apply(t,arguments)};V.each(t.options.events,(function(a){qt.addEventListener(t,a,listener),i[a]=listener})),t.options.responsive&&(listener=function(){t.resize()},qt.addEventListener(t,"resize",listener),i.resize=listener)},unbindEvents:function(){var t=this,i=t._listeners;i&&(delete t._listeners,V.each(i,(function(i,a){qt.removeEventListener(t,a,i)})))},updateHoverStyle:function(t,i,a){var o,r,l,c=a?"set":"remove";for(r=0,l=t.length;r<l;++r)(o=t[r])&&this.getDatasetMeta(o._datasetIndex).controller[c+"HoverStyle"](o);"dataset"===i&&this.getDatasetMeta(t[0]._datasetIndex).controller["_"+c+"DatasetHoverStyle"]()},eventHandler:function(t){var i=this,a=i.tooltip;if(!1!==Kt.notify(i,"beforeEvent",[t])){i._bufferedRender=!0,i._bufferedRequest=null;var o=i.handleEvent(t);a&&(o=a._start?a.handleEvent(t):o|a.handleEvent(t)),Kt.notify(i,"afterEvent",[t]);var r=i._bufferedRequest;return r?i.render(r):o&&!i.animating&&(i.stop(),i.render({duration:i.options.hover.animationDuration,lazy:!0})),i._bufferedRender=!1,i._bufferedRequest=null,i}},handleEvent:function(t){var i=this,a=i.options||{},o=a.hover,r=!1;return i.lastActive=i.lastActive||[],"mouseout"===t.type?i.active=[]:i.active=i.getElementsAtEventForMode(t,o.mode,o),V.callback(a.onHover||a.hover.onHover,[t.native,i.active],i),"mouseup"!==t.type&&"click"!==t.type||a.onClick&&a.onClick.call(i,t.native,i.active),i.lastActive.length&&i.updateHoverStyle(i.lastActive,o.mode,!1),i.active.length&&o.mode&&i.updateHoverStyle(i.active,o.mode,!0),r=!V.arrayEquals(i.active,i.lastActive),i.lastActive=i.active,r}}),Chart.instances={};var ne=Chart;Chart.Controller=Chart,Chart.types={},V.configMerge=mergeConfig,V.scaleMerge=mergeScaleConfig;var core_helpers=function(){function parseMaxStyle(t,i,a){var o;return"string"==typeof t?(o=parseInt(t,10),-1!==t.indexOf("%")&&(o=o/100*i.parentNode[a])):o=t,o}function isConstrainedValue(t){return null!=t&&"none"!==t}function getConstraintDimension(t,i,a){var o=document.defaultView,r=V._getParentNode(t),l=o.getComputedStyle(t)[i],c=o.getComputedStyle(r)[i],d=isConstrainedValue(l),u=isConstrainedValue(c),h=Number.POSITIVE_INFINITY;return d||u?Math.min(d?parseMaxStyle(l,t,a):h,u?parseMaxStyle(c,r,a):h):"none"}V.where=function(t,i){if(V.isArray(t)&&Array.prototype.filter)return t.filter(i);var a=[];return V.each(t,(function(t){i(t)&&a.push(t)})),a},V.findIndex=Array.prototype.findIndex?function(t,i,a){return t.findIndex(i,a)}:function(t,i,a){a=void 0===a?t:a;for(var o=0,r=t.length;o<r;++o)if(i.call(a,t[o],o,t))return o;return-1},V.findNextWhere=function(t,i,a){V.isNullOrUndef(a)&&(a=-1);for(var o=a+1;o<t.length;o++){var r=t[o];if(i(r))return r}},V.findPreviousWhere=function(t,i,a){V.isNullOrUndef(a)&&(a=t.length);for(var o=a-1;o>=0;o--){var r=t[o];if(i(r))return r}},V.isNumber=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},V.almostEquals=function(t,i,a){return Math.abs(t-i)<a},V.almostWhole=function(t,i){var a=Math.round(t);return a-i<=t&&a+i>=t},V.max=function(t){return t.reduce((function(t,i){return isNaN(i)?t:Math.max(t,i)}),Number.NEGATIVE_INFINITY)},V.min=function(t){return t.reduce((function(t,i){return isNaN(i)?t:Math.min(t,i)}),Number.POSITIVE_INFINITY)},V.sign=Math.sign?function(t){return Math.sign(t)}:function(t){return 0==(t=+t)||isNaN(t)?t:t>0?1:-1},V.toRadians=function(t){return t*(Math.PI/180)},V.toDegrees=function(t){return t*(180/Math.PI)},V._decimalPlaces=function(t){if(V.isFinite(t)){for(var i=1,a=0;Math.round(t*i)/i!==t;)i*=10,a++;return a}},V.getAngleFromPoint=function(t,i){var a=i.x-t.x,o=i.y-t.y,r=Math.sqrt(a*a+o*o),l=Math.atan2(o,a);return l<-.5*Math.PI&&(l+=2*Math.PI),{angle:l,distance:r}},V.distanceBetweenPoints=function(t,i){return Math.sqrt(Math.pow(i.x-t.x,2)+Math.pow(i.y-t.y,2))},V.aliasPixel=function(t){return t%2==0?0:.5},V._alignPixel=function(t,i,a){var o=t.currentDevicePixelRatio,r=a/2;return Math.round((i-r)*o)/o+r},V.splineCurve=function(t,i,a,o){var r=t.skip?i:t,l=i,c=a.skip?i:a,d=Math.sqrt(Math.pow(l.x-r.x,2)+Math.pow(l.y-r.y,2)),u=Math.sqrt(Math.pow(c.x-l.x,2)+Math.pow(c.y-l.y,2)),h=d/(d+u),m=u/(d+u),g=o*(h=isNaN(h)?0:h),p=o*(m=isNaN(m)?0:m);return{previous:{x:l.x-g*(c.x-r.x),y:l.y-g*(c.y-r.y)},next:{x:l.x+p*(c.x-r.x),y:l.y+p*(c.y-r.y)}}},V.EPSILON=Number.EPSILON||1e-14,V.splineCurveMonotone=function(t){var i,a,o,r,l,c,d,u,h,m=(t||[]).map((function(t){return{model:t._model,deltaK:0,mK:0}})),g=m.length;for(i=0;i<g;++i)if(!(o=m[i]).model.skip){if(a=i>0?m[i-1]:null,(r=i<g-1?m[i+1]:null)&&!r.model.skip){var p=r.model.x-o.model.x;o.deltaK=0!==p?(r.model.y-o.model.y)/p:0}!a||a.model.skip?o.mK=o.deltaK:!r||r.model.skip?o.mK=a.deltaK:this.sign(a.deltaK)!==this.sign(o.deltaK)?o.mK=0:o.mK=(a.deltaK+o.deltaK)/2}for(i=0;i<g-1;++i)o=m[i],r=m[i+1],o.model.skip||r.model.skip||(V.almostEquals(o.deltaK,0,this.EPSILON)?o.mK=r.mK=0:(l=o.mK/o.deltaK,c=r.mK/o.deltaK,(u=Math.pow(l,2)+Math.pow(c,2))<=9||(d=3/Math.sqrt(u),o.mK=l*d*o.deltaK,r.mK=c*d*o.deltaK)));for(i=0;i<g;++i)(o=m[i]).model.skip||(a=i>0?m[i-1]:null,r=i<g-1?m[i+1]:null,a&&!a.model.skip&&(h=(o.model.x-a.model.x)/3,o.model.controlPointPreviousX=o.model.x-h,o.model.controlPointPreviousY=o.model.y-h*o.mK),r&&!r.model.skip&&(h=(r.model.x-o.model.x)/3,o.model.controlPointNextX=o.model.x+h,o.model.controlPointNextY=o.model.y+h*o.mK))},V.nextItem=function(t,i,a){return a?i>=t.length-1?t[0]:t[i+1]:i>=t.length-1?t[t.length-1]:t[i+1]},V.previousItem=function(t,i,a){return a?i<=0?t[t.length-1]:t[i-1]:i<=0?t[0]:t[i-1]},V.niceNum=function(t,i){var a=Math.floor(V.log10(t)),o=t/Math.pow(10,a);return(i?o<1.5?1:o<3?2:o<7?5:10:o<=1?1:o<=2?2:o<=5?5:10)*Math.pow(10,a)},V.requestAnimFrame="undefined"==typeof window?function(t){t()}:window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return window.setTimeout(t,1e3/60)},V.getRelativePosition=function(t,i){var a,o,r=t.originalEvent||t,l=t.target||t.srcElement,c=l.getBoundingClientRect(),d=r.touches;d&&d.length>0?(a=d[0].clientX,o=d[0].clientY):(a=r.clientX,o=r.clientY);var u=parseFloat(V.getStyle(l,"padding-left")),h=parseFloat(V.getStyle(l,"padding-top")),m=parseFloat(V.getStyle(l,"padding-right")),g=parseFloat(V.getStyle(l,"padding-bottom")),p=c.right-c.left-u-m,v=c.bottom-c.top-h-g;return{x:a=Math.round((a-c.left-u)/p*l.width/i.currentDevicePixelRatio),y:o=Math.round((o-c.top-h)/v*l.height/i.currentDevicePixelRatio)}},V.getConstraintWidth=function(t){return getConstraintDimension(t,"max-width","clientWidth")},V.getConstraintHeight=function(t){return getConstraintDimension(t,"max-height","clientHeight")},V._calculatePadding=function(t,i,a){return(i=V.getStyle(t,i)).indexOf("%")>-1?a*parseInt(i,10)/100:parseInt(i,10)},V._getParentNode=function(t){var i=t.parentNode;return i&&"[object ShadowRoot]"===i.toString()&&(i=i.host),i},V.getMaximumWidth=function(t){var i=V._getParentNode(t);if(!i)return t.clientWidth;var a=i.clientWidth,o=a-V._calculatePadding(i,"padding-left",a)-V._calculatePadding(i,"padding-right",a),r=V.getConstraintWidth(t);return isNaN(r)?o:Math.min(o,r)},V.getMaximumHeight=function(t){var i=V._getParentNode(t);if(!i)return t.clientHeight;var a=i.clientHeight,o=a-V._calculatePadding(i,"padding-top",a)-V._calculatePadding(i,"padding-bottom",a),r=V.getConstraintHeight(t);return isNaN(r)?o:Math.min(o,r)},V.getStyle=function(t,i){return t.currentStyle?t.currentStyle[i]:document.defaultView.getComputedStyle(t,null).getPropertyValue(i)},V.retinaScale=function(t,i){var a=t.currentDevicePixelRatio=i||"undefined"!=typeof window&&window.devicePixelRatio||1;if(1!==a){var o=t.canvas,r=t.height,l=t.width;o.height=r*a,o.width=l*a,t.ctx.scale(a,a),o.style.height||o.style.width||(o.style.height=r+"px",o.style.width=l+"px")}},V.fontString=function(t,i,a){return i+" "+t+"px "+a},V.longestText=function(t,i,a,o){var r=(o=o||{}).data=o.data||{},l=o.garbageCollect=o.garbageCollect||[];o.font!==i&&(r=o.data={},l=o.garbageCollect=[],o.font=i),t.font=i;var c,d,u,h,m,g=0,p=a.length;for(c=0;c<p;c++)if(null!=(h=a[c])&&!0!==V.isArray(h))g=V.measureText(t,r,l,g,h);else if(V.isArray(h))for(d=0,u=h.length;d<u;d++)null==(m=h[d])||V.isArray(m)||(g=V.measureText(t,r,l,g,m));var v=l.length/2;if(v>a.length){for(c=0;c<v;c++)delete r[l[c]];l.splice(0,v)}return g},V.measureText=function(t,i,a,o,r){var l=i[r];return l||(l=i[r]=t.measureText(r).width,a.push(r)),l>o&&(o=l),o},V.numberOfLabelLines=function(t){var i=1;return V.each(t,(function(t){V.isArray(t)&&t.length>i&&(i=t.length)})),i},V.color=h?function(t){return t instanceof CanvasGradient&&(t=S.global.defaultColor),h(t)}:function(t){return console.error("Color.js not found!"),t},V.getHoverColor=function(t){return t instanceof CanvasPattern||t instanceof CanvasGradient?t:V.color(t).saturate(.5).darken(.1).rgbString()}};function abstract(){throw new Error("This method is not implemented: either no adapter can be found or an incomplete integration was provided.")}function DateAdapter(t){this.options=t||{}}V.extend(DateAdapter.prototype,{formats:abstract,parse:abstract,format:abstract,add:abstract,diff:abstract,startOf:abstract,endOf:abstract,_create:function(t){return t}}),DateAdapter.override=function(t){V.extend(DateAdapter.prototype,t)};var ie={_date:DateAdapter},ae={formatters:{values:function(t){return V.isArray(t)?t:""+t},linear:function(t,i,a){var o=a.length>3?a[2]-a[1]:a[1]-a[0];Math.abs(o)>1&&t!==Math.floor(t)&&(o=t-Math.floor(t));var r=V.log10(Math.abs(o)),l="";if(0!==t)if(Math.max(Math.abs(a[0]),Math.abs(a[a.length-1]))<1e-4){var c=V.log10(Math.abs(t)),d=Math.floor(c)-Math.floor(r);d=Math.max(Math.min(d,20),0),l=t.toExponential(d)}else{var u=-1*Math.floor(r);u=Math.max(Math.min(u,20),0),l=t.toFixed(u)}else l="0";return l},logarithmic:function(t,i,a){var o=t/Math.pow(10,Math.floor(V.log10(t)));return 0===t?"0":1===o||2===o||5===o||0===i||i===a.length-1?t.toExponential():""}}},oe=V.isArray,re=V.isNullOrUndef,se=V.valueOrDefault,le=V.valueAtIndexOrDefault;function sample(t,i){for(var a=[],o=t.length/i,r=0,l=t.length;r<l;r+=o)a.push(t[Math.floor(r)]);return a}function getPixelForGridLine(t,i,a){var o,r=t.getTicks().length,l=Math.min(i,r-1),c=t.getPixelForTick(l),d=t._startPixel,u=t._endPixel,h=1e-6;if(!(a&&(o=1===r?Math.max(c-d,u-c):0===i?(t.getPixelForTick(1)-c)/2:(c-t.getPixelForTick(l-1))/2,(c+=l<i?o:-o)<d-h||c>u+h)))return c}function garbageCollect(t,i){V.each(t,(function(t){var a,o=t.gc,r=o.length/2;if(r>i){for(a=0;a<r;++a)delete t.data[o[a]];o.splice(0,r)}}))}function computeLabelSizes(t,i,a,o){var r,l,c,d,u,h,m,g,p,v,b,_,y,x=a.length,w=[],C=[],M=[],k=0,I=0;for(r=0;r<x;++r){if(d=a[r].label,u=a[r].major?i.major:i.minor,t.font=h=u.string,m=o[h]=o[h]||{data:{},gc:[]},g=u.lineHeight,p=v=0,re(d)||oe(d)){if(oe(d))for(l=0,c=d.length;l<c;++l)b=d[l],re(b)||oe(b)||(p=V.measureText(t,m.data,m.gc,p,b),v+=g)}else p=V.measureText(t,m.data,m.gc,p,d),v=g;w.push(p),C.push(v),M.push(g/2),k=Math.max(p,k),I=Math.max(v,I)}function valueAt(t){return{width:w[t]||0,height:C[t]||0,offset:M[t]||0}}return garbageCollect(o,x),_=w.indexOf(k),y=C.indexOf(I),{first:valueAt(0),last:valueAt(x-1),widest:valueAt(_),highest:valueAt(y)}}function getTickMarkLength(t){return t.drawTicks?t.tickMarkLength:0}function getScaleLabelHeight(t){var i,a;return t.display?(i=V.options._parseFont(t),a=V.options.toPadding(t.padding),i.lineHeight+a.height):0}function parseFontOptions(t,i){return V.extend(V.options._parseFont({fontFamily:se(i.fontFamily,t.fontFamily),fontSize:se(i.fontSize,t.fontSize),fontStyle:se(i.fontStyle,t.fontStyle),lineHeight:se(i.lineHeight,t.lineHeight)}),{color:V.options.resolve([i.fontColor,t.fontColor,S.global.defaultFontColor])})}function parseTickFontOptions(t){var i=parseFontOptions(t,t.minor);return{minor:i,major:t.major.enabled?parseFontOptions(t,t.major):i}}function nonSkipped(t){var i,a,o,r=[];for(a=0,o=t.length;a<o;++a)void 0!==(i=t[a])._index&&r.push(i);return r}function getEvenSpacing(t){var i,a,o=t.length;if(o<2)return!1;for(a=t[0],i=1;i<o;++i)if(t[i]-t[i-1]!==a)return!1;return a}function calculateSpacing(t,i,a,o){var r,l,c,d,u=getEvenSpacing(t),h=(i.length-1)/o;if(!u)return Math.max(h,1);for(c=0,d=(r=V.math._factorize(u)).length-1;c<d;c++)if((l=r[c])>h)return l;return Math.max(h,1)}function getMajorIndices(t){var i,a,o=[];for(i=0,a=t.length;i<a;i++)t[i].major&&o.push(i);return o}function skipMajors(t,i,a){var o,r,l=0,c=i[0];for(a=Math.ceil(a),o=0;o<t.length;o++)r=t[o],o===c?(r._index=o,c=i[++l*a]):delete r.label}function skip(t,i,a,o){var r,l,c,d,u=se(a,0),h=Math.min(se(o,t.length),t.length),m=0;for(i=Math.ceil(i),o&&(i=(r=o-a)/Math.floor(r/i)),d=u;d<0;)m++,d=Math.round(u+m*i);for(l=Math.max(u,0);l<h;l++)c=t[l],l===d?(c._index=l,m++,d=Math.round(u+m*i)):delete c.label}S._set("scale",{display:!0,position:"left",offset:!1,gridLines:{display:!0,color:"rgba(0,0,0,0.1)",lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickMarkLength:10,zeroLineWidth:1,zeroLineColor:"rgba(0,0,0,0.25)",zeroLineBorderDash:[],zeroLineBorderDashOffset:0,offsetGridLines:!1,borderDash:[],borderDashOffset:0},scaleLabel:{display:!1,labelString:"",padding:{top:4,bottom:4}},ticks:{beginAtZero:!1,minRotation:0,maxRotation:50,mirror:!1,padding:0,reverse:!1,display:!0,autoSkip:!0,autoSkipPadding:0,labelOffset:0,callback:ae.formatters.values,minor:{},major:{}}});var ce=E.extend({zeroLineIndex:0,getPadding:function(){var t=this;return{left:t.paddingLeft||0,top:t.paddingTop||0,right:t.paddingRight||0,bottom:t.paddingBottom||0}},getTicks:function(){return this._ticks},_getLabels:function(){var t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]},mergeTicksOptions:function(){},beforeUpdate:function(){V.callback(this.options.beforeUpdate,[this])},update:function(t,i,a){var o,r,l,c,d,u=this,h=u.options.ticks,m=h.sampleSize;if(u.beforeUpdate(),u.maxWidth=t,u.maxHeight=i,u.margins=V.extend({left:0,right:0,top:0,bottom:0},a),u._ticks=null,u.ticks=null,u._labelSizes=null,u._maxLabelLines=0,u.longestLabelWidth=0,u.longestTextCache=u.longestTextCache||{},u._gridLineItems=null,u._labelItems=null,u.beforeSetDimensions(),u.setDimensions(),u.afterSetDimensions(),u.beforeDataLimits(),u.determineDataLimits(),u.afterDataLimits(),u.beforeBuildTicks(),c=u.buildTicks()||[],(!(c=u.afterBuildTicks(c)||c)||!c.length)&&u.ticks)for(c=[],o=0,r=u.ticks.length;o<r;++o)c.push({value:u.ticks[o],major:!1});return u._ticks=c,d=m<c.length,l=u._convertTicksToLabels(d?sample(c,m):c),u._configure(),u.beforeCalculateTickRotation(),u.calculateTickRotation(),u.afterCalculateTickRotation(),u.beforeFit(),u.fit(),u.afterFit(),u._ticksToDraw=h.display&&(h.autoSkip||"auto"===h.source)?u._autoSkip(c):c,d&&(l=u._convertTicksToLabels(u._ticksToDraw)),u.ticks=l,u.afterUpdate(),u.minSize},_configure:function(){var t,i,a=this,o=a.options.ticks.reverse;a.isHorizontal()?(t=a.left,i=a.right):(t=a.top,i=a.bottom,o=!o),a._startPixel=t,a._endPixel=i,a._reversePixels=o,a._length=i-t},afterUpdate:function(){V.callback(this.options.afterUpdate,[this])},beforeSetDimensions:function(){V.callback(this.options.beforeSetDimensions,[this])},setDimensions:function(){var t=this;t.isHorizontal()?(t.width=t.maxWidth,t.left=0,t.right=t.width):(t.height=t.maxHeight,t.top=0,t.bottom=t.height),t.paddingLeft=0,t.paddingTop=0,t.paddingRight=0,t.paddingBottom=0},afterSetDimensions:function(){V.callback(this.options.afterSetDimensions,[this])},beforeDataLimits:function(){V.callback(this.options.beforeDataLimits,[this])},determineDataLimits:V.noop,afterDataLimits:function(){V.callback(this.options.afterDataLimits,[this])},beforeBuildTicks:function(){V.callback(this.options.beforeBuildTicks,[this])},buildTicks:V.noop,afterBuildTicks:function(t){var i=this;return oe(t)&&t.length?V.callback(i.options.afterBuildTicks,[i,t]):(i.ticks=V.callback(i.options.afterBuildTicks,[i,i.ticks])||i.ticks,t)},beforeTickToLabelConversion:function(){V.callback(this.options.beforeTickToLabelConversion,[this])},convertTicksToLabels:function(){var t=this,i=t.options.ticks;t.ticks=t.ticks.map(i.userCallback||i.callback,this)},afterTickToLabelConversion:function(){V.callback(this.options.afterTickToLabelConversion,[this])},beforeCalculateTickRotation:function(){V.callback(this.options.beforeCalculateTickRotation,[this])},calculateTickRotation:function(){var t,i,a,o,r,l,c,d=this,u=d.options,h=u.ticks,m=d.getTicks().length,g=h.minRotation||0,p=h.maxRotation,v=g;!d._isVisible()||!h.display||g>=p||m<=1||!d.isHorizontal()?d.labelRotation=g:(i=(t=d._getLabelSizes()).widest.width,a=t.highest.height-t.highest.offset,o=Math.min(d.maxWidth,d.chart.width-i),i+6>(r=u.offset?d.maxWidth/m:o/(m-1))&&(r=o/(m-(u.offset?.5:1)),l=d.maxHeight-getTickMarkLength(u.gridLines)-h.padding-getScaleLabelHeight(u.scaleLabel),c=Math.sqrt(i*i+a*a),v=V.toDegrees(Math.min(Math.asin(Math.min((t.highest.height+6)/r,1)),Math.asin(Math.min(l/c,1))-Math.asin(a/c))),v=Math.max(g,Math.min(p,v))),d.labelRotation=v)},afterCalculateTickRotation:function(){V.callback(this.options.afterCalculateTickRotation,[this])},beforeFit:function(){V.callback(this.options.beforeFit,[this])},fit:function(){var t=this,i=t.minSize={width:0,height:0},a=t.chart,o=t.options,r=o.ticks,l=o.scaleLabel,c=o.gridLines,d=t._isVisible(),u="bottom"===o.position,h=t.isHorizontal();if(h?i.width=t.maxWidth:d&&(i.width=getTickMarkLength(c)+getScaleLabelHeight(l)),h?d&&(i.height=getTickMarkLength(c)+getScaleLabelHeight(l)):i.height=t.maxHeight,r.display&&d){var m=parseTickFontOptions(r),g=t._getLabelSizes(),p=g.first,v=g.last,b=g.widest,_=g.highest,y=.4*m.minor.lineHeight,x=r.padding;if(h){var w=0!==t.labelRotation,C=V.toRadians(t.labelRotation),M=Math.cos(C),k=Math.sin(C),I=k*b.width+M*(_.height-(w?_.offset:0))+(w?0:y);i.height=Math.min(t.maxHeight,i.height+I+x);var A,S,T=t.getPixelForTick(0)-t.left,P=t.right-t.getPixelForTick(t.getTicks().length-1);w?(A=u?M*p.width+k*p.offset:k*(p.height-p.offset),S=u?k*(v.height-v.offset):M*v.width+k*v.offset):(A=p.width/2,S=v.width/2),t.paddingLeft=Math.max((A-T)*t.width/(t.width-T),0)+3,t.paddingRight=Math.max((S-P)*t.width/(t.width-P),0)+3}else{var D=r.mirror?0:b.width+x+y;i.width=Math.min(t.maxWidth,i.width+D),t.paddingTop=p.height/2,t.paddingBottom=v.height/2}}t.handleMargins(),h?(t.width=t._length=a.width-t.margins.left-t.margins.right,t.height=i.height):(t.width=i.width,t.height=t._length=a.height-t.margins.top-t.margins.bottom)},handleMargins:function(){var t=this;t.margins&&(t.margins.left=Math.max(t.paddingLeft,t.margins.left),t.margins.top=Math.max(t.paddingTop,t.margins.top),t.margins.right=Math.max(t.paddingRight,t.margins.right),t.margins.bottom=Math.max(t.paddingBottom,t.margins.bottom))},afterFit:function(){V.callback(this.options.afterFit,[this])},isHorizontal:function(){var t=this.options.position;return"top"===t||"bottom"===t},isFullWidth:function(){return this.options.fullWidth},getRightValue:function(t){if(re(t))return NaN;if(("number"==typeof t||t instanceof Number)&&!isFinite(t))return NaN;if(t)if(this.isHorizontal()){if(void 0!==t.x)return this.getRightValue(t.x)}else if(void 0!==t.y)return this.getRightValue(t.y);return t},_convertTicksToLabels:function(t){var i,a,o,r=this;for(r.ticks=t.map((function(t){return t.value})),r.beforeTickToLabelConversion(),i=r.convertTicksToLabels(t)||r.ticks,r.afterTickToLabelConversion(),a=0,o=t.length;a<o;++a)t[a].label=i[a];return i},_getLabelSizes:function(){var t=this,i=t._labelSizes;return i||(t._labelSizes=i=computeLabelSizes(t.ctx,parseTickFontOptions(t.options.ticks),t.getTicks(),t.longestTextCache),t.longestLabelWidth=i.widest.width),i},_parseValue:function(t){var i,a,o,r;return oe(t)?(i=+this.getRightValue(t[0]),a=+this.getRightValue(t[1]),o=Math.min(i,a),r=Math.max(i,a)):(i=void 0,a=t=+this.getRightValue(t),o=t,r=t),{min:o,max:r,start:i,end:a}},_getScaleLabel:function(t){var i=this._parseValue(t);return void 0!==i.start?"["+i.start+", "+i.end+"]":+this.getRightValue(t)},getLabelForIndex:V.noop,getPixelForValue:V.noop,getValueForPixel:V.noop,getPixelForTick:function(t){var i=this,a=i.options.offset,o=i._ticks.length,r=1/Math.max(o-(a?0:1),1);return t<0||t>o-1?null:i.getPixelForDecimal(t*r+(a?r/2:0))},getPixelForDecimal:function(t){var i=this;return i._reversePixels&&(t=1-t),i._startPixel+t*i._length},getDecimalForPixel:function(t){var i=(t-this._startPixel)/this._length;return this._reversePixels?1-i:i},getBasePixel:function(){return this.getPixelForValue(this.getBaseValue())},getBaseValue:function(){var t=this,i=t.min,a=t.max;return t.beginAtZero?0:i<0&&a<0?a:i>0&&a>0?i:0},_autoSkip:function(t){var i,a,o,r,l=this,c=l.options.ticks,d=l._length,u=c.maxTicksLimit||d/l._tickSize()+1,h=c.major.enabled?getMajorIndices(t):[],m=h.length,g=h[0],p=h[m-1];if(m>u)return skipMajors(t,h,m/u),nonSkipped(t);if(o=calculateSpacing(h,t,d,u),m>0){for(i=0,a=m-1;i<a;i++)skip(t,o,h[i],h[i+1]);return r=m>1?(p-g)/(m-1):null,skip(t,o,V.isNullOrUndef(r)?0:g-r,g),skip(t,o,p,V.isNullOrUndef(r)?t.length:p+r),nonSkipped(t)}return skip(t,o),nonSkipped(t)},_tickSize:function(){var t=this,i=t.options.ticks,a=V.toRadians(t.labelRotation),o=Math.abs(Math.cos(a)),r=Math.abs(Math.sin(a)),l=t._getLabelSizes(),c=i.autoSkipPadding||0,d=l?l.widest.width+c:0,u=l?l.highest.height+c:0;return t.isHorizontal()?u*o>d*r?d/o:u/r:u*r<d*o?u/o:d/r},_isVisible:function(){var t,i,a,o=this,r=o.chart,l=o.options.display;if("auto"!==l)return!!l;for(t=0,i=r.data.datasets.length;t<i;++t)if(r.isDatasetVisible(t)&&((a=r.getDatasetMeta(t)).xAxisID===o.id||a.yAxisID===o.id))return!0;return!1},_computeGridLineItems:function(t){var i,a,o,r,l,c,d,u,h,m,g,p,v,b,_,y,x,w=this,C=w.chart,M=w.options,k=M.gridLines,I=M.position,A=k.offsetGridLines,S=w.isHorizontal(),T=w._ticksToDraw,P=T.length+(A?1:0),D=getTickMarkLength(k),O=[],z=k.drawBorder?le(k.lineWidth,0,0):0,B=z/2,L=V._alignPixel,alignBorderValue=function(t){return L(C,t,z)};for("top"===I?(i=alignBorderValue(w.bottom),d=w.bottom-D,h=i-B,g=alignBorderValue(t.top)+B,v=t.bottom):"bottom"===I?(i=alignBorderValue(w.top),g=t.top,v=alignBorderValue(t.bottom)-B,d=i+B,h=w.top+D):"left"===I?(i=alignBorderValue(w.right),c=w.right-D,u=i-B,m=alignBorderValue(t.left)+B,p=t.right):(i=alignBorderValue(w.left),m=t.left,p=alignBorderValue(t.right)-B,c=i+B,u=w.left+D),a=0;a<P;++a)o=T[a]||{},re(o.label)&&a<T.length||(a===w.zeroLineIndex&&M.offset===A?(b=k.zeroLineWidth,_=k.zeroLineColor,y=k.zeroLineBorderDash||[],x=k.zeroLineBorderDashOffset||0):(b=le(k.lineWidth,a,1),_=le(k.color,a,"rgba(0,0,0,0.1)"),y=k.borderDash||[],x=k.borderDashOffset||0),void 0!==(r=getPixelForGridLine(w,o._index||a,A))&&(l=L(C,r,b),S?c=u=m=p=l:d=h=g=v=l,O.push({tx1:c,ty1:d,tx2:u,ty2:h,x1:m,y1:g,x2:p,y2:v,width:b,color:_,borderDash:y,borderDashOffset:x})));return O.ticksLength=P,O.borderValue=i,O},_computeLabelItems:function(){var t,i,a,o,r,l,c,d,u,h,m,g,p=this,v=p.options,b=v.ticks,_=v.position,y=b.mirror,x=p.isHorizontal(),w=p._ticksToDraw,C=parseTickFontOptions(b),M=b.padding,k=getTickMarkLength(v.gridLines),I=-V.toRadians(p.labelRotation),A=[];for("top"===_?(l=p.bottom-k-M,c=I?"left":"center"):"bottom"===_?(l=p.top+k+M,c=I?"right":"center"):"left"===_?(r=p.right-(y?0:k)-M,c=y?"left":"right"):(r=p.left+(y?0:k)+M,c=y?"right":"left"),t=0,i=w.length;t<i;++t)o=(a=w[t]).label,re(o)||(d=p.getPixelForTick(a._index||t)+b.labelOffset,h=(u=a.major?C.major:C.minor).lineHeight,m=oe(o)?o.length:1,x?(r=d,g="top"===_?((I?1:.5)-m)*h:(I?0:.5)*h):(l=d,g=(1-m)*h/2),A.push({x:r,y:l,rotation:I,label:o,font:u,textOffset:g,textAlign:c}));return A},_drawGrid:function(t){var i=this,a=i.options.gridLines;if(a.display){var o,r,l,c,d,u=i.ctx,h=i.chart,m=V._alignPixel,g=a.drawBorder?le(a.lineWidth,0,0):0,p=i._gridLineItems||(i._gridLineItems=i._computeGridLineItems(t));for(l=0,c=p.length;l<c;++l)o=(d=p[l]).width,r=d.color,o&&r&&(u.save(),u.lineWidth=o,u.strokeStyle=r,u.setLineDash&&(u.setLineDash(d.borderDash),u.lineDashOffset=d.borderDashOffset),u.beginPath(),a.drawTicks&&(u.moveTo(d.tx1,d.ty1),u.lineTo(d.tx2,d.ty2)),a.drawOnChartArea&&(u.moveTo(d.x1,d.y1),u.lineTo(d.x2,d.y2)),u.stroke(),u.restore());if(g){var v,b,_,y,x=g,w=le(a.lineWidth,p.ticksLength-1,1),C=p.borderValue;i.isHorizontal()?(v=m(h,i.left,x)-x/2,b=m(h,i.right,w)+w/2,_=y=C):(_=m(h,i.top,x)-x/2,y=m(h,i.bottom,w)+w/2,v=b=C),u.lineWidth=g,u.strokeStyle=le(a.color,0),u.beginPath(),u.moveTo(v,_),u.lineTo(b,y),u.stroke()}}},_drawLabels:function(){var t=this;if(t.options.ticks.display){var i,a,o,r,l,c,d,u,h=t.ctx,m=t._labelItems||(t._labelItems=t._computeLabelItems());for(i=0,o=m.length;i<o;++i){if(c=(l=m[i]).font,h.save(),h.translate(l.x,l.y),h.rotate(l.rotation),h.font=c.string,h.fillStyle=c.color,h.textBaseline="middle",h.textAlign=l.textAlign,d=l.label,u=l.textOffset,oe(d))for(a=0,r=d.length;a<r;++a)h.fillText(""+d[a],0,u),u+=c.lineHeight;else h.fillText(d,0,u);h.restore()}}},_drawTitle:function(){var t=this,i=t.ctx,a=t.options,o=a.scaleLabel;if(o.display){var r,l,c=se(o.fontColor,S.global.defaultFontColor),d=V.options._parseFont(o),u=V.options.toPadding(o.padding),h=d.lineHeight/2,m=a.position,g=0;if(t.isHorizontal())r=t.left+t.width/2,l="bottom"===m?t.bottom-h-u.bottom:t.top+h+u.top;else{var p="left"===m;r=p?t.left+h+u.top:t.right-h-u.top,l=t.top+t.height/2,g=p?-.5*Math.PI:.5*Math.PI}i.save(),i.translate(r,l),i.rotate(g),i.textAlign="center",i.textBaseline="middle",i.fillStyle=c,i.font=d.string,i.fillText(o.labelString,0,0),i.restore()}},draw:function(t){var i=this;i._isVisible()&&(i._drawGrid(t),i._drawTitle(),i._drawLabels())},_layers:function(){var t=this,i=t.options,a=i.ticks&&i.ticks.z||0,o=i.gridLines&&i.gridLines.z||0;return t._isVisible()&&a!==o&&t.draw===t._draw?[{z:o,draw:function(){t._drawGrid.apply(t,arguments),t._drawTitle.apply(t,arguments)}},{z:a,draw:function(){t._drawLabels.apply(t,arguments)}}]:[{z:a,draw:function(){t.draw.apply(t,arguments)}}]},_getMatchingVisibleMetas:function(t){var i=this,a=i.isHorizontal();return i.chart._getSortedVisibleDatasetMetas().filter((function(o){return(!t||o.type===t)&&(a?o.xAxisID===i.id:o.yAxisID===i.id)}))}});ce.prototype._draw=ce.prototype.draw;var de=ce,ue=V.isNullOrUndef,he={position:"bottom"},me=de.extend({determineDataLimits:function(){var t,i=this,a=i._getLabels(),o=i.options.ticks,r=o.min,l=o.max,c=0,d=a.length-1;void 0!==r&&(t=a.indexOf(r))>=0&&(c=t),void 0!==l&&(t=a.indexOf(l))>=0&&(d=t),i.minIndex=c,i.maxIndex=d,i.min=a[c],i.max=a[d]},buildTicks:function(){var t=this,i=t._getLabels(),a=t.minIndex,o=t.maxIndex;t.ticks=0===a&&o===i.length-1?i:i.slice(a,o+1)},getLabelForIndex:function(t,i){var a=this,o=a.chart;return o.getDatasetMeta(i).controller._getValueScaleId()===a.id?a.getRightValue(o.data.datasets[i].data[t]):a._getLabels()[t]},_configure:function(){var t=this,i=t.options.offset,a=t.ticks;de.prototype._configure.call(t),t.isHorizontal()||(t._reversePixels=!t._reversePixels),a&&(t._startValue=t.minIndex-(i?.5:0),t._valueRange=Math.max(a.length-(i?0:1),1))},getPixelForValue:function(t,i,a){var o,r,l,c=this;return ue(i)||ue(a)||(t=c.chart.data.datasets[a].data[i]),ue(t)||(o=c.isHorizontal()?t.x:t.y),(void 0!==o||void 0!==t&&isNaN(i))&&(r=c._getLabels(),t=V.valueOrDefault(o,t),i=-1!==(l=r.indexOf(t))?l:i,isNaN(i)&&(i=t)),c.getPixelForDecimal((i-c._startValue)/c._valueRange)},getPixelForTick:function(t){var i=this.ticks;return t<0||t>i.length-1?null:this.getPixelForValue(i[t],t+this.minIndex)},getValueForPixel:function(t){var i=this,a=Math.round(i._startValue+i.getDecimalForPixel(t)*i._valueRange);return Math.min(Math.max(a,0),i.ticks.length-1)},getBasePixel:function(){return this.bottom}}),ge=he;me._defaults=ge;var fe=V.noop,pe=V.isNullOrUndef;function generateTicks(t,i){var a,o,r,l,c=[],d=1e-14,u=t.stepSize,h=u||1,m=t.maxTicks-1,g=t.min,p=t.max,v=t.precision,b=i.min,_=i.max,y=V.niceNum((_-b)/m/h)*h;if(y<d&&pe(g)&&pe(p))return[b,_];(l=Math.ceil(_/y)-Math.floor(b/y))>m&&(y=V.niceNum(l*y/m/h)*h),u||pe(v)?a=Math.pow(10,V._decimalPlaces(y)):(a=Math.pow(10,v),y=Math.ceil(y*a)/a),o=Math.floor(b/y)*y,r=Math.ceil(_/y)*y,u&&(!pe(g)&&V.almostWhole(g/y,y/1e3)&&(o=g),!pe(p)&&V.almostWhole(p/y,y/1e3)&&(r=p)),l=(r-o)/y,l=V.almostEquals(l,Math.round(l),y/1e3)?Math.round(l):Math.ceil(l),o=Math.round(o*a)/a,r=Math.round(r*a)/a,c.push(pe(g)?o:g);for(var x=1;x<l;++x)c.push(Math.round((o+x*y)*a)/a);return c.push(pe(p)?r:p),c}var ve=de.extend({getRightValue:function(t){return"string"==typeof t?+t:de.prototype.getRightValue.call(this,t)},handleTickRangeOptions:function(){var t=this,i=t.options.ticks;if(i.beginAtZero){var a=V.sign(t.min),o=V.sign(t.max);a<0&&o<0?t.max=0:a>0&&o>0&&(t.min=0)}var r=void 0!==i.min||void 0!==i.suggestedMin,l=void 0!==i.max||void 0!==i.suggestedMax;void 0!==i.min?t.min=i.min:void 0!==i.suggestedMin&&(null===t.min?t.min=i.suggestedMin:t.min=Math.min(t.min,i.suggestedMin)),void 0!==i.max?t.max=i.max:void 0!==i.suggestedMax&&(null===t.max?t.max=i.suggestedMax:t.max=Math.max(t.max,i.suggestedMax)),r!==l&&t.min>=t.max&&(r?t.max=t.min+1:t.min=t.max-1),t.min===t.max&&(t.max++,i.beginAtZero||t.min--)},getTickLimit:function(){var t,i=this,a=i.options.ticks,o=a.stepSize,r=a.maxTicksLimit;return o?t=Math.ceil(i.max/o)-Math.floor(i.min/o)+1:(t=i._computeTickLimit(),r=r||11),r&&(t=Math.min(r,t)),t},_computeTickLimit:function(){return Number.POSITIVE_INFINITY},handleDirectionalChanges:fe,buildTicks:function(){var t=this,i=t.options.ticks,a=t.getTickLimit(),o={maxTicks:a=Math.max(2,a),min:i.min,max:i.max,precision:i.precision,stepSize:V.valueOrDefault(i.fixedStepSize,i.stepSize)},r=t.ticks=generateTicks(o,t);t.handleDirectionalChanges(),t.max=V.max(r),t.min=V.min(r),i.reverse?(r.reverse(),t.start=t.max,t.end=t.min):(t.start=t.min,t.end=t.max)},convertTicksToLabels:function(){var t=this;t.ticksAsNumbers=t.ticks.slice(),t.zeroLineIndex=t.ticks.indexOf(0),de.prototype.convertTicksToLabels.call(t)},_configure:function(){var t,i=this,a=i.getTicks(),o=i.min,r=i.max;de.prototype._configure.call(i),i.options.offset&&a.length&&(o-=t=(r-o)/Math.max(a.length-1,1)/2,r+=t),i._startValue=o,i._endValue=r,i._valueRange=r-o}}),be={position:"left",ticks:{callback:ae.formatters.linear}},_e=0,ye=1;function getOrCreateStack(t,i,a){var o=[a.type,void 0===i&&void 0===a.stack?a.index:"",a.stack].join(".");return void 0===t[o]&&(t[o]={pos:[],neg:[]}),t[o]}function stackData(t,i,a,o){var r,l,c=t.options,d=getOrCreateStack(i,c.stacked,a),u=d.pos,h=d.neg,m=o.length;for(r=0;r<m;++r)l=t._parseValue(o[r]),isNaN(l.min)||isNaN(l.max)||a.data[r].hidden||(u[r]=u[r]||0,h[r]=h[r]||0,c.relativePoints?u[r]=100:l.min<0||l.max<0?h[r]+=l.min:u[r]+=l.max)}function updateMinMax(t,i,a){var o,r,l=a.length;for(o=0;o<l;++o)r=t._parseValue(a[o]),isNaN(r.min)||isNaN(r.max)||i.data[o].hidden||(t.min=Math.min(t.min,r.min),t.max=Math.max(t.max,r.max))}var xe=ve.extend({determineDataLimits:function(){var t,i,a,o,r=this,l=r.options,c=r.chart.data.datasets,d=r._getMatchingVisibleMetas(),u=l.stacked,h={},m=d.length;if(r.min=Number.POSITIVE_INFINITY,r.max=Number.NEGATIVE_INFINITY,void 0===u)for(t=0;!u&&t<m;++t)u=void 0!==(i=d[t]).stack;for(t=0;t<m;++t)a=c[(i=d[t]).index].data,u?stackData(r,h,i,a):updateMinMax(r,i,a);V.each(h,(function(t){o=t.pos.concat(t.neg),r.min=Math.min(r.min,V.min(o)),r.max=Math.max(r.max,V.max(o))})),r.min=V.isFinite(r.min)&&!isNaN(r.min)?r.min:_e,r.max=V.isFinite(r.max)&&!isNaN(r.max)?r.max:ye,r.handleTickRangeOptions()},_computeTickLimit:function(){var t,i=this;return i.isHorizontal()?Math.ceil(i.width/40):(t=V.options._parseFont(i.options.ticks),Math.ceil(i.height/t.lineHeight))},handleDirectionalChanges:function(){this.isHorizontal()||this.ticks.reverse()},getLabelForIndex:function(t,i){return this._getScaleLabel(this.chart.data.datasets[i].data[t])},getPixelForValue:function(t){var i=this;return i.getPixelForDecimal((+i.getRightValue(t)-i._startValue)/i._valueRange)},getValueForPixel:function(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange},getPixelForTick:function(t){var i=this.ticksAsNumbers;return t<0||t>i.length-1?null:this.getPixelForValue(i[t])}}),we=be;xe._defaults=we;var Ce=V.valueOrDefault,Me=V.math.log10;function generateTicks$1(t,i){var a,o,r=[],l=Ce(t.min,Math.pow(10,Math.floor(Me(i.min)))),c=Math.floor(Me(i.max)),d=Math.ceil(i.max/Math.pow(10,c));0===l?(a=Math.floor(Me(i.minNotZero)),o=Math.floor(i.minNotZero/Math.pow(10,a)),r.push(l),l=o*Math.pow(10,a)):(a=Math.floor(Me(l)),o=Math.floor(l/Math.pow(10,a)));var u=a<0?Math.pow(10,Math.abs(a)):1;do{r.push(l),10==++o&&(o=1,u=++a>=0?1:u),l=Math.round(o*Math.pow(10,a)*u)/u}while(a<c||a===c&&o<d);var h=Ce(t.max,l);return r.push(h),r}var ke={position:"left",ticks:{callback:ae.formatters.logarithmic}};function nonNegativeOrDefault(t,i){return V.isFinite(t)&&t>=0?t:i}var Ie=de.extend({determineDataLimits:function(){var t,i,a,o,r,l,c=this,d=c.options,u=c.chart,h=u.data.datasets,m=c.isHorizontal();function IDMatches(t){return m?t.xAxisID===c.id:t.yAxisID===c.id}c.min=Number.POSITIVE_INFINITY,c.max=Number.NEGATIVE_INFINITY,c.minNotZero=Number.POSITIVE_INFINITY;var g=d.stacked;if(void 0===g)for(t=0;t<h.length;t++)if(i=u.getDatasetMeta(t),u.isDatasetVisible(t)&&IDMatches(i)&&void 0!==i.stack){g=!0;break}if(d.stacked||g){var p={};for(t=0;t<h.length;t++){var v=[(i=u.getDatasetMeta(t)).type,void 0===d.stacked&&void 0===i.stack?t:"",i.stack].join(".");if(u.isDatasetVisible(t)&&IDMatches(i))for(void 0===p[v]&&(p[v]=[]),r=0,l=(o=h[t].data).length;r<l;r++){var b=p[v];a=c._parseValue(o[r]),isNaN(a.min)||isNaN(a.max)||i.data[r].hidden||a.min<0||a.max<0||(b[r]=b[r]||0,b[r]+=a.max)}}V.each(p,(function(t){if(t.length>0){var i=V.min(t),a=V.max(t);c.min=Math.min(c.min,i),c.max=Math.max(c.max,a)}}))}else for(t=0;t<h.length;t++)if(i=u.getDatasetMeta(t),u.isDatasetVisible(t)&&IDMatches(i))for(r=0,l=(o=h[t].data).length;r<l;r++)a=c._parseValue(o[r]),isNaN(a.min)||isNaN(a.max)||i.data[r].hidden||a.min<0||a.max<0||(c.min=Math.min(a.min,c.min),c.max=Math.max(a.max,c.max),0!==a.min&&(c.minNotZero=Math.min(a.min,c.minNotZero)));c.min=V.isFinite(c.min)?c.min:null,c.max=V.isFinite(c.max)?c.max:null,c.minNotZero=V.isFinite(c.minNotZero)?c.minNotZero:null,this.handleTickRangeOptions()},handleTickRangeOptions:function(){var t=this,i=t.options.ticks,a=1,o=10;t.min=nonNegativeOrDefault(i.min,t.min),t.max=nonNegativeOrDefault(i.max,t.max),t.min===t.max&&(0!==t.min&&null!==t.min?(t.min=Math.pow(10,Math.floor(Me(t.min))-1),t.max=Math.pow(10,Math.floor(Me(t.max))+1)):(t.min=a,t.max=o)),null===t.min&&(t.min=Math.pow(10,Math.floor(Me(t.max))-1)),null===t.max&&(t.max=0!==t.min?Math.pow(10,Math.floor(Me(t.min))+1):o),null===t.minNotZero&&(t.min>0?t.minNotZero=t.min:t.max<1?t.minNotZero=Math.pow(10,Math.floor(Me(t.max))):t.minNotZero=a)},buildTicks:function(){var t=this,i=t.options.ticks,a=!t.isHorizontal(),o={min:nonNegativeOrDefault(i.min),max:nonNegativeOrDefault(i.max)},r=t.ticks=generateTicks$1(o,t);t.max=V.max(r),t.min=V.min(r),i.reverse?(a=!a,t.start=t.max,t.end=t.min):(t.start=t.min,t.end=t.max),a&&r.reverse()},convertTicksToLabels:function(){this.tickValues=this.ticks.slice(),de.prototype.convertTicksToLabels.call(this)},getLabelForIndex:function(t,i){return this._getScaleLabel(this.chart.data.datasets[i].data[t])},getPixelForTick:function(t){var i=this.tickValues;return t<0||t>i.length-1?null:this.getPixelForValue(i[t])},_getFirstTickValue:function(t){var i=Math.floor(Me(t));return Math.floor(t/Math.pow(10,i))*Math.pow(10,i)},_configure:function(){var t=this,i=t.min,a=0;de.prototype._configure.call(t),0===i&&(i=t._getFirstTickValue(t.minNotZero),a=Ce(t.options.ticks.fontSize,S.global.defaultFontSize)/t._length),t._startValue=Me(i),t._valueOffset=a,t._valueRange=(Me(t.max)-Me(i))/(1-a)},getPixelForValue:function(t){var i=this,a=0;return(t=+i.getRightValue(t))>i.min&&t>0&&(a=(Me(t)-i._startValue)/i._valueRange+i._valueOffset),i.getPixelForDecimal(a)},getValueForPixel:function(t){var i=this,a=i.getDecimalForPixel(t);return 0===a&&0===i.min?0:Math.pow(10,i._startValue+(a-i._valueOffset)*i._valueRange)}}),Ae=ke;Ie._defaults=Ae;var Se=V.valueOrDefault,Te=V.valueAtIndexOrDefault,Pe=V.options.resolve,De={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,color:"rgba(0,0,0,0.1)",lineWidth:1,borderDash:[],borderDashOffset:0},gridLines:{circular:!1},ticks:{showLabelBackdrop:!0,backdropColor:"rgba(255,255,255,0.75)",backdropPaddingY:2,backdropPaddingX:2,callback:ae.formatters.linear},pointLabels:{display:!0,fontSize:10,callback:function(t){return t}}};function getTickBackdropHeight(t){var i=t.ticks;return i.display&&t.display?Se(i.fontSize,S.global.defaultFontSize)+2*i.backdropPaddingY:0}function measureLabelSize(t,i,a){return V.isArray(a)?{w:V.longestText(t,t.font,a),h:a.length*i}:{w:t.measureText(a).width,h:i}}function determineLimits(t,i,a,o,r){return t===o||t===r?{start:i-a/2,end:i+a/2}:t<o||t>r?{start:i-a,end:i}:{start:i,end:i+a}}function fitWithPointLabels(t){var i,a,o,r=V.options._parseFont(t.options.pointLabels),l={l:0,r:t.width,t:0,b:t.height-t.paddingTop},c={};t.ctx.font=r.string,t._pointLabelSizes=[];var d=t.chart.data.labels.length;for(i=0;i<d;i++){o=t.getPointPosition(i,t.drawingArea+5),a=measureLabelSize(t.ctx,r.lineHeight,t.pointLabels[i]),t._pointLabelSizes[i]=a;var u=t.getIndexAngle(i),h=V.toDegrees(u)%360,m=determineLimits(h,o.x,a.w,0,180),g=determineLimits(h,o.y,a.h,90,270);m.start<l.l&&(l.l=m.start,c.l=u),m.end>l.r&&(l.r=m.end,c.r=u),g.start<l.t&&(l.t=g.start,c.t=u),g.end>l.b&&(l.b=g.end,c.b=u)}t.setReductions(t.drawingArea,l,c)}function getTextAlignForAngle(t){return 0===t||180===t?"center":t<180?"left":"right"}function fillText(t,i,a,o){var r,l,c=a.y+o/2;if(V.isArray(i))for(r=0,l=i.length;r<l;++r)t.fillText(i[r],a.x,c),c+=o;else t.fillText(i,a.x,c)}function adjustPointPositionForLabelHeight(t,i,a){90===t||270===t?a.y-=i.h/2:(t>270||t<90)&&(a.y-=i.h)}function drawPointLabels(t){var i=t.ctx,a=t.options,o=a.pointLabels,r=getTickBackdropHeight(a),l=t.getDistanceFromCenterForValue(a.ticks.reverse?t.min:t.max),c=V.options._parseFont(o);i.save(),i.font=c.string,i.textBaseline="middle";for(var d=t.chart.data.labels.length-1;d>=0;d--){var u=0===d?r/2:0,h=t.getPointPosition(d,l+u+5),m=Te(o.fontColor,d,S.global.defaultFontColor);i.fillStyle=m;var g=t.getIndexAngle(d),p=V.toDegrees(g);i.textAlign=getTextAlignForAngle(p),adjustPointPositionForLabelHeight(p,t._pointLabelSizes[d],h),fillText(i,t.pointLabels[d],h,c.lineHeight)}i.restore()}function drawRadiusLine(t,i,a,o){var r,l=t.ctx,c=i.circular,d=t.chart.data.labels.length,u=Te(i.color,o-1),h=Te(i.lineWidth,o-1);if((c||d)&&u&&h){if(l.save(),l.strokeStyle=u,l.lineWidth=h,l.setLineDash&&(l.setLineDash(i.borderDash||[]),l.lineDashOffset=i.borderDashOffset||0),l.beginPath(),c)l.arc(t.xCenter,t.yCenter,a,0,2*Math.PI);else{r=t.getPointPosition(0,a),l.moveTo(r.x,r.y);for(var m=1;m<d;m++)r=t.getPointPosition(m,a),l.lineTo(r.x,r.y)}l.closePath(),l.stroke(),l.restore()}}function numberOrZero(t){return V.isNumber(t)?t:0}var Oe=ve.extend({setDimensions:function(){var t=this;t.width=t.maxWidth,t.height=t.maxHeight,t.paddingTop=getTickBackdropHeight(t.options)/2,t.xCenter=Math.floor(t.width/2),t.yCenter=Math.floor((t.height-t.paddingTop)/2),t.drawingArea=Math.min(t.height-t.paddingTop,t.width)/2},determineDataLimits:function(){var t=this,i=t.chart,a=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY;V.each(i.data.datasets,(function(r,l){if(i.isDatasetVisible(l)){var c=i.getDatasetMeta(l);V.each(r.data,(function(i,r){var l=+t.getRightValue(i);isNaN(l)||c.data[r].hidden||(a=Math.min(l,a),o=Math.max(l,o))}))}})),t.min=a===Number.POSITIVE_INFINITY?0:a,t.max=o===Number.NEGATIVE_INFINITY?0:o,t.handleTickRangeOptions()},_computeTickLimit:function(){return Math.ceil(this.drawingArea/getTickBackdropHeight(this.options))},convertTicksToLabels:function(){var t=this;ve.prototype.convertTicksToLabels.call(t),t.pointLabels=t.chart.data.labels.map((function(){var i=V.callback(t.options.pointLabels.callback,arguments,t);return i||0===i?i:""}))},getLabelForIndex:function(t,i){return+this.getRightValue(this.chart.data.datasets[i].data[t])},fit:function(){var t=this,i=t.options;i.display&&i.pointLabels.display?fitWithPointLabels(t):t.setCenterPoint(0,0,0,0)},setReductions:function(t,i,a){var o=this,r=i.l/Math.sin(a.l),l=Math.max(i.r-o.width,0)/Math.sin(a.r),c=-i.t/Math.cos(a.t),d=-Math.max(i.b-(o.height-o.paddingTop),0)/Math.cos(a.b);r=numberOrZero(r),l=numberOrZero(l),c=numberOrZero(c),d=numberOrZero(d),o.drawingArea=Math.min(Math.floor(t-(r+l)/2),Math.floor(t-(c+d)/2)),o.setCenterPoint(r,l,c,d)},setCenterPoint:function(t,i,a,o){var r=this,l=r.width-i-r.drawingArea,c=t+r.drawingArea,d=a+r.drawingArea,u=r.height-r.paddingTop-o-r.drawingArea;r.xCenter=Math.floor((c+l)/2+r.left),r.yCenter=Math.floor((d+u)/2+r.top+r.paddingTop)},getIndexAngle:function(t){var i=this.chart,a=(t*(360/i.data.labels.length)+((i.options||{}).startAngle||0))%360;return(a<0?a+360:a)*Math.PI*2/360},getDistanceFromCenterForValue:function(t){var i=this;if(V.isNullOrUndef(t))return NaN;var a=i.drawingArea/(i.max-i.min);return i.options.ticks.reverse?(i.max-t)*a:(t-i.min)*a},getPointPosition:function(t,i){var a=this,o=a.getIndexAngle(t)-Math.PI/2;return{x:Math.cos(o)*i+a.xCenter,y:Math.sin(o)*i+a.yCenter}},getPointPositionForValue:function(t,i){return this.getPointPosition(t,this.getDistanceFromCenterForValue(i))},getBasePosition:function(t){var i=this,a=i.min,o=i.max;return i.getPointPositionForValue(t||0,i.beginAtZero?0:a<0&&o<0?o:a>0&&o>0?a:0)},_drawGrid:function(){var t,i,a,o=this,r=o.ctx,l=o.options,c=l.gridLines,d=l.angleLines,u=Se(d.lineWidth,c.lineWidth),h=Se(d.color,c.color);if(l.pointLabels.display&&drawPointLabels(o),c.display&&V.each(o.ticks,(function(t,a){0!==a&&(i=o.getDistanceFromCenterForValue(o.ticksAsNumbers[a]),drawRadiusLine(o,c,i,a))})),d.display&&u&&h){for(r.save(),r.lineWidth=u,r.strokeStyle=h,r.setLineDash&&(r.setLineDash(Pe([d.borderDash,c.borderDash,[]])),r.lineDashOffset=Pe([d.borderDashOffset,c.borderDashOffset,0])),t=o.chart.data.labels.length-1;t>=0;t--)i=o.getDistanceFromCenterForValue(l.ticks.reverse?o.min:o.max),a=o.getPointPosition(t,i),r.beginPath(),r.moveTo(o.xCenter,o.yCenter),r.lineTo(a.x,a.y),r.stroke();r.restore()}},_drawLabels:function(){var t=this,i=t.ctx,a=t.options.ticks;if(a.display){var o,r,l=t.getIndexAngle(0),c=V.options._parseFont(a),d=Se(a.fontColor,S.global.defaultFontColor);i.save(),i.font=c.string,i.translate(t.xCenter,t.yCenter),i.rotate(l),i.textAlign="center",i.textBaseline="middle",V.each(t.ticks,(function(l,u){(0!==u||a.reverse)&&(o=t.getDistanceFromCenterForValue(t.ticksAsNumbers[u]),a.showLabelBackdrop&&(r=i.measureText(l).width,i.fillStyle=a.backdropColor,i.fillRect(-r/2-a.backdropPaddingX,-o-c.size/2-a.backdropPaddingY,r+2*a.backdropPaddingX,c.size+2*a.backdropPaddingY)),i.fillStyle=d,i.fillText(l,0,-o))})),i.restore()}},_drawTitle:V.noop}),Fe=De;Oe._defaults=Fe;var Ve=V._deprecated,ze=V.options.resolve,Be=V.valueOrDefault,Le=Number.MIN_SAFE_INTEGER||-9007199254740991,Ne=Number.MAX_SAFE_INTEGER||9007199254740991,Re={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Ee=Object.keys(Re);function sorter(t,i){return t-i}function arrayUnique(t){var i,a,o,r={},l=[];for(i=0,a=t.length;i<a;++i)r[o=t[i]]||(r[o]=!0,l.push(o));return l}function getMin(t){return V.valueOrDefault(t.time.min,t.ticks.min)}function getMax(t){return V.valueOrDefault(t.time.max,t.ticks.max)}function buildLookupTable(t,i,a,o){if("linear"===o||!t.length)return[{time:i,pos:0},{time:a,pos:1}];var r,l,c,d,u,h=[],m=[i];for(r=0,l=t.length;r<l;++r)(d=t[r])>i&&d<a&&m.push(d);for(m.push(a),r=0,l=m.length;r<l;++r)u=m[r+1],c=m[r-1],d=m[r],void 0!==c&&void 0!==u&&Math.round((u+c)/2)===d||h.push({time:d,pos:r/(l-1)});return h}function lookup(t,i,a){for(var o,r,l,c=0,d=t.length-1;c>=0&&c<=d;){if(r=t[(o=c+d>>1)-1]||null,l=t[o],!r)return{lo:null,hi:l};if(l[i]<a)c=o+1;else{if(!(r[i]>a))return{lo:r,hi:l};d=o-1}}return{lo:l,hi:null}}function interpolate$1(t,i,a,o){var r=lookup(t,i,a),l=r.lo?r.hi?r.lo:t[t.length-2]:t[0],c=r.lo?r.hi?r.hi:t[t.length-1]:t[1],d=c[i]-l[i],u=d?(a-l[i])/d:0,h=(c[o]-l[o])*u;return l[o]+h}function toTimestamp(t,i){var a=t._adapter,o=t.options.time,r=o.parser,l=r||o.format,c=i;return"function"==typeof r&&(c=r(c)),V.isFinite(c)||(c="string"==typeof l?a.parse(c,l):a.parse(c)),null!==c?+c:(r||"function"!=typeof l||(c=l(i),V.isFinite(c)||(c=a.parse(c))),c)}function parse(t,i){if(V.isNullOrUndef(i))return null;var a=t.options.time,o=toTimestamp(t,t.getRightValue(i));return null===o||a.round&&(o=+t._adapter.startOf(o,a.round)),o}function determineUnitForAutoTicks(t,i,a,o){var r,l,c,d=Ee.length;for(r=Ee.indexOf(t);r<d-1;++r)if(c=(l=Re[Ee[r]]).steps?l.steps:Ne,l.common&&Math.ceil((a-i)/(c*l.size))<=o)return Ee[r];return Ee[d-1]}function determineUnitForFormatting(t,i,a,o,r){var l,c;for(l=Ee.length-1;l>=Ee.indexOf(a);l--)if(c=Ee[l],Re[c].common&&t._adapter.diff(r,o,c)>=i-1)return c;return Ee[a?Ee.indexOf(a):0]}function determineMajorUnit(t){for(var i=Ee.indexOf(t)+1,a=Ee.length;i<a;++i)if(Re[Ee[i]].common)return Ee[i]}function generate(t,i,a,o){var r,l=t._adapter,c=t.options,d=c.time,u=d.unit||determineUnitForAutoTicks(d.minUnit,i,a,o),h=ze([d.stepSize,d.unitStepSize,1]),m="week"===u&&d.isoWeekday,g=i,p=[];if(m&&(g=+l.startOf(g,"isoWeek",m)),g=+l.startOf(g,m?"day":u),l.diff(a,i,u)>1e5*h)throw i+" and "+a+" are too far apart with stepSize of "+h+" "+u;for(r=g;r<a;r=+l.add(r,h,u))p.push(r);return r!==a&&"ticks"!==c.bounds||p.push(r),p}function computeOffsets(t,i,a,o,r){var l,c,d=0,u=0;return r.offset&&i.length&&(l=interpolate$1(t,"time",i[0],"pos"),d=1===i.length?1-l:(interpolate$1(t,"time",i[1],"pos")-l)/2,c=interpolate$1(t,"time",i[i.length-1],"pos"),u=1===i.length?c:(c-interpolate$1(t,"time",i[i.length-2],"pos"))/2),{start:d,end:u,factor:1/(d+1+u)}}function setMajorTicks(t,i,a,o){var r,l,c=t._adapter,d=+c.startOf(i[0].value,o),u=i[i.length-1].value;for(r=d;r<=u;r=+c.add(r,1,o))(l=a[r])>=0&&(i[l].major=!0);return i}function ticksFromTimestamps(t,i,a){var o,r,l=[],c={},d=i.length;for(o=0;o<d;++o)c[r=i[o]]=o,l.push({value:r,major:!1});return 0!==d&&a?setMajorTicks(t,l,c,a):l}var je={position:"bottom",distribution:"linear",bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,displayFormat:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{autoSkip:!1,source:"auto",major:{enabled:!1}}},We=de.extend({initialize:function(){this.mergeTicksOptions(),de.prototype.initialize.call(this)},update:function(){var t=this,i=t.options,a=i.time||(i.time={}),o=t._adapter=new ie._date(i.adapters.date);return Ve("time scale",a.format,"time.format","time.parser"),Ve("time scale",a.min,"time.min","ticks.min"),Ve("time scale",a.max,"time.max","ticks.max"),V.mergeIf(a.displayFormats,o.formats()),de.prototype.update.apply(t,arguments)},getRightValue:function(t){return t&&void 0!==t.t&&(t=t.t),de.prototype.getRightValue.call(this,t)},determineDataLimits:function(){var t,i,a,o,r,l,c,d=this,u=d.chart,h=d._adapter,m=d.options,g=m.time.unit||"day",p=Ne,v=Le,b=[],_=[],y=[],x=d._getLabels();for(t=0,a=x.length;t<a;++t)y.push(parse(d,x[t]));for(t=0,a=(u.data.datasets||[]).length;t<a;++t)if(u.isDatasetVisible(t))if(r=u.data.datasets[t].data,V.isObject(r[0]))for(_[t]=[],i=0,o=r.length;i<o;++i)l=parse(d,r[i]),b.push(l),_[t][i]=l;else _[t]=y.slice(0),c||(b=b.concat(y),c=!0);else _[t]=[];y.length&&(p=Math.min(p,y[0]),v=Math.max(v,y[y.length-1])),b.length&&(b=a>1?arrayUnique(b).sort(sorter):b.sort(sorter),p=Math.min(p,b[0]),v=Math.max(v,b[b.length-1])),p=parse(d,getMin(m))||p,v=parse(d,getMax(m))||v,p=p===Ne?+h.startOf(Date.now(),g):p,v=v===Le?+h.endOf(Date.now(),g)+1:v,d.min=Math.min(p,v),d.max=Math.max(p+1,v),d._table=[],d._timestamps={data:b,datasets:_,labels:y}},buildTicks:function(){var t,i,a,o=this,r=o.min,l=o.max,c=o.options,d=c.ticks,u=c.time,h=o._timestamps,m=[],g=o.getLabelCapacity(r),p=d.source,v=c.distribution;for(h="data"===p||"auto"===p&&"series"===v?h.data:"labels"===p?h.labels:generate(o,r,l,g),"ticks"===c.bounds&&h.length&&(r=h[0],l=h[h.length-1]),r=parse(o,getMin(c))||r,l=parse(o,getMax(c))||l,t=0,i=h.length;t<i;++t)(a=h[t])>=r&&a<=l&&m.push(a);return o.min=r,o.max=l,o._unit=u.unit||(d.autoSkip?determineUnitForAutoTicks(u.minUnit,o.min,o.max,g):determineUnitForFormatting(o,m.length,u.minUnit,o.min,o.max)),o._majorUnit=d.major.enabled&&"year"!==o._unit?determineMajorUnit(o._unit):void 0,o._table=buildLookupTable(o._timestamps.data,r,l,v),o._offsets=computeOffsets(o._table,m,r,l,c),d.reverse&&m.reverse(),ticksFromTimestamps(o,m,o._majorUnit)},getLabelForIndex:function(t,i){var a=this,o=a._adapter,r=a.chart.data,l=a.options.time,c=r.labels&&t<r.labels.length?r.labels[t]:"",d=r.datasets[i].data[t];return V.isObject(d)&&(c=a.getRightValue(d)),l.tooltipFormat?o.format(toTimestamp(a,c),l.tooltipFormat):"string"==typeof c?c:o.format(toTimestamp(a,c),l.displayFormats.datetime)},tickFormatFunction:function(t,i,a,o){var r=this,l=r._adapter,c=r.options,d=c.time.displayFormats,u=d[r._unit],h=r._majorUnit,m=d[h],g=a[i],p=c.ticks,v=h&&m&&g&&g.major,b=l.format(t,o||(v?m:u)),_=v?p.major:p.minor,y=ze([_.callback,_.userCallback,p.callback,p.userCallback]);return y?y(b,i,a):b},convertTicksToLabels:function(t){var i,a,o=[];for(i=0,a=t.length;i<a;++i)o.push(this.tickFormatFunction(t[i].value,i,t));return o},getPixelForOffset:function(t){var i=this,a=i._offsets,o=interpolate$1(i._table,"time",t,"pos");return i.getPixelForDecimal((a.start+o)*a.factor)},getPixelForValue:function(t,i,a){var o=this,r=null;if(void 0!==i&&void 0!==a&&(r=o._timestamps.datasets[a][i]),null===r&&(r=parse(o,t)),null!==r)return o.getPixelForOffset(r)},getPixelForTick:function(t){var i=this.getTicks();return t>=0&&t<i.length?this.getPixelForOffset(i[t].value):null},getValueForPixel:function(t){var i=this,a=i._offsets,o=i.getDecimalForPixel(t)/a.factor-a.end,r=interpolate$1(i._table,"pos",o,"time");return i._adapter._create(r)},_getLabelSize:function(t){var i=this,a=i.options.ticks,o=i.ctx.measureText(t).width,r=V.toRadians(i.isHorizontal()?a.maxRotation:a.minRotation),l=Math.cos(r),c=Math.sin(r),d=Be(a.fontSize,S.global.defaultFontSize);return{w:o*l+d*c,h:o*c+d*l}},getLabelWidth:function(t){return this._getLabelSize(t).w},getLabelCapacity:function(t){var i=this,a=i.options.time,o=a.displayFormats,r=o[a.unit]||o.millisecond,l=i.tickFormatFunction(t,0,ticksFromTimestamps(i,[t],i._majorUnit),r),c=i._getLabelSize(l),d=Math.floor(i.isHorizontal()?i.width/c.w:i.height/c.h);return i.options.offset&&d--,d>0?d:1}}),He=je;We._defaults=He;var $e={category:me,linear:xe,logarithmic:Ie,radialLinear:Oe,time:We},Ue={datetime:"MMM D, YYYY, h:mm:ss a",millisecond:"h:mm:ss.SSS a",second:"h:mm:ss a",minute:"h:mm a",hour:"hA",day:"MMM D",week:"ll",month:"MMM YYYY",quarter:"[Q]Q - YYYY",year:"YYYY"};ie._date.override("function"==typeof t?{_id:"moment",formats:function(){return Ue},parse:function(i,a){return"string"==typeof i&&"string"==typeof a?i=t(i,a):i instanceof t||(i=t(i)),i.isValid()?i.valueOf():null},format:function(i,a){return t(i).format(a)},add:function(i,a,o){return t(i).add(a,o).valueOf()},diff:function(i,a,o){return t(i).diff(t(a),o)},startOf:function(i,a,o){return i=t(i),"isoWeek"===a?i.isoWeekday(o).valueOf():i.startOf(a).valueOf()},endOf:function(i,a){return t(i).endOf(a).valueOf()},_create:function(i){return t(i)}}:{}),S._set("global",{plugins:{filler:{propagate:!0}}});var qe={dataset:function(t){var i=t.fill,a=t.chart,o=a.getDatasetMeta(i),r=o&&a.isDatasetVisible(i)&&o.dataset._children||[],l=r.length||0;return l?function(t,i){return i<l&&r[i]._view||null}:null},boundary:function(t){var i=t.boundary,a=i?i.x:null,o=i?i.y:null;return V.isArray(i)?function(t,a){return i[a]}:function(t){return{x:null===a?t.x:a,y:null===o?t.y:o}}}};function decodeFill(t,i,a){var o,r=t._model||{},l=r.fill;if(void 0===l&&(l=!!r.backgroundColor),!1===l||null===l)return!1;if(!0===l)return"origin";if(o=parseFloat(l,10),isFinite(o)&&Math.floor(o)===o)return"-"!==l[0]&&"+"!==l[0]||(o=i+o),!(o===i||o<0||o>=a)&&o;switch(l){case"bottom":return"start";case"top":return"end";case"zero":return"origin";case"origin":case"start":case"end":return l;default:return!1}}function computeLinearBoundary(t){var i,a=t.el._model||{},o=t.el._scale||{},r=t.fill,l=null;if(isFinite(r))return null;if("start"===r?l=void 0===a.scaleBottom?o.bottom:a.scaleBottom:"end"===r?l=void 0===a.scaleTop?o.top:a.scaleTop:void 0!==a.scaleZero?l=a.scaleZero:o.getBasePixel&&(l=o.getBasePixel()),null!=l){if(void 0!==l.x&&void 0!==l.y)return l;if(V.isFinite(l))return{x:(i=o.isHorizontal())?l:null,y:i?null:l}}return null}function computeCircularBoundary(t){var i,a,o,r,l,c=t.el._scale,d=c.options,u=c.chart.data.labels.length,h=t.fill,m=[];if(!u)return null;for(i=d.ticks.reverse?c.max:c.min,a=d.ticks.reverse?c.min:c.max,o=c.getPointPositionForValue(0,i),r=0;r<u;++r)l="start"===h||"end"===h?c.getPointPositionForValue(r,"start"===h?i:a):c.getBasePosition(r),d.gridLines.circular&&(l.cx=o.x,l.cy=o.y,l.angle=c.getIndexAngle(r)-Math.PI/2),m.push(l);return m}function computeBoundary(t){return(t.el._scale||{}).getPointPositionForValue?computeCircularBoundary(t):computeLinearBoundary(t)}function resolveTarget(t,i,a){var o,r=t[i].fill,l=[i];if(!a)return r;for(;!1!==r&&-1===l.indexOf(r);){if(!isFinite(r))return r;if(!(o=t[r]))return!1;if(o.visible)return r;l.push(r),r=o.fill}return!1}function createMapper(t){var i=t.fill,a="dataset";return!1===i?null:(isFinite(i)||(a="boundary"),qe[a](t))}function isDrawable(t){return t&&!t.skip}function drawArea(t,i,a,o,r){var l,c,d,u;if(o&&r){for(t.moveTo(i[0].x,i[0].y),l=1;l<o;++l)V.canvas.lineTo(t,i[l-1],i[l]);if(void 0===a[0].angle)for(t.lineTo(a[r-1].x,a[r-1].y),l=r-1;l>0;--l)V.canvas.lineTo(t,a[l],a[l-1],!0);else for(c=a[0].cx,d=a[0].cy,u=Math.sqrt(Math.pow(a[0].x-c,2)+Math.pow(a[0].y-d,2)),l=r-1;l>0;--l)t.arc(c,d,u,a[l].angle,a[l-1].angle,!0)}}function doFill(t,i,a,o,r,l){var c,d,u,h,m,g,p,v,b=i.length,_=o.spanGaps,y=[],x=[],w=0,C=0;for(t.beginPath(),c=0,d=b;c<d;++c)m=a(h=i[u=c%b]._view,u,o),g=isDrawable(h),p=isDrawable(m),l&&void 0===v&&g&&(d=b+(v=c+1)),g&&p?(w=y.push(h),C=x.push(m)):w&&C&&(_?(g&&y.push(h),p&&x.push(m)):(drawArea(t,y,x,w,C),w=C=0,y=[],x=[]));drawArea(t,y,x,w,C),t.closePath(),t.fillStyle=r,t.fill()}var Ke={id:"filler",afterDatasetsUpdate:function(t,i){var a,o,r,l,c=(t.data.datasets||[]).length,d=i.propagate,u=[];for(o=0;o<c;++o)l=null,(r=(a=t.getDatasetMeta(o)).dataset)&&r._model&&r instanceof it.Line&&(l={visible:t.isDatasetVisible(o),fill:decodeFill(r,o,c),chart:t,el:r}),a.$filler=l,u.push(l);for(o=0;o<c;++o)(l=u[o])&&(l.fill=resolveTarget(u,o,d),l.boundary=computeBoundary(l),l.mapper=createMapper(l))},beforeDatasetsDraw:function(t){var i,a,o,r,l,c,d,u=t._getSortedVisibleDatasetMetas(),h=t.ctx;for(a=u.length-1;a>=0;--a)(i=u[a].$filler)&&i.visible&&(r=(o=i.el)._view,l=o._children||[],c=i.mapper,d=r.backgroundColor||S.global.defaultColor,c&&d&&l.length&&(V.canvas.clipArea(h,t.chartArea),doFill(h,l,c,r,d,o._loop),V.canvas.unclipArea(h)))}},Ye=V.rtl.getRtlAdapter,Ge=V.noop,Ze=V.valueOrDefault;function getBoxWidth(t,i){return t.usePointStyle&&t.boxWidth>i?i:t.boxWidth}S._set("global",{legend:{display:!0,position:"top",align:"center",fullWidth:!0,reverse:!1,weight:1e3,onClick:function(t,i){var a=i.datasetIndex,o=this.chart,r=o.getDatasetMeta(a);r.hidden=null===r.hidden?!o.data.datasets[a].hidden:null,o.update()},onHover:null,onLeave:null,labels:{boxWidth:40,padding:10,generateLabels:function(t){var i=t.data.datasets,a=t.options.legend||{},o=a.labels&&a.labels.usePointStyle;return t._getSortedDatasetMetas().map((function(a){var r=a.controller.getStyle(o?0:void 0);return{text:i[a.index].label,fillStyle:r.backgroundColor,hidden:!t.isDatasetVisible(a.index),lineCap:r.borderCapStyle,lineDash:r.borderDash,lineDashOffset:r.borderDashOffset,lineJoin:r.borderJoinStyle,lineWidth:r.borderWidth,strokeStyle:r.borderColor,pointStyle:r.pointStyle,rotation:r.rotation,datasetIndex:a.index}}),this)}}},legendCallback:function(t){var i,a,o,r=document.createElement("ul"),l=t.data.datasets;for(r.setAttribute("class",t.id+"-legend"),i=0,a=l.length;i<a;i++)(o=r.appendChild(document.createElement("li"))).appendChild(document.createElement("span")).style.backgroundColor=l[i].backgroundColor,l[i].label&&o.appendChild(document.createTextNode(l[i].label));return r.outerHTML}});var Xe=E.extend({initialize:function(t){var i=this;V.extend(i,t),i.legendHitBoxes=[],i._hoveredItem=null,i.doughnutMode=!1},beforeUpdate:Ge,update:function(t,i,a){var o=this;return o.beforeUpdate(),o.maxWidth=t,o.maxHeight=i,o.margins=a,o.beforeSetDimensions(),o.setDimensions(),o.afterSetDimensions(),o.beforeBuildLabels(),o.buildLabels(),o.afterBuildLabels(),o.beforeFit(),o.fit(),o.afterFit(),o.afterUpdate(),o.minSize},afterUpdate:Ge,beforeSetDimensions:Ge,setDimensions:function(){var t=this;t.isHorizontal()?(t.width=t.maxWidth,t.left=0,t.right=t.width):(t.height=t.maxHeight,t.top=0,t.bottom=t.height),t.paddingLeft=0,t.paddingTop=0,t.paddingRight=0,t.paddingBottom=0,t.minSize={width:0,height:0}},afterSetDimensions:Ge,beforeBuildLabels:Ge,buildLabels:function(){var t=this,i=t.options.labels||{},a=V.callback(i.generateLabels,[t.chart],t)||[];i.filter&&(a=a.filter((function(a){return i.filter(a,t.chart.data)}))),t.options.reverse&&a.reverse(),t.legendItems=a},afterBuildLabels:Ge,beforeFit:Ge,fit:function(){var t=this,i=t.options,a=i.labels,o=i.display,r=t.ctx,l=V.options._parseFont(a),c=l.size,d=t.legendHitBoxes=[],u=t.minSize,h=t.isHorizontal();if(h?(u.width=t.maxWidth,u.height=o?10:0):(u.width=o?10:0,u.height=t.maxHeight),o){if(r.font=l.string,h){var m=t.lineWidths=[0],g=0;r.textAlign="left",r.textBaseline="middle",V.each(t.legendItems,(function(t,i){var o=getBoxWidth(a,c)+c/2+r.measureText(t.text).width;(0===i||m[m.length-1]+o+2*a.padding>u.width)&&(g+=c+a.padding,m[m.length-(i>0?0:1)]=0),d[i]={left:0,top:0,width:o,height:c},m[m.length-1]+=o+a.padding})),u.height+=g}else{var p=a.padding,v=t.columnWidths=[],b=t.columnHeights=[],_=a.padding,y=0,x=0;V.each(t.legendItems,(function(t,i){var o=getBoxWidth(a,c)+c/2+r.measureText(t.text).width;i>0&&x+c+2*p>u.height&&(_+=y+a.padding,v.push(y),b.push(x),y=0,x=0),y=Math.max(y,o),x+=c+p,d[i]={left:0,top:0,width:o,height:c}})),_+=y,v.push(y),b.push(x),u.width+=_}t.width=u.width,t.height=u.height}else t.width=u.width=t.height=u.height=0},afterFit:Ge,isHorizontal:function(){return"top"===this.options.position||"bottom"===this.options.position},draw:function(){var t=this,i=t.options,a=i.labels,o=S.global,r=o.defaultColor,l=o.elements.line,c=t.height,d=t.columnHeights,u=t.width,h=t.lineWidths;if(i.display){var m,g=Ye(i.rtl,t.left,t.minSize.width),p=t.ctx,v=Ze(a.fontColor,o.defaultFontColor),b=V.options._parseFont(a),_=b.size;p.textAlign=g.textAlign("left"),p.textBaseline="middle",p.lineWidth=.5,p.strokeStyle=v,p.fillStyle=v,p.font=b.string;var y=getBoxWidth(a,_),x=t.legendHitBoxes,drawLegendBox=function(t,i,o){if(!(isNaN(y)||y<=0)){p.save();var c=Ze(o.lineWidth,l.borderWidth);if(p.fillStyle=Ze(o.fillStyle,r),p.lineCap=Ze(o.lineCap,l.borderCapStyle),p.lineDashOffset=Ze(o.lineDashOffset,l.borderDashOffset),p.lineJoin=Ze(o.lineJoin,l.borderJoinStyle),p.lineWidth=c,p.strokeStyle=Ze(o.strokeStyle,r),p.setLineDash&&p.setLineDash(Ze(o.lineDash,l.borderDash)),a&&a.usePointStyle){var d=y*Math.SQRT2/2,u=g.xPlus(t,y/2),h=i+_/2;V.canvas.drawPoint(p,o.pointStyle,d,u,h,o.rotation)}else p.fillRect(g.leftForLtr(t,y),i,y,_),0!==c&&p.strokeRect(g.leftForLtr(t,y),i,y,_);p.restore()}},fillText=function(t,i,a,o){var r=_/2,l=g.xPlus(t,y+r),c=i+r;p.fillText(a.text,l,c),a.hidden&&(p.beginPath(),p.lineWidth=2,p.moveTo(l,c),p.lineTo(g.xPlus(l,o),c),p.stroke())},alignmentOffset=function(t,o){switch(i.align){case"start":return a.padding;case"end":return t-o;default:return(t-o+a.padding)/2}},w=t.isHorizontal();m=w?{x:t.left+alignmentOffset(u,h[0]),y:t.top+a.padding,line:0}:{x:t.left+a.padding,y:t.top+alignmentOffset(c,d[0]),line:0},V.rtl.overrideTextDirection(t.ctx,i.textDirection);var C=_+a.padding;V.each(t.legendItems,(function(i,o){var r=p.measureText(i.text).width,l=y+_/2+r,v=m.x,b=m.y;g.setWidth(t.minSize.width),w?o>0&&v+l+a.padding>t.left+t.minSize.width&&(b=m.y+=C,m.line++,v=m.x=t.left+alignmentOffset(u,h[m.line])):o>0&&b+C>t.top+t.minSize.height&&(v=m.x=v+t.columnWidths[m.line]+a.padding,m.line++,b=m.y=t.top+alignmentOffset(c,d[m.line]));var M=g.x(v);drawLegendBox(M,b,i),x[o].left=g.leftForLtr(M,x[o].width),x[o].top=b,fillText(M,b,i,r),w?m.x+=l+a.padding:m.y+=C})),V.rtl.restoreTextDirection(t.ctx,i.textDirection)}},_getLegendItemAt:function(t,i){var a,o,r,l=this;if(t>=l.left&&t<=l.right&&i>=l.top&&i<=l.bottom)for(r=l.legendHitBoxes,a=0;a<r.length;++a)if(t>=(o=r[a]).left&&t<=o.left+o.width&&i>=o.top&&i<=o.top+o.height)return l.legendItems[a];return null},handleEvent:function(t){var i,a=this,o=a.options,r="mouseup"===t.type?"click":t.type;if("mousemove"===r){if(!o.onHover&&!o.onLeave)return}else{if("click"!==r)return;if(!o.onClick)return}i=a._getLegendItemAt(t.x,t.y),"click"===r?i&&o.onClick&&o.onClick.call(a,t.native,i):(o.onLeave&&i!==a._hoveredItem&&(a._hoveredItem&&o.onLeave.call(a,t.native,a._hoveredItem),a._hoveredItem=i),o.onHover&&i&&o.onHover.call(a,t.native,i))}});function createNewLegendAndAttach(t,i){var a=new Xe({ctx:t.ctx,options:i,chart:t});Ot.configure(t,a,i),Ot.addBox(t,a),t.legend=a}var Je={id:"legend",_element:Xe,beforeInit:function(t){var i=t.options.legend;i&&createNewLegendAndAttach(t,i)},beforeUpdate:function(t){var i=t.options.legend,a=t.legend;i?(V.mergeIf(i,S.global.legend),a?(Ot.configure(t,a,i),a.options=i):createNewLegendAndAttach(t,i)):a&&(Ot.removeBox(t,a),delete t.legend)},afterEvent:function(t,i){var a=t.legend;a&&a.handleEvent(i)}},Qe=V.noop;S._set("global",{title:{display:!1,fontStyle:"bold",fullWidth:!0,padding:10,position:"top",text:"",weight:2e3}});var tn=E.extend({initialize:function(t){var i=this;V.extend(i,t),i.legendHitBoxes=[]},beforeUpdate:Qe,update:function(t,i,a){var o=this;return o.beforeUpdate(),o.maxWidth=t,o.maxHeight=i,o.margins=a,o.beforeSetDimensions(),o.setDimensions(),o.afterSetDimensions(),o.beforeBuildLabels(),o.buildLabels(),o.afterBuildLabels(),o.beforeFit(),o.fit(),o.afterFit(),o.afterUpdate(),o.minSize},afterUpdate:Qe,beforeSetDimensions:Qe,setDimensions:function(){var t=this;t.isHorizontal()?(t.width=t.maxWidth,t.left=0,t.right=t.width):(t.height=t.maxHeight,t.top=0,t.bottom=t.height),t.paddingLeft=0,t.paddingTop=0,t.paddingRight=0,t.paddingBottom=0,t.minSize={width:0,height:0}},afterSetDimensions:Qe,beforeBuildLabels:Qe,buildLabels:Qe,afterBuildLabels:Qe,beforeFit:Qe,fit:function(){var t,i=this,a=i.options,o=i.minSize={},r=i.isHorizontal();a.display?(t=(V.isArray(a.text)?a.text.length:1)*V.options._parseFont(a).lineHeight+2*a.padding,i.width=o.width=r?i.maxWidth:t,i.height=o.height=r?t:i.maxHeight):i.width=o.width=i.height=o.height=0},afterFit:Qe,isHorizontal:function(){var t=this.options.position;return"top"===t||"bottom"===t},draw:function(){var t=this,i=t.ctx,a=t.options;if(a.display){var o,r,l,c=V.options._parseFont(a),d=c.lineHeight,u=d/2+a.padding,h=0,m=t.top,g=t.left,p=t.bottom,v=t.right;i.fillStyle=V.valueOrDefault(a.fontColor,S.global.defaultFontColor),i.font=c.string,t.isHorizontal()?(r=g+(v-g)/2,l=m+u,o=v-g):(r="left"===a.position?g+u:v-u,l=m+(p-m)/2,o=p-m,h=Math.PI*("left"===a.position?-.5:.5)),i.save(),i.translate(r,l),i.rotate(h),i.textAlign="center",i.textBaseline="middle";var b=a.text;if(V.isArray(b))for(var _=0,y=0;y<b.length;++y)i.fillText(b[y],0,_,o),_+=d;else i.fillText(b,0,0,o);i.restore()}}});function createNewTitleBlockAndAttach(t,i){var a=new tn({ctx:t.ctx,options:i,chart:t});Ot.configure(t,a,i),Ot.addBox(t,a),t.titleBlock=a}var en={},nn=Ke,an=Je,on={id:"title",_element:tn,beforeInit:function(t){var i=t.options.title;i&&createNewTitleBlockAndAttach(t,i)},beforeUpdate:function(t){var i=t.options.title,a=t.titleBlock;i?(V.mergeIf(i,S.global.title),a?(Ot.configure(t,a,i),a.options=i):createNewTitleBlockAndAttach(t,i)):a&&(Ot.removeBox(t,a),delete t.titleBlock)}};for(var rn in en.filler=nn,en.legend=an,en.title=on,ne.helpers=V,core_helpers(),ne._adapters=ie,ne.Animation=W,ne.animationService=H,ne.controllers=Tt,ne.DatasetController=q,ne.defaults=S,ne.Element=E,ne.elements=it,ne.Interaction=Pt,ne.layouts=Ot,ne.platform=qt,ne.plugins=Kt,ne.Scale=de,ne.scaleService=Yt,ne.Ticks=ae,ne.Tooltip=te,ne.helpers.each($e,(function(t,i){ne.scaleService.registerScaleType(i,t,t._defaults)})),en)en.hasOwnProperty(rn)&&ne.plugins.register(en[rn]);ne.platform.initialize();var sn=ne;return"undefined"!=typeof window&&(window.Chart=ne),ne.Chart=ne,ne.Legend=en.legend._element,ne.Title=en.title._element,ne.pluginService=ne.plugins,ne.PluginBase=ne.Element.extend({}),ne.canvasHelpers=ne.helpers.canvas,ne.layoutService=ne.layouts,ne.LinearScaleBase=ve,ne.helpers.each(["Bar","Bubble","Doughnut","Line","PolarArea","Radar","Scatter"],(function(t){ne[t]=function(i,a){return new ne(i,ne.helpers.merge(a||{},{type:t.charAt(0).toLowerCase()+t.slice(1)}))}})),sn}(function(){try{return a(!function webpackMissingModule(){var t=new Error("Cannot find module 'moment'");throw t.code="MODULE_NOT_FOUND",t}())}catch(t){}}())},608:function(t,i,a){"use strict";a(535)},609:function(t,i,a){"use strict";a(536)},610:function(t,i,a){"use strict";a(537)},611:function(t,i,a){"use strict";a(538)},612:function(t,i,a){"use strict";a(539)},613:function(t,i,a){"use strict";a(540)},614:function(t,i,a){"use strict";a(541)},615:function(t,i,a){"use strict";a(542)},616:function(t,i,a){"use strict";a(543)},617:function(t,i,a){"use strict";a(544)},618:function(t,i,a){"use strict";a(545)},619:function(t,i,a){"use strict";a(546)},652:function(t,i,a){"use strict";a.r(i);var o=a(57),r=a.n(o),l=a(408),c=a(415),d=a.n(c),u=a(409),h=a(420),m=a(459),g=a.n(m),p=a(431),v=a(607),b=a.n(v),_=a(647),y=a(649),x=a(419),w=a(430),C={name:"AgendaItemVotingHeader",props:{agendaItem:{type:Object,required:!0},personIsAllowedToVote:{type:Boolean,required:!0}},computed:{authUserIsMeetingCreator:function authUserIsMeetingCreator(){return 1==this.agendaItem.auth_user_is_meeting_creator},authUserIsMeetingChairman:function authUserIsMeetingChairman(){return 1==this.agendaItem.auth_user_is_meeting_chairman},currentUser:function currentUser(){return this.$store.state.user},onlyOwnVoteVisible:function onlyOwnVoteVisible(){return 0==window.settings[9034]}}},M=(a(608),a(407)),k=Object(M.a)(C,(function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",{staticClass:"agenda-item-user-votes-wrapper"},[t.authUserIsMeetingChairman||t.authUserIsMeetingCreator?a("div",{staticClass:"agenda-item-voting-hint"},[t._v("\n    Sie dürfen das Abstimmungsergebnis sehen, da Sie Vorsitzender bzw. Ersteller der Sitzung sind.\n  ")]):t.personIsAllowedToVote||1!=t.currentUser.is_administrative_staff?t._e():a("div",{staticClass:"agenda-item-voting-hint"},[t._v("\n    Sie dürfen das Abstimmungsergebnis sehen, da Sie Verwaltungsmitarbeiter sind.\n  ")])])}),[],!1,null,"b60ae952",null).exports,I={name:"AgendaItemVoting",components:{Modal:l.i,MaterialButton:l.e,Editor:w.a,RadioButtons:l.k,AgendaItemVotingHeader:k,Toggle:l.o},directives:{tooltip:l.p},mixins:[u.d,u.e],props:{passedAgendaItem:{required:!0,type:Object},votingOptions:{required:!0,type:Array},isPreVoting:{required:!1,type:Boolean,default:!1}},data:function data(){return{noteText:"",requestRunning:!1,votingSaveStatus:"",agendaItem:null,selectedChartVotingTypeName:null,mounted:!1,doughnutChart:{},selectedVoteTypeId:null,showLegendModal:!1,chartAlreadyRendered:!1,formattedVotingOptions:[],currentTime:new Date,saveNoteTextAsNewComment:!1,saveNoteTextAsNewCommentForFaction:!1,saveNoteTextAsNewCommentForMeeting:!1}},computed:{voterNamesVisible:function voterNamesVisible(){var t=new Date;t.setHours(0,0,0,0);var i=new Date(this.currentMeeting.datum);return i.setHours(0,0,0,0),i<t?1==window.settings[9043]:1==window.settings[9044]},currentMeeting:function currentMeeting(){return this.$store.state.meeting},authUser:function authUser(){return this.$store.state.user},voting:function voting(){return this.isPreVoting?this.agendaItem.pre_voting:this.agendaItem.voting},userVotes:function userVotes(){return this.voting.votings?this.voting.votings:[]},showNoteEditor:function showNoteEditor(){return!!this.noteTextCreationAllowedGenerally&&!!(this.votingRunning&&this.personIsAllowedToVote||this.noteText)},personIsAllowedToVote:function personIsAllowedToVote(){return 1==this.voting.person_can_vote},saveButtonActive:function saveButtonActive(){return""!=this.noteText||this.selectedVoteTypeId},editorConfig:function editorConfig(){var editorConfig={language:"de",placeholder:"Ihre Bemerkung für das Protokoll",toolbar:["heading","|","bold","italic","link","blockQuote"]};return this.voteValueChangeable&&this.votingRunning||(editorConfig.toolbar=[]),editorConfig},noteTextCreationAllowedGenerally:function noteTextCreationAllowedGenerally(){return 1===parseInt(window.settings[9037])},voteValueChangeable:function voteValueChangeable(){return!(this.votingClosed||0==window.settings[9036]&&this.voting.own_voting)&&1==this.voting.person_can_vote},votingScheduleTooltipTitle:function votingScheduleTooltipTitle(){var t=this.format(this.voting.starts_at,"dd.MM.yyyy"),i=this.format(this.voting.ends_at,"dd.MM.yyyy"),a=this.format(this.voting.starts_at,"HH:mm"),o=this.format(this.voting.ends_at,"HH:mm"),votingScheduleTooltipTitle="";return votingScheduleTooltipTitle=t==i?"Stimmabgabe möglich am ".concat(t," zwischen ").concat(a," und ").concat(o," Uhr"):"Stimmabgabe möglich zwischen ".concat(t,", ").concat(a," Uhr und ").concat(i,", ").concat(o," Uhr"),votingScheduleTooltipTitle},votingScheduleTitle:function votingScheduleTitle(){if(!this.votingHasSchedule)return"";var t={locale:x.a,addSuffix:!0};if(this.votingNotYetStarted){var i=new Date(this.voting.starts_at)-this.currentTime;return i<6e4&&i>0?"Abstimmung beginnt in ".concat(Math.floor(i/1e3)," Sekunden"):"Abstimmung beginnt ".concat(Object(_.a)(Object(y.a)(this.voting.starts_at),this.currentTime,t))}var a=new Date(this.voting.ends_at)-this.currentTime;return a<6e4&&a>0?"Abstimmung endet in ".concat(Math.floor(a/1e3)," Sekunden"):"Abstimmung endet ".concat(Object(_.a)(Object(y.a)(this.voting.ends_at),this.currentTime,t))},votingHasSchedule:function votingHasSchedule(){return null!=this.voting.starts_at&&""!=this.voting.starts_at&&null!=this.voting.ends_at&&""!=this.voting.ends_at},trimmedAgendaItemId:function trimmedAgendaItemId(){return this.agendaItem.id.replace(/\|/g,"")},sortedChartVotings:function sortedChartVotings(){if(!this.voting.votings)return{};var t={};return this.voting.votings.forEach((function(i){t[i.voting_type.name]?t[i.voting_type.name].votings.push(i):t[i.voting_type.name]={type:i.voting_type,votings:[i]}})),t},description:function description(){var description="",t="",i=this.isPreVoting?"Vorabstimmung":"Abstimmung";if(this.voting.ends_at){var a=this.format(this.voting.ends_at,"dd.MM.yyyy"),o=this.format(this.voting.ends_at,"HH:mm");t="".concat(a," um ").concat(o)}return this.votingClosed&&!this.votingNotYetStarted?(description="Die ".concat(i," ist beendet."),0==this.currentMeeting.niederschrift_status&&(this.voting.closed_at?description="Die ".concat(i," wurde von ").concat(this.voting.closed_by_person.fullName," am ").concat(this.format(this.voting.closed_at,"dd.MM.yyyy hh:mm")," Uhr geschlossen."):""!==t&&(description="Die ".concat(i," ist am ").concat(t," Uhr abgelaufen."))),0==this.userVotes.length?description+=" Es wurden keine Stimmen abgegeben":description+=" Es wurden ".concat(this.userVotes.length," von ").concat(this.voting.potential_votings_count," möglichen Stimmen abgegeben.")):this.userVotes.length&&(description="".concat(this.userVotes.length," von ").concat(this.voting.potential_votings_count," Stimmen eingegangen")),this.voting.own_voting&&(description+='<br>Sie stimmten für: <span style="font-weight: bold; color: #'.concat(this.voting.own_voting.voting_type.color.replace("#",""),'">').concat(this.voting.own_voting.voting_type.bezeichnung,"</span>")),description},chartOptions:function chartOptions(){return{responsive:!0,maintainAspectRatio:!1,legend:{display:!1}}},chartData:function chartData(){if(!this.userVotes||0==this.userVotes.length)return null;var t={};return this.userVotes.forEach((function(i){i.vote_type_id in t?t[i.vote_type_id].count+=1:(t[i.vote_type_id]={},t[i.vote_type_id].label=i.voting_type.name,t[i.vote_type_id].count=1,t[i.vote_type_id].color="#".concat(i.voting_type.color.replace("#","")))})),{labels:Object(p.map)(t,"label"),datasets:[{backgroundColor:Object(p.map)(t,"color"),data:Object(p.map)(t,"count")}]}},votingRunning:function votingRunning(){return 1!=this.currentMeeting.niederschrift_status&&!this.votingClosed&&!this.votingNotYetStarted},votingNotYetStarted:function votingNotYetStarted(){return!!(this.voting&&this.voting.starts_at&&this.currentTime<new Date(this.voting.starts_at))},votingClosed:function votingClosed(){return 1==this.currentMeeting.niederschrift_status||(!(!this.isPreVoting||!this.agendaItem.voting||"object"!==g()(this.agendaItem.voting)||null===this.agendaItem.voting)||(!!(this.voting.hasOwnProperty("closed_by")&&null!=this.voting.closed_by&&""!=this.voting.closed_by||this.voting.hasOwnProperty("last_possible_vote_given_at")&&null!=this.voting.last_possible_vote_given_at&&""!=this.voting.last_possible_vote_given_at)||this.currentTime>new Date(this.voting.ends_at)))}},watch:{formattedVotingOptions:{deep:!0,handler:function handler(){var t=this;this.formattedVotingOptions.forEach((function(i){i.value&&(t.selectedVoteTypeId=i.id)}))}},votable:{deep:!0,handler:function handler(){var t=this;console.log("votable changed"),this.$nextTick((function(){t.renderChart()}))}},passedAgendaItem:{deep:!0,handler:function handler(){this.agendaItem=this.passedAgendaItem}},agendaItem:{deep:!0,handler:function handler(){this.$emit("update:passed-agenda-item",this.agendaItem)}},selectedVoteTypeId:function selectedVoteTypeId(t){this.$emit("update:passedVoteTypeId",parseInt(t,10))},noteText:function noteText(t){this.$emit("update:passedNoteText",t)}},mounted:function mounted(){var t=this;this.agendaItem=this.passedAgendaItem,this.userVotes&&this.userVotes.length&&this.renderChart(),window.socket&&(window.socket.on("update-voting",(async function(i){if(console.log("update-voting",i),i.votable_id==t.voting.id){var a=-1,o=[];if(t.voterNamesVisible?(t.userVotes&&t.userVotes.length&&(t.userVotes.forEach((function(t,o){t.voter_person_id==i.voter_person_id&&(a=o)})),o=t.userVotes,a>-1&&o.splice(a,1)),o.push(i)):o=i.user_votes,!t.userVotes&&2==window.settings[9035])o=(await t.$webservice.get({id:104,agenda_item_id:t.agendaItem.id})).data.votings;t.isPreVoting?t.$set(t.agendaItem.pre_voting,"votings",o):t.$set(t.agendaItem.voting,"votings",o),o.length==t.voting.potential_votings_count&&t.eventBus.$emit("show-notification",{text:"Es wurden alle Stimmen für ".concat(t.translate("shortenedAgendaItem")," ").concat(t.agendaItem.number," abgegeben."),duration:12e3}),t.renderChart()}})),window.socket.on("close-votable",(function(i){i.votable_id==t.agendaItem.id&&(t.isPreVoting?t.$set(t.agendaItem.pre_voting,"closed_by",i.closed_by):t.$set(t.agendaItem.voting,"closed_by",i.closed_by),t.eventBus.$emit("show-notification",{text:"Die Abstimmung für ".concat(t.translate("shortenedAgendaItem")," ").concat(t.agendaItem.number," ist beendet. Hier klicken für das Gesamtergebnis."),duration:8e3,action:function action(){t.eventBus.$emit("focus-voting",t.agendaItem)}}))})),window.socket.on("update-meeting-voting-schedule",(function(i){i.nummer==t.agendaItem.nummer&&(t.isPreVoting?t.$set(t.agendaItem.pre_voting,"ends_at",i.voting_ends_at):t.$set(t.agendaItem.voting,"ends_at",i.voting_ends_at))}))),this.mounted=!0},created:function created(){var t=this;setInterval((function(){t.currentTime=new Date}),1e3),this.agendaItem=this.passedAgendaItem,this.voting&&this.voting.own_voting&&(this.noteText=this.voting.own_voting.note_text,this.selectedVoteTypeId=this.voting.own_voting.vote_type_id,this.voting.own_voting.note&&this.voting.own_voting.note.id&&(this.saveNoteTextAsNewComment=!0,this.saveNoteTextAsNewCommentForFaction=2==this.voting.own_voting.note.freigabe||3==this.voting.own_voting.note.freigabe,this.saveNoteTextAsNewCommentForMeeting=1==this.voting.own_voting.note.freigabe||3==this.voting.own_voting.note.freigabe)),this.votingOptions.forEach((function(i){t.formattedVotingOptions.push({text:i.name,id:i.id,color:i.color,value:t.selectedVoteTypeId==i.id})}))},methods:{openResults:function openResults(){this.selectedChartVotingTypeName=Object.keys(this.sortedChartVotings)[0],this.showLegendModal=!0},saveUserVote:async function saveUserVote(){this.requestRunning=!0;var t=0;if(this.voting.own_voting&&this.voting.own_voting.note&&this.voting.own_voting.note.id&&!this.saveNoteTextAsNewComment){var i=await this.$webservice.post({id:102,action:2,idnotiz:this.voting.own_voting.note.id});i.data.erfolg&&1==i.data.erfolg&&this.eventBus.$emit("show-notification",{text:"".concat(this.translate("shortenedAgendaItem"),"-Kommentar erfolgreich gelöscht")})}else if(this.saveNoteTextAsNewComment&&this.noteText.length)try{var a,o,r,l={id:102,action:1,notiz_bemerkung:this.noteText.replace(/<[^>]*>?/gm,""),notiz_freigabe_fraktion:this.saveNoteTextAsNewCommentForFaction?"1":"0",notiz_freigabe_gremium:this.saveNoteTextAsNewCommentForMeeting?"1":"0"};null!==(a=this.voting.own_voting)&&void 0!==a&&a.note&&null!==(o=this.voting.own_voting)&&void 0!==o&&null!==(r=o.note)&&void 0!==r&&r.id?l.idnotiz=this.voting.own_voting.note.id:(l.idsitzung=this.passedAgendaItem.nummer,l.idvorlage=this.passedAgendaItem.vorlagennummer,l.idtopstatus=this.passedAgendaItem.status);var c=await this.$webservice.post(l);if(c.data.method){var d="".concat(this.translate("shortenedAgendaItem"),"-Kommentar erfolgreich ");switch(c.data.method){case"updated":t=c.data[0].id_notiz,d+="geändert";break;case"created":t=c.data.id_notiz,d+="angelegt"}this.eventBus.$emit("show-notification",{text:d}),this.$emit("reload-comments")}}catch(h){console.log(h),this.eventBus.$emit("show-notification",{text:"Fehler beim Anlegen des Kommentars"})}try{var u=await this.$webservice.post({id:104,action:"vote",note_text:this.noteText,vote_type_id:this.selectedVoteTypeId,votable_id:this.voting.id,note_id:t});if(this.progressSaved=!0,!u.data.votings)return this.eventBus.$emit("show-notification",{text:"Beim Speichern der Abstimmung ist ein Fehler aufgetreten.",duration:4e3}),void(this.requestRunning=!1);this.isPreVoting?this.$set(this.agendaItem.pre_voting,"own_voting",u.data.own_user_vote):this.$set(this.agendaItem.voting,"own_voting",u.data.own_user_vote),2==window.settings[9035]&&(this.isPreVoting?this.$set(this.agendaItem.pre_voting,"votings",u.data.votings):this.$set(this.agendaItem.voting,"votings",u.data.votings),this.renderChart()),this.eventBus.$emit("show-notification",{text:"Abstimmung erfolgreich gespeichert",duration:4e3})}catch(h){console.warn("an error occured while saving voting",h)}this.requestRunning=!1},chartLegendClickhandler:function chartLegendClickhandler(t,i){this.selectedChartVotingTypeName=i.text,this.showLegendModal=!0},updateChart:function updateChart(){this.doughnutChart.data=this.chartData,this.doughnutChart.options=this.chartOptions,this.doughnutChart.update()},renderChart:function renderChart(){var t=this;this.chartAlreadyRendered?this.updateChart():(this.$nextTick((function(){t.$refs.doughnut&&(t.doughnutChart=new b.a(t.$refs.doughnut.getContext("2d"),{type:"doughnut",data:t.chartData,options:t.chartOptions}),t.$refs.doughnut.onclick=function(i){var a=t.doughnutChart.getElementsAtEvent(i);if(a.length>0){var o=a[0]._index,r=t.doughnutChart.data.labels[o];t.selectedChartVotingTypeName=r,t.showLegendModal=!0}})})),this.chartAlreadyRendered=!0)}}},A=(a(609),Object(M.a)(I,(function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",{staticClass:"agenda-item-voting"},[a("div",[a("agenda-item-voting-header",{attrs:{"agenda-item":t.agendaItem,"person-is-allowed-to-vote":t.personIsAllowedToVote}}),t._v(" "),t.personIsAllowedToVote&&t.votingScheduleTitle&&!t.votingClosed?a("div",{staticClass:"voting-schedule-title"},[a("div",{directives:[{name:"tooltip",rawName:"v-tooltip.bottom",value:t.votingScheduleTooltipTitle,expression:"votingScheduleTooltipTitle",modifiers:{bottom:!0}}],staticClass:"voting-schedule-title-desktop"},[t._v("\n        "+t._s(t.votingScheduleTitle)+"\n      ")]),t._v(" "),a("div",{staticClass:"voting-schedule-title-mobile"},[t._v("\n        "+t._s(t.votingScheduleTooltipTitle)+"\n      ")])]):t._e(),t._v(" "),a("div",{domProps:{innerHTML:t._s(t.description)}}),t._v(" "),a("div",{staticClass:"voting-container"},[t.votingRunning&&t.voteValueChangeable?a("div",{staticClass:"voting-form-wrapper"},[a("div",{staticClass:"select-voting-types-wrapper"},[a("radio-buttons",{model:{value:t.formattedVotingOptions,callback:function(i){t.formattedVotingOptions=i},expression:"formattedVotingOptions"}})],1),t._v(" "),t.showNoteEditor&&!t.isPreVoting?a("div",[a("div",[t._v("\n            Ergänzung für das Protokoll (Ihre Notizen können in das Protokoll übernommen werden):\n          ")]),t._v(" "),a("div",{staticClass:"ckeditor-wrapper"},[a("editor",{attrs:{disabled:!t.voteValueChangeable},model:{value:t.noteText,callback:function(i){t.noteText=i},expression:"noteText"}}),t._v(" "),a("div",{staticClass:"voting-save-as-comment"},[a("toggle",{attrs:{disabled:0===t.noteText.length,text:"Zusätzlich als "+t.translate("shortenedAgendaItem")+"-Kommentar hinterlegen"},model:{value:t.saveNoteTextAsNewComment,callback:function(i){t.saveNoteTextAsNewComment=i},expression:"saveNoteTextAsNewComment"}}),t._v(" "),t.saveNoteTextAsNewComment?a("div",{staticClass:"voting-save-as-comment-children"},[t.authUser.factions&&t.authUser.factions.length?a("toggle",{attrs:{text:"meiner Fraktion ("+t.authUser.factions[0].name+") freigeben"},model:{value:t.saveNoteTextAsNewCommentForFaction,callback:function(i){t.saveNoteTextAsNewCommentForFaction=i},expression:"saveNoteTextAsNewCommentForFaction"}}):t._e(),t._v(" "),a("toggle",{attrs:{text:"Sitzungsteilnehmern freigeben"},model:{value:t.saveNoteTextAsNewCommentForMeeting,callback:function(i){t.saveNoteTextAsNewCommentForMeeting=i},expression:"saveNoteTextAsNewCommentForMeeting"}})],1):t._e()],1)],1)]):t._e(),t._v(" "),t.voteValueChangeable?a("material-button",{staticClass:"voting-save-button",attrs:{text:"Abstimmung speichern",disabled:!t.saveButtonActive||t.requestRunning,loading:t.requestRunning},on:{click:t.saveUserVote}}):t._e()],1):t._e(),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.voting&&t.userVotes&&t.userVotes.length,expression:"voting && userVotes && userVotes.length"}],staticClass:"modal-votings-overview-wrapper"},[a("div",[a("modal",{staticClass:"voting-legend-modal",attrs:{show:t.showLegendModal,"has-close-button":"",title:"Ergebnisse der "+(t.isPreVoting?"Vorabstimmung":"Abstimmung")},on:{"update:show":function(i){t.showLegendModal=i}}},[t.sortedChartVotings?a("div",{staticClass:"voting-legend-users"},[a("table",t._l(Object.keys(t.sortedChartVotings),(function(i){return a("tr",[a("td",{style:"color: #"+t.sortedChartVotings[i].type.color.replace("#","")},[t._v("\n                    "+t._s(i)+"\n                  ")]),t._v(" "),a("td",[t._v(t._s(t.sortedChartVotings[i].votings.length))])])})),0),t._v(" "),t.voterNamesVisible?a("div",{staticClass:"voting-legend-users-separator"}):t._e(),t._v(" "),t.voterNamesVisible?a("table",t._l(t.voting.votings,(function(i){return a("tr",[a("td",[t._v(t._s(i.voter_person.fullName))]),t._v(" "),a("td",{style:"color: #"+i.voting_type.color.replace("#","")},[t._v("\n                    "+t._s(i.voting_type.name)+"\n                  ")])])})),0):t._e()]):t._e()])],1)])]),t._v(" "),t.voting.votings&&t.voting.votings.length>0?a("div",{staticClass:"voting-see-results-button"},[a("material-button",{attrs:{text:"Ergebnis ansehen",outlined:""},on:{click:t.openResults}})],1):t._e()],1),t._v(" "),t.voting.votings&&t.voting.votings.length>0?a("div",{staticClass:"doughnut-chart-wrapper"},[a("canvas",{ref:"doughnut"})]):t._e()])}),[],!1,null,"01974a10",null).exports),S=a(458),T=a(58),P=a.n(T);function _createForOfIteratorHelper(t,i){var a="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!a){if(Array.isArray(t)||(a=function _unsupportedIterableToArray(t,i){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,i);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);if("Map"===a||"Set"===a)return Array.from(t);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return _arrayLikeToArray(t,i)}(t))||i&&t&&"number"==typeof t.length){a&&(t=a);var o=0,r=function F(){};return{s:r,n:function n(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function e(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,d=!1;return{s:function s(){a=a.call(t)},n:function n(){var t=a.next();return c=t.done,t},e:function e(t){d=!0,l=t},f:function f(){try{c||null==a.return||a.return()}finally{if(d)throw l}}}}function _arrayLikeToArray(t,i){(null==i||i>t.length)&&(i=t.length);for(var a=0,o=new Array(i);a<i;a++)o[a]=t[a];return o}var D={components:{Modal:l.i,Toggle:l.o,FilePicker:l.c,MaterialInput:l.f},mixins:[u.e],props:{show:Boolean,commentId:{type:Number,default:0},meetingId:{type:String,default:""},agendaItem:{type:Object,default:function _default(){}}},data:function data(){return{isLoading:!1,removedAttachments:[],comment:{text:"",attachments:[],visibleForFaction:!1,visibleForMeeting:!1,relatedToSubmission:!1}}},computed:{activeUser:function activeUser(){return this.$store.state.user},modalButtons:function modalButtons(){var t=[];return t.push({text:"Speichern",type:"solid",action:this.saveComment}),t}},watch:{commentId:function commentId(t,i){t===i&&0!==i||(this.comment={text:"",attachments:[],visibleForFaction:!1,visibleForMeeting:!1,relatedToSubmission:!1},this.isLoading=!1,this.removedAttachmentIds=[])},show:function show(){this.show?0!==this.commentId&&this.fetchComment():this.comment.attachments=[]}},methods:{showFilePreview:function showFilePreview(t){this.eventBus.$emit("open-file",{src:t.previewSrc?t.previewSrc:t.url,filename:t.fileName,type:t.type.split("/").pop()})},fetchComment:async function fetchComment(){this.isLoading=!0;var t={};try{t=await this.$webservice.get({id:22,idnotiz:this.commentId,idsitzung:this.meetingId,idvorlage:this.agendaItem.vorlagennummer,idtopstatus:this.agendaItem.status})}catch(u){return void console.warn("Error while fetching comment",u)}var i=t.data[0];this.comment.text=i.text,this.comment.visibleForMeeting="1"===i.freigabe||"3"===i.freigabe,this.comment.visibleForFaction="2"===i.freigabe||"3"===i.freigabe,this.comment.relatedToSubmission="vl"===i.typ;for(var a=0;a<i.attachments.length;a+=1){var o=i.attachments[a],r=o.documentName.split("."),l=r[r.length-1],c=await P()({url:o.documentUrl,method:"GET",responseType:"blob"}),d=new File([c.data],o.documentName,{type:"image/".concat(l)});d.extension=l,d.id=o.id,d.comment_attachment_id=o.id,d.fileName=o.beschreibung,d.url=o.documentUrl,this.comment.attachments.push(d)}this.isLoading=!1},deleteAttachment:async function deleteAttachment(t,i){await this.$webservice.post({id:102,action:4,idnotiz:t,idanlage:i.id})},uploadAttachment:async function uploadAttachment(t,i){await this.$webservice.post({id:102,action:3,idnotiz:t,anlage:i,beschreibung:i.name},{headers:{"Content-Type":"multipart/form-data"}})},saveComment:async function saveComment(){var t=this;if(0!==this.comment.text.length||0!==this.comment.attachments.length){var i={id:102,action:1,idsitzung:this.meetingId,idvorlage:this.agendaItem.vorlagennummer,idtopstatus:this.agendaItem.status,notiz_bemerkung:this.comment.text,notiz_freigabe_fraktion:this.comment.visibleForFaction?"1":"0",notiz_freigabe_gremium:this.comment.visibleForMeeting?"1":"0"};this.comment.relatedToSubmission&&(i.notiz_vorlagentyp=!0),0!==this.commentId&&(i.idnotiz=this.commentId),this.isLoading=!0,this.$webservice.post(i).then((async function(i){if(i.data.id_notiz||i.data.erfolg){var a;a=0===t.commentId?i.data.id_notiz:t.commentId;var o,r=_createForOfIteratorHelper(t.comment.attachments);try{for(r.s();!(o=r.n()).done;){var l=o.value;l.id||await t.uploadAttachment(a,l)}}catch(h){r.e(h)}finally{r.f()}var c,d=_createForOfIteratorHelper(t.removedAttachments);try{for(d.s();!(c=d.n()).done;){var u=c.value;await t.deleteAttachment(a,u)}}catch(h){d.e(h)}finally{d.f()}t.isLoading=!1,t.comment={text:"",attachments:[],visibleForFaction:!1,visibleForMeeting:!1,relatedToSubmission:!1},t.$emit("reload"),t.$emit("close"),t.$emit("update:show",!1),window.cachedFiles=[],t.eventBus.$emit("show-notification",{text:"Kommentar erfolgreich gespeichert"})}})).catch((function(t){console.warn("Error while sending comment",t)}))}},removeAttachment:function removeAttachment(t){var i=this;0!==t.id&&this.removedAttachments.push(t),this.comment.attachments.forEach((function(a,o){t.key===a.key&&i.comment.attachments.splice(o,1)}))}}},O=(a(610),Object(M.a)(D,(function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("modal",{staticClass:"comment-modal",attrs:{show:t.show,buttons:t.modalButtons,loading:t.isLoading,"has-close-button":"",title:0===t.commentId?"Neuen Kommentar schreiben":"Kommentar bearbeiten"},on:{close:function(i){return t.$emit("update:show",!1)}}},[a("div",[a("div",[a("material-input",{staticClass:"comment-modal-text",attrs:{type:"textarea",placeholder:"Kommentar"},model:{value:t.comment.text,callback:function(i){t.$set(t.comment,"text",i)},expression:"comment.text"}}),t._v(" "),a("file-picker",{on:{"file-clicked":t.showFilePreview,remove:t.removeAttachment},model:{value:t.comment.attachments,callback:function(i){t.$set(t.comment,"attachments",i)},expression:"comment.attachments"}}),t._v(" "),a("div",{staticClass:"visibility-separator"}),t._v(" "),a("div",{staticClass:"visibility-options"},[a("toggle",{attrs:{checkbox:"",text:"Sitzungsteilnehmern freigeben"},model:{value:t.comment.visibleForMeeting,callback:function(i){t.$set(t.comment,"visibleForMeeting",i)},expression:"comment.visibleForMeeting"}}),t._v(" "),t.agendaItem.submission?a("toggle",{attrs:{checkbox:"",text:"Kommentar "+t.translate("toSubmission")+" (sitzungsübergreifend)"},model:{value:t.comment.relatedToSubmission,callback:function(i){t.$set(t.comment,"relatedToSubmission",i)},expression:"comment.relatedToSubmission"}}):t._e(),t._v(" "),t.activeUser.factions&&t.activeUser.factions.length>0?a("toggle",{attrs:{checkbox:"",text:"Meiner Fraktion ("+t.activeUser.factions[0].Bezeichnung+") freigeben"},model:{value:t.comment.visibleForFaction,callback:function(i){t.$set(t.comment,"visibleForFaction",i)},expression:"comment.visibleForFaction"}}):t._e()],1)],1)])])}),[],!1,null,"237577ff",null).exports),V={name:"AgendaItemComments",components:{Comment:S.a,MaterialButton:l.e,CommentModal:O,LoadingCircle:l.d},mixins:[u.e],props:{agendaItem:{type:Object,required:!0},meetingId:{type:String,required:!0},isLoadingComments:{type:Boolean,required:!0}},data:function data(){return{showAllOwnComments:!1,showAllFactionComments:!1,showAllCommitteeComments:!1,showCommentModal:!1,editCommentId:0}},computed:{commentCategories:function commentCategories(){var t=this,i={own:[],ownCount:0,faction:[],factionCount:0,committee:[],committeeCount:0};return this.agendaItem.comments?(this.agendaItem.comments.forEach((function(a){var o;switch(parseInt(a.freigabe,10)){case 0:(0===i.own.length||t.showAllOwnComments)&&i.own.push(a),i.ownCount+=1;break;case 1:(0===i.committee.length||t.showAllCommitteeComments)&&i.committee.push(a),i.committeeCount+=1;break;case 2:(0===i.faction.length||t.showAllFactionComments)&&i.faction.push(a),i.factionCount+=1;break;case 3:(0===i.committee.length||t.showAllCommitteeComments)&&i.committee.push(a),i.committeeCount+=1;var r=a.fraktion,l=!1;(null===(o=t.$store.state.user.factions)||void 0===o?void 0:o.length)>0&&t.$store.state.user.factions.forEach((function(t){t.Kuerzel==r&&(l=!0)})),l&&(0===i.faction.length||t.showAllFactionComments)&&i.faction.push(a),i.factionCount+=1}})),i):i}},methods:{editComment:function editComment(t){var i=t.id;this.editCommentId=parseInt(i,10),this.showCommentModal=!0}}},z=(a(611),Object(M.a)(V,(function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",[a("comment-modal",{attrs:{show:t.showCommentModal,"agenda-item":t.agendaItem,"meeting-id":t.meetingId,"comment-id":t.editCommentId},on:{"update:show":function(i){t.showCommentModal=i},reload:function(i){return t.$emit("reload-comments")}}}),t._v(" "),t.isLoadingComments?a("div",{staticClass:"comments-loading-wrapper"},[a("loading-circle",{attrs:{size:100}})],1):a("div",[a("material-button",{attrs:{text:"Kommentar verfassen"},on:{click:function(i){t.editCommentId=0,t.showCommentModal=!0}}}),t._v(" "),t.agendaItem.comments&&0!==t.agendaItem.comments.length?t._e():a("div",{staticClass:"comments-placeholder"},[t._v("\n      Es gibt noch keine Kommentare zu diesem "+t._s(t.translate("agendaItem"))+"\n    ")]),t._v(" "),a("div",{staticClass:"comments"},[t.commentCategories.own.length>0?a("div",[a("div",{staticClass:"comments-category-header"},[t._v("\n          Eigene Kommentare\n        ")]),t._v(" "),a("div",t._l(t.commentCategories.own,(function(i){return a("comment",{key:i.id,staticClass:"comment",attrs:{comment:i},on:{edit:function(a){return t.editComment(i)},delete:function(i){return t.$emit("reload-comments")},openAttachment:function(i){return t.$emit("openAttachment",i)}}})})),1),t._v(" "),t.commentCategories.ownCount>1&&!t.showAllOwnComments?a("div",{staticClass:"comments-show-more-button",on:{click:function(i){t.showAllOwnComments=!0}}},[t._v("\n          Mehr eigene Kommentare ("+t._s(t.commentCategories.ownCount-1)+") anzeigen\n        ")]):t._e()]):t._e(),t._v(" "),t.commentCategories.faction.length>0?a("div",[a("div",{staticClass:"comments-category-header"},[t._v("\n          Fraktionskommentare\n        ")]),t._v(" "),a("div",t._l(t.commentCategories.faction,(function(i){return a("comment",{key:i.id,staticClass:"comment",attrs:{comment:i},on:{edit:function(a){return t.editComment(i)},delete:function(i){return t.$emit("reload-comments")},openAttachment:function(i){return t.$emit("openAttachment",i)}}})})),1),t._v(" "),t.commentCategories.factionCount>1&&!t.showAllFactionComments?a("div",{staticClass:"comments-show-more-button",on:{click:function(i){t.showAllFactionComments=!0}}},[t._v("\n          Mehr Fraktionskommentare ("+t._s(t.commentCategories.factionCount-1)+") anzeigen\n        ")]):t._e()]):t._e(),t._v(" "),t.commentCategories.committee.length>0?a("div",[a("div",{staticClass:"comments-category-header"},[t._v("\n          Sitzungskommentare\n        ")]),t._v(" "),a("div",t._l(t.commentCategories.committee,(function(i){return a("comment",{key:i.id,staticClass:"comment",attrs:{comment:i},on:{edit:function(a){return t.editComment(i)},delete:function(i){return t.$emit("reload-comments")},openAttachment:function(i){return t.$emit("openAttachment",i)}}})})),1),t._v(" "),t.commentCategories.committeeCount>1&&!t.showAllCommitteeComments?a("div",{staticClass:"comments-show-more-button",on:{click:function(i){t.showAllCommitteeComments=!0}}},[t._v("\n          Mehr Sitzungskommentare ("+t._s(t.commentCategories.committeeCount-1)+") anzeigen\n        ")]):t._e()]):t._e()])],1)],1)}),[],!1,null,"2c8a7146",null).exports),B={name:"DocumentSearchResult",props:{searchResult:{type:Object,required:!0}},methods:{highlightSpecificFoundLocation:function highlightSpecificFoundLocation(t){return t=(t=t.replace("[b]",'<div class="document-search-result-location-highlight">')).replace("[/b]","</div>")}}},L=(a(612),Object(M.a)(B,(function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",{staticClass:"document-search-result-wrapper"},[a("div",{staticClass:"document-search-result-location",domProps:{innerHTML:t._s(t.highlightSpecificFoundLocation(t.searchResult.vorschau_text))}})])}),[],!1,null,null,null).exports);function ownKeys(t,i){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);i&&(o=o.filter((function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),a.push.apply(a,o)}return a}function _objectSpread(t){for(var i=1;i<arguments.length;i++){var a=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(a),!0).forEach((function(i){r()(t,i,a[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):ownKeys(Object(a)).forEach((function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(a,i))}))}return t}var N={name:"AgendaItemDocuments",components:{MaterialButton:l.e,Attachment:h.a,DocumentSearchResult:L},mixins:[u.d,u.e,u.c],props:{agendaItem:{type:Object,required:!0},meetingId:{type:String,required:!0}},data:function data(){return{}},computed:{agendaItemPortfolioSize:function agendaItemPortfolioSize(){var agendaItemPortfolioSize=0;return this.adjustedAgendaItemDocuments.forEach((function(t){agendaItemPortfolioSize+=parseInt(t.documentSize,10)})),agendaItemPortfolioSize},agendaItemAttachments:function agendaItemAttachments(){var t=[];return this.adjustedAgendaItemDocuments.forEach((function(i){14==i.documentType.id&&t.push(i)})),t},adjustedAgendaItemDocuments:function adjustedAgendaItemDocuments(){var t=this;return this.agendaItem.documents.map((function(i){return _objectSpread(_objectSpread({},i),{},{documentUrl:"".concat(i.documentUrl,"&agenda_item_id=").concat(t.agendaItem.id)})}))},categorizedDocuments:function categorizedDocuments(){var t=this,categorizedDocuments=[],i={4:this.translate("submission"),5:"",6:""};return this.adjustedAgendaItemDocuments.forEach((function(a){if(void 0===a.parentRelationId&&14!=a.documentType.id){var o="";switch(parseInt(a.documentType.id,10)){case 4:o=t.agendaItem.submission.type&&t.agendaItem.submission.type.name?t.agendaItem.submission.type.name:i[a.documentType.id];break;default:o=i[a.documentType.id]?"".concat(i[a.documentType.id]," ").concat(a.documentName):a.documentName}categorizedDocuments.push({document:_objectSpread(_objectSpread({},a),{},{documentName:o}),attachments:[]})}})),this.adjustedAgendaItemDocuments.length>0&&(0===categorizedDocuments.length?this.adjustedAgendaItemDocuments.forEach((function(t){t.documentType&&13==t.documentType.id&&categorizedDocuments.push({document:t,attachments:[]})})):this.adjustedAgendaItemDocuments.forEach((function(t){void 0!==t.parentRelationId&&14!=t.documentType.id&&categorizedDocuments.forEach((function(i){i.document.relationId===t.parentRelationId&&i.attachments.push(t)}))}))),categorizedDocuments},currentMeeting:function currentMeeting(){return this.$store.state.meeting}},methods:{generatePortfolio:function generatePortfolio(){for(var t=[],i=0;i<this.adjustedAgendaItemDocuments.length;i++){var a=this.adjustedAgendaItemDocuments[i];t.push({document_type_id:a.documentType.id,relation_id:a.relationId})}this.eventBus.$emit("open-file",{src:"/documents.php?id=68&documents=".concat(btoa(JSON.stringify(t)),"&generate_custom_portfolio&brief_type_id=3&agenda_item_id=").concat(this.agendaItem.id,"&filename=").concat(this.translate("shortenedAgendaItem"),"-Mappe von ").concat(this.translate("shortenedAgendaItem")," ").concat(this.agendaItem.number," der ").concat(this.currentMeeting.titel),filename:"".concat(this.translate("shortenedAgendaItem"),"-Mappe von ").concat(this.translate("shortenedAgendaItem")," ").concat(this.agendaItem.number," der ").concat(this.currentMeeting.titel," vom ").concat(this.format(this.currentMeeting.datum,"dd.MM.yyyy"))})}}},R=(a(613),Object(M.a)(N,(function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",[t.agendaItem.documents.length>1?a("material-button",{staticClass:"agenda-item-brief-button",attrs:{outlined:"",text:t.translate("shortenedAgendaItem")+"-Mappe anzeigen ("+t.readableBytes(t.agendaItemPortfolioSize)+")"},on:{click:t.generatePortfolio}}):t._e(),t._v(" "),a("div",{staticClass:"agenda-item-documents"},t._l(t.categorizedDocuments,(function(i){return a("div",{key:i.document.documentName,staticClass:"agenda-item-documents-main-document"},[a("attachment",{attrs:{attachment:i.document}}),t._v(" "),a("div",{staticClass:"agenda-item-documents-attachments"},t._l(i.attachments,(function(i,o){return a("div",{key:i.compositeId,staticClass:"agenda-item-documents-attachment"},[a("div",{staticClass:"agenda-item-documents-attachment-listing-border"}),t._v(" "),a("div",{staticClass:"agenda-item-documents-attachment-listing-line"}),t._v(" "),a("attachment",{attrs:{"sub-document-text":"Anlage "+(o+1),attachment:i}})],1)})),0)],1)})),0),t._v(" "),t.agendaItemAttachments.length>0?a("div",[a("div",{staticClass:"agenda-item-attachment-divider-wrapper"},[a("div",{staticClass:"agenda-item-attachment-divider"}),t._v(" "),a("div",{staticClass:"agenda-item-attachment-header"},[t._v("\n        "+t._s(t.translate("shortenedAgendaItem"))+"-Anlagen\n      ")]),t._v(" "),a("div",{staticClass:"agenda-item-attachment-divider"})]),t._v(" "),t._l(t.agendaItemAttachments,(function(i,o){return a("div",{key:i.documentName,staticClass:"agenda-item-attachment"},[a("attachment",{attrs:{"sub-document-text":t.translate("shortenedAgendaItem")+"-Anlage "+(o+1),attachment:i}})],1)}))],2):t._e()],1)}),[],!1,null,"1065e0e1",null).exports),E={name:"AgendaItemOldPreVoting",components:{MaterialTable:l.h},mixins:[u.d],props:{agendaItem:{required:!0,type:Object}},computed:{summarizedVotesTableHeader:function summarizedVotesTableHeader(){var summarizedVotesTableHeader={};return Object.keys(this.summarizedUserVotes).forEach((function(t){summarizedVotesTableHeader[t]=t})),summarizedVotesTableHeader},summarizedUserVotes:function summarizedUserVotes(){var summarizedUserVotes={};return this.agendaItem.old_pre_voting.results.forEach((function(t){summarizedUserVotes[t.voting_type_name]?summarizedUserVotes[t.voting_type_name]+=1:summarizedUserVotes[t.voting_type_name]=1})),summarizedUserVotes},authUserVote:function authUserVote(){var authUserVote=this.agendaItem.old_pre_voting.results.filter((function(t){return""!==t.notiz}));return authUserVote.length>0?authUserVote[0]:{}},explicitUserVotes:function explicitUserVotes(){return this.agendaItem.old_pre_voting.results.map((function(t){return""!==t.notiz?{1:"<b>".concat(t.person_vorname," ").concat(t.person_name,"</b>"),2:"<b>".concat(t.voting_type_name,"</b>")}:{1:"".concat(t.person_vorname," ").concat(t.person_name),2:t.voting_type_name}}))}}},j=(a(614),Object(M.a)(E,(function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",{staticClass:"agenda-item-old-pre-voting-wrapper"},[t.authUserVote.id_person?a("div",{staticClass:"agenda-item-old-pre-voting-auth-wrapper"},[a("div",[a("div",{staticClass:"agenda-item-old-pre-voting-auth-voting-type"},[t._v("\n        Ihre Stimme: "+t._s(t.authUserVote.voting_type_name)+"\n      ")]),t._v(" "),a("div",{staticClass:"agenda-item-old-pre-voting-auth-created-at"},[t._v("\n        "+t._s(t.format(t.authUserVote.created_at))+"\n      ")])]),t._v(" "),""!==t.authUserVote.notiz?a("div",{staticClass:"agenda-item-old-pre-voting-auth-note"},[t._v("\n      "+t._s(t.authUserVote.notiz)+"\n    ")]):t._e()]):t._e(),t._v(" "),a("div",{staticClass:"agenda-item-old-pre-voting-table-wrapper"},[a("div",{staticClass:"agenda-item-old-pre-voting-table-headline"},[t._v("\n      Namentliche Abstimmungen\n    ")]),t._v(" "),a("material-table",{attrs:{header:{1:"Name",2:"Abstimminfo"},content:t.explicitUserVotes}})],1),t._v(" "),t.agendaItem.old_pre_voting.results.length>1?a("div",{staticClass:"agenda-item-old-pre-voting-table-wrapper"},[a("div",{staticClass:"agenda-item-old-pre-voting-table-headline"},[t._v("\n      Zusammengefasstes Ergebnis\n    ")]),t._v(" "),a("material-table",{attrs:{header:t.summarizedVotesTableHeader,content:[t.summarizedUserVotes]}})],1):t._e()])}),[],!1,null,"452220f2",null).exports),W=a(493),H=a(491),$={name:"AgendaItem",components:{Tab:l.m,Tabs:l.n,Modal:l.i,ContextMenu:l.b,MaterialButton:l.e,AgendaItemVoting:A,AgendaItemComments:z,AgendaItemDocuments:R,AgendaItemOldPreVoting:j,AgendaItemResolutionControl:W.a,AgendaItemSummarizedUserVotes:H.a},directives:{tooltip:l.p},mixins:[u.d,u.e],props:{initialAgendaItem:{type:Object,required:!0},votingOptions:{type:Array,required:!1,default:function _default(){return[]}},meeting:{type:Object,required:!0},tabsPresent:{type:Boolean,default:!1}},data:function data(){return{agendaItem:this.initialAgendaItem,favorite:this.initialAgendaItem.favorite,documents:[],showCompactModal:!1,compactModalMode:"documents",isLoadingComments:!1,highlighted:!1}},computed:{resolutionControlNotYetViewed:function resolutionControlNotYetViewed(){var t;return"0"===(null===(t=this.agendaItem.resolution_control)||void 0===t?void 0:t.already_viewed)},submissionNotYetPublishedText:function submissionNotYetPublishedText(){return window.settings[1086]},contextItems:function contextItems(){var t,i=this,a=[{text:"0"!=this.favorite?"Favorit entfernen":"Zu Favoriten hinzufügen",action:function action(){i.toggleFavorite()}}];return 1==window.settings[9040]&&null!==(t=this.activeUser)&&void 0!==t&&t.is_administrative_staff&&a.push({text:"Antrag zum ".concat(this.translate("shortenedAgendaItem")," erstellen"),action:function action(){window.location.href="".concat(window.location.origin,"/petitions.php?relation_type=agenda_item&relation_id=").concat(i.agendaItem.id)}}),a},initialTab:function initialTab(){var t=new URLSearchParams(window.location.search);return t.has("agenda_item")&&t.get("agenda_item")===this.agendaItem.id&&t.has("tab")&&"resolution-control"===t.get("tab")?"Beschlusskontrolle":t.has("suchbegriffe")?"Dokumente":this.hasVoting||this.hasPreVoting?this.hasVoting?"Abstimmung":"Vorabstimmung":"Dokumente"},preVotingUnreadIndicator:function preVotingUnreadIndicator(){return 1===parseInt(this.agendaItem.pre_voting.is_running,10)&&this.agendaItem.pre_voting.person_can_vote&&!this.agendaItem.pre_voting.own_voting},compactAgendaItems:function compactAgendaItems(){return this.$store.state.userSettings.agendaItemCompact},hasShortResolution:function hasShortResolution(){return this.agendaItem.short_resolution&&"0"!==this.agendaItem.short_resolution&&""!==this.agendaItem.short_resolution},hasPreVoting:function hasPreVoting(){return"0"!==this.agendaItem.pre_voting&&""!==this.agendaItem.pre_voting},hasVoting:function hasVoting(){return"0"!==this.agendaItem.voting&&""!==this.agendaItem.voting},isAuthenticated:function isAuthenticated(){return this.$store.getters.isAuthenticated},showUnreadVotingIndicator:function showUnreadVotingIndicator(){return 1===parseInt(this.agendaItem.voting.is_running,10)&&1==this.agendaItem.voting.person_can_vote&&!this.agendaItem.voting.own_voting&&"Sie haben für ".concat(this.translate("shortenedAgendaItem")," ").concat(this.agendaItem.number," noch nicht abgestimmt")},tabsContainerExists:function tabsContainerExists(){return this.isAuthenticated||this.hasVoting||this.hasPreVoting||this.agendaItem.documents.length>0||this.hasShortResolution||this.hasSummarizedUserVotes},activeUser:function activeUser(){return this.$store.state.user},isMeetingCreator:function isMeetingCreator(){return!!this.$store.state.user&&this.meeting.verfasser==this.$store.state.user.id},hasSummarizedUserVotes:function hasSummarizedUserVotes(){return this.agendaItem.summarized_user_votes&&this.agendaItem.summarized_user_votes.length>0},hasResolutionControl:function hasResolutionControl(){return Object.prototype.hasOwnProperty.call(this.agendaItem,"resolution_control")},hasOldPreVoting:function hasOldPreVoting(){return Object.prototype.hasOwnProperty.call(this.agendaItem,"old_pre_voting")}},watch:{initialTab:{immediate:!0,handler:function handler(){"Beschlusskontrolle"===this.initialTab&&this.markResolutionControlAsViewed()}},tabsContainerExists:{immediate:!0,handler:function handler(){this.$emit("update:tabsPresent",this.tabsContainerExists)}},initialAgendaItem:{deep:!0,handler:function handler(){this.agendaItem=this.initialAgendaItem}},agendaItem:{deep:!0,handler:function handler(){this.$emit("update:initialAgendaItem",this.agendaItem)}}},mounted:function mounted(){var t,i=this;window.location.hash&&window.location.hash.startsWith("#agenda-item-")&&document.getElementById(window.location.hash)&&document.getElementById(window.location.hash).scrollIntoView();var a=new URLSearchParams(window.location.search);a.has("agenda_item")&&(null===(t=a.get("agenda_item"))||void 0===t?void 0:t.length)>0&&this.agendaItem.id===a.get("agenda_item")&&this.$nextTick((function(){i.$refs.agendaItem.scrollIntoView(),setTimeout((function(){i.highlighted=!0,setTimeout((function(){i.highlighted=!1}),2e3)}),500)})),window.socket&&(window.socket.on("new-votable",(function(t){t.votable_id==i.agendaItem.id&&(i.$set(i.agendaItem,"voting",t),i.tabsContainerCollapsed=!1,i.eventBus.$emit("show-notification",{text:"Neue Abstimmung freigegeben für ".concat(i.translate("shortenedAgendaItem")," ").concat(i.agendaItem.number),duration:5e3}))})),window.socket.on("delete-votable-id",(function(t){i.hasPreVoting&&i.agendaItem.pre_voting.id==t?i.agendaItem.pre_voting="0":i.hasVoting&&i.agendaItem.voting.id==t&&(i.agendaItem.voting="0")}))),this.eventBus.$on("focus-voting",(function(t){t.id===i.agendaItem.id&&(i.$refs.agendaItem.scrollIntoView(),i.$refs.tabs.selectTab({title:"Abstimmung"}))}))},created:function created(){},methods:{tabChanged:function tabChanged(t){var i=this;this.$nextTick((function(){t.title.includes("Kommentar")?i.fetchComments():"Beschlusskontrolle"===t.title&&i.markResolutionControlAsViewed()}))},markResolutionControlAsViewed:async function markResolutionControlAsViewed(){await this.$webservice.post({id:"resolution_controls",action:"mark_as_viewed",resolution_control_id:this.agendaItem.id}).catch((function(t){console.log(t)}))},fetchComments:function fetchComments(){var t=this;this.isLoadingComments=!0,this.$webservice.get({id:22,idsitzung:this.meeting.nummer,idvorlage:this.agendaItem.vorlagennummer,idtopstatus:this.agendaItem.status}).then((function(i){t.agendaItem.comments=i.data,t.agendaItem.comments_count=i.data.length,t.agendaItem.own_comments_count=i.data.filter((function(i){return i.id_person==t.activeUser.id})).length,t.isLoadingComments=!1})).catch((function(t){console.warn("Error while fetching comments",t)}))},getAgendaItemPublicStatusTooltipText:function getAgendaItemPublicStatusTooltipText(t){var i="";switch(parseInt(t,10)){case 1:i="öffentlich";break;case 2:i="nichtöffentlich";break;case 3:i="vertraulich";break;default:i="nichtöffentlich"}return i},toggleFavorite:function toggleFavorite(){var t=this;this.favorite>0?this.$webservice.post({id:101,idfavorit:this.favorite}).then((function(){t.favorite=0,t.eventBus.$emit("show-notification",{text:"Favorit erfolgreich entfernt"})})):this.$webservice.post({id:101,idsitzung:this.agendaItem.nummer,idtopstatus:this.agendaItem.status,idvorlage:this.agendaItem.vorlagennummer}).then((function(i){t.favorite=i.data[0].id_favorit,t.eventBus.$emit("show-notification",{text:"Favorit erfolgreich hinzugefügt"})}))},editAgendaItemLiveInfo:function editAgendaItemLiveInfo(t){this.eventBus.$emit("edit-live-agenda-item",t)}}},U=(a(615),Object(M.a)($,(function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",{ref:"agendaItem",staticClass:"agenda-item",class:{"agenda-item-highlight":t.highlighted},attrs:{id:"agenda-item-"+t.agendaItem.folge}},[a("div",{staticClass:"compact-mode-modal"},[a("modal",{class:{"comments-modal":"Kommentare"===t.compactModalMode},attrs:{title:t.compactModalMode+" für "+t.translate("shortenedAgendaItem")+" "+t.agendaItem.number+" ("+t.getAgendaItemPublicStatusTooltipText(t.agendaItem.status)+")",show:t.showCompactModal,"has-close-button":""},on:{"update:show":function(i){t.showCompactModal=i}}},["Dokumente"===t.compactModalMode?a("agenda-item-documents",{attrs:{"agenda-item":t.agendaItem,"meeting-id":t.meeting.nummer}}):"Kommentare"===t.compactModalMode?a("agenda-item-comments",{attrs:{"agenda-item":t.agendaItem,"meeting-id":t.meeting.nummer,"is-loading-comments":t.isLoadingComments},on:{openAttachment:function(i){return t.$emit("openDocument",i)},"reload-comments":function(i){return t.fetchComments()}}}):"Vorabstimmung"===t.compactModalMode?a("agenda-item-voting",{attrs:{"voting-options":t.votingOptions,"passed-agenda-item":t.agendaItem,"is-pre-voting":!0},on:{"reload-comments":function(i){return t.fetchComments()}}}):"Abstimmung"===t.compactModalMode?a("agenda-item-voting",{attrs:{"voting-options":t.votingOptions,"passed-agenda-item":t.agendaItem}}):"Abstimmungsergebnisse"===t.compactModalMode?a("agenda-item-summarized-user-votes",{attrs:{"agenda-item":t.agendaItem}}):"Beschlusskontrolle"===t.compactModalMode?a("agenda-item-resolution-control",{attrs:{"resolution-control":t.agendaItem.resolution_control}}):"Abstimmungsergebnisse (Vorabstimmung)"===t.compactModalMode?a("agenda-item-old-pre-voting",{attrs:{"agenda-item":t.agendaItem}}):t._e()],1)],1),t._v(" "),a("div",{staticClass:"agenda-item-content"},[a("div",{staticClass:"agenda-item-header"},[a("div",{directives:[{name:"tooltip",rawName:"v-tooltip.right",value:t.getAgendaItemPublicStatusTooltipText(t.agendaItem.status),expression:"getAgendaItemPublicStatusTooltipText(agendaItem.status)",modifiers:{right:!0}}],staticClass:"agenda-item-number",class:[{"agenda-item-number-round":1===t.agendaItem.number.length},"agenda-item-number-"+t.agendaItem.status]},[a("div",[t._v(t._s(t.agendaItem.number))])]),t._v(" "),a("div",{staticClass:"agenda-item-title-wrapper"},[t.agendaItem.submission?a("div",[t.agendaItem.submission.type?a("a",{staticClass:"agenda-item-submission-link",attrs:{href:"/vorlagen_details.php?vid="+t.agendaItem.submission.id}},[a("div",{staticClass:"agenda-item-submission-title"},[t._v("\n              ["),a("div",[t._v(t._s(t.agendaItem.submission.type.name))]),t._v(" "),t.agendaItem.submission.alias?a("div",[t._v("\n                : "+t._s(t.agendaItem.submission.alias)+"\n              ")]):t._e(),t._v("]\n            ")])]):t._e(),t._v(" "),a("div",{staticClass:"agenda-item-title"},[a("div",[t._v(t._s(t.agendaItem.submission.name))])])]):a("div",{staticClass:"agenda-item-title"},[a("div",{domProps:{innerHTML:t._s(t.agendaItem.title)}})]),t._v(" "),t.isAuthenticated?a("div",[a("context-menu",{attrs:{horizontal:"","mobile-title":t.agendaItem.title,items:t.contextItems}})],1):t._e()])]),t._v(" "),void 0!==t.agendaItem.live_info&&""!==t.agendaItem.live_info&&"0"!==t.agendaItem.live_info?a("div",{staticClass:"agenda-item-live-infos",class:{"agenda-item-live-infos--interactable":t.isMeetingCreator},on:{click:function(i){return t.editAgendaItemLiveInfo(t.agendaItem)}}},[a("div",{staticClass:"agenda-item-live-infos-header"},[a("div",{staticClass:"agenda-item-live-infos-caption"},[t._v("\n          Live\n        ")]),t._v(" "),a("div",{staticClass:"agenda-item-live-infos-date"},[t._v("\n          "+t._s(t.formatRelative(t.agendaItem.live_info.created_at))+"\n        ")])]),t._v(" "),a("div",{staticClass:"agenda-item-live-infos-message"},[t._v("\n        "+t._s(t.agendaItem.live_info.text)+"\n      ")])]):t._e(),t._v(" "),"vl"===t.agendaItem.topart&&void 0===t.agendaItem.submission?a("div",{staticClass:"agenda-item-unpublished-submission-text"},[t._v("\n      "+t._s(t.submissionNotYetPublishedText)+"\n    ")]):t._e(),t._v(" "),t.compactAgendaItems?a("div",{staticClass:"agenda-item-compact-buttons"},[t.agendaItem.documents.length>0?a("material-button",{attrs:{text:(0==t.agendaItem.documents.length?"":t.agendaItem.documents.length)+" Dokument"+(1==t.agendaItem.documents.length?"":"e"),icon:"file-pdf",outlined:""},on:{click:function(i){t.compactModalMode="Dokumente",t.showCompactModal=!0}}}):t._e(),t._v(" "),t.isAuthenticated?a("material-button",{attrs:{text:(0==t.agendaItem.comments_count?"":""+t.agendaItem.comments_count)+" Kommentar"+(1==t.agendaItem.comments_count?"":"e"),icon:"comment",outlined:""},on:{click:function(i){t.fetchComments(),t.compactModalMode="Kommentare",t.showCompactModal=!0}}}):t._e(),t._v(" "),t.hasPreVoting?a("material-button",{class:{"compact-button-unread":t.preVotingUnreadIndicator},attrs:{text:"Vorabstimmung",icon:"person-booth",outlined:""},on:{click:function(i){t.compactModalMode="Vorabstimmung",t.showCompactModal=!0}}}):t._e(),t._v(" "),t.hasVoting?a("material-button",{class:{"compact-button-unread":t.showUnreadVotingIndicator},attrs:{text:"Abstimmung",icon:"person-booth",outlined:""},on:{click:function(i){t.compactModalMode="Abstimmung",t.showCompactModal=!0}}}):t._e(),t._v(" "),t.hasSummarizedUserVotes?a("material-button",{attrs:{text:"Abstimmungsergebnisse",icon:"person-booth",outlined:""},on:{click:function(i){t.compactModalMode="Abstimmungsergebnisse",t.showCompactModal=!0}}}):t._e(),t._v(" "),t.hasResolutionControl?a("material-button",{attrs:{text:"Beschlusskontrolle",icon:"person-booth",outlined:""},on:{click:function(i){t.compactModalMode="Beschlusskontrolle",t.showCompactModal=!0}}}):t._e(),t._v(" "),t.hasOldPreVoting?a("material-button",{attrs:{text:"Abstimmungsergebnisse (Vorabstimmung)",icon:"person-booth",outlined:""},on:{click:function(i){t.compactModalMode="Abstimmungsergebnisse (Vorabstimmung)",t.showCompactModal=!0}}}):t._e()],1):t.tabsContainerExists&&!t.compactAgendaItems?a("div",{attrs:{name:"agenda-item-tabs-transition"}},[a("div",{staticClass:"agenda-item-tabs-container"},[a("tabs",{ref:"tabs",staticClass:"agenda-item-tabs",on:{changeTab:t.tabChanged}},[t.agendaItem.documents.length>0?a("tab",{attrs:{title:"Dokumente",initial:"Dokumente"===t.initialTab}},[a("div",{staticClass:"agenda-item-tab-content"},[a("agenda-item-documents",{ref:"documents",attrs:{"agenda-item":t.agendaItem,"meeting-id":t.meeting.nummer}})],1)]):t._e(),t._v(" "),t.isAuthenticated?a("tab",{attrs:{title:(0==t.agendaItem.comments_count?"":""+t.agendaItem.comments_count)+" Kommentar"+(1==t.agendaItem.comments_count?"":"e")}},[a("div",{staticClass:"agenda-item-tab-content"},[a("agenda-item-comments",{ref:"comments",attrs:{"agenda-item":t.agendaItem,"is-loading-comments":t.isLoadingComments,"meeting-id":t.meeting.nummer},on:{openAttachment:function(i){return t.$emit("openDocument",i)},"reload-comments":function(i){return t.fetchComments()}}})],1)]):t._e(),t._v(" "),t.hasPreVoting?a("tab",{attrs:{initial:"Vorabstimmung"===t.initialTab,title:"Vorabstimmung",unread:t.preVotingUnreadIndicator}},[a("div",{staticClass:"agenda-item-tab-content"},[a("agenda-item-voting",{attrs:{"voting-options":t.votingOptions,"passed-agenda-item":t.agendaItem,"is-pre-voting":""},on:{"reload-comments":function(i){return t.fetchComments()}}})],1)]):t._e(),t._v(" "),t.hasVoting?a("tab",{attrs:{initial:"Abstimmung"===t.initialTab,title:"Abstimmung",unread:t.showUnreadVotingIndicator}},[a("div",{staticClass:"agenda-item-tab-content"},[a("agenda-item-voting",{attrs:{"voting-options":t.votingOptions,"passed-agenda-item":t.agendaItem},on:{"reload-comments":function(i){return t.fetchComments()}}})],1)]):t._e(),t._v(" "),t.hasShortResolution?a("tab",{attrs:{title:"Kurzbeschluss"}},[a("div",{staticClass:"agenda-item-short-resolution-wrapper",domProps:{innerHTML:t._s(t.agendaItem.short_resolution.title)}})]):t._e(),t._v(" "),t.hasSummarizedUserVotes?a("tab",{attrs:{title:"Abstimmungsergebnisse"}},[a("agenda-item-summarized-user-votes",{attrs:{"agenda-item":t.agendaItem}})],1):t._e(),t._v(" "),t.hasResolutionControl?a("tab",{attrs:{title:"Beschlusskontrolle",initial:"Beschlusskontrolle"===t.initialTab,unread:t.resolutionControlNotYetViewed}},[a("agenda-item-resolution-control",{attrs:{"resolution-control":t.agendaItem.resolution_control}})],1):t._e(),t._v(" "),t.hasOldPreVoting?a("tab",{attrs:{title:"Abstimmungsergebnisse (Vorabstimmung)"}},[a("agenda-item-old-pre-voting",{attrs:{"agenda-item":t.agendaItem}})],1):t._e()],1)],1)]):t._e()])])}),[],!1,null,"38ce7304",null).exports),q={name:"MeetingVideoUrls",mixins:[u.a],props:{urls:{type:Array,required:!0}},methods:{copy:function copy(t){this.copyToClipboard(t),this.eventBus.$emit("show-notification",{text:"Passwort zum Videostream wurde kopiert"})}}},K=(a(616),Object(M.a)(q,(function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",{staticClass:"meeting-page-video-url-wrapper"},t._l(t.urls,(function(i){return a("div",{key:i.id,staticClass:"meeting-page-video-url"},[a("a",{attrs:{href:i.url,target:"_blank",title:"Zum Videostream wechseln"}},[a("div",{staticClass:"meeting-page-video-url-play-icon-wrapper"},[a("font-awesome-icon",{attrs:{icon:"play"}})],1)]),t._v(" "),a("div",[a("a",{attrs:{href:i.url,target:"_blank",title:"Zum Videostream wechseln"}},[t._v("Videostream")])]),t._v(" "),""!==i.password?a("div",{staticClass:"meeting-page-video-url-password-wrapper"},[a("div",[t._v("\n        Passwort: "+t._s(i.password)+"\n      ")]),t._v(" "),a("div",[a("font-awesome-icon",{attrs:{icon:"clipboard"},on:{click:function(a){return t.copy(i.password)}}})],1)]):t._e()])})),0)}),[],!1,null,"592c6e7f",null).exports);function CustomMeetingBriefModalvue_type_script_lang_js_ownKeys(t,i){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);i&&(o=o.filter((function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),a.push.apply(a,o)}return a}function CustomMeetingBriefModalvue_type_script_lang_js_objectSpread(t){for(var i=1;i<arguments.length;i++){var a=null!=arguments[i]?arguments[i]:{};i%2?CustomMeetingBriefModalvue_type_script_lang_js_ownKeys(Object(a),!0).forEach((function(i){r()(t,i,a[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):CustomMeetingBriefModalvue_type_script_lang_js_ownKeys(Object(a)).forEach((function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(a,i))}))}return t}var Y={directives:{tooltip:l.p},components:{Modal:l.i,Toggle:l.o,Attachment:h.a,MaterialButton:l.e},mixins:[u.e],props:{show:Boolean,meetingDocuments:{type:Array,default:function _default(){return[]}},agendaItems:{type:Array,default:function _default(){return[]}},meetingAttachments:{type:Array,default:function _default(){return[]}}},data:function data(){return{documentTypes:[],adjustedAgendaItems:[],adjustedMeetingDocuments:[],adjustedMeetingAttachments:[],expandMeetingAttachments:!1,includeCommentsFromOthers:!1,commentsFromOthersTooltipText:"Bei Aktivierung dieser Option werden nicht nur Ihre eigenen ".concat(this.translate("shortenedAgendaItem"),"-Kommentare berücksichtigt,<br>sondern zusätzlich die von anderen Personen.<br>Diese Einstellung wirkt sich nur auf die ").concat(this.translate("shortenedAgendaItems"),' aus, die Sie in der unteren Spalte "Kommentare" ausgewählt haben.')}},computed:{chromeBinaryCallable:function chromeBinaryCallable(){return this.$store.state.chromeBinaryCallable},hasCommentsFromOthers:function hasCommentsFromOthers(){return Boolean(this.adjustedAgendaItems.find((function(t){return t.comments_count>t.own_comments_count})))},currentMeeting:function currentMeeting(){return this.$store.state.meeting},b64EncodedCustomPortfolioDocuments:function b64EncodedCustomPortfolioDocuments(){var t=[];return this.selectedDocuments.forEach((function(i){t.push({document_type_id:i.documentType.id,relation_id:i.relationId})})),btoa(JSON.stringify(t))},selectedDocuments:function selectedDocuments(){var selectedDocuments=[];return this.adjustedMeetingDocuments.forEach((function(t){t.selected&&selectedDocuments.push(t)})),this.adjustedMeetingAttachments.forEach((function(t){t.selected&&selectedDocuments.push(t)})),this.adjustedAgendaItems.forEach((function(t){t.documents.forEach((function(t){t.selected&&selectedDocuments.push(t)}))})),selectedDocuments},combinedBriefSize:function combinedBriefSize(){var t=0;return this.selectedDocuments.forEach((function(i){t+=parseInt(i.documentSize,10)})),this.getReadableSizeFromBytes(t)},modalButtons:function modalButtons(){var modalButtons=[];return this.selectedDocuments.length>0&&(modalButtons.push({text:"Als .zip herunterladen",action:this.downloadBriefAsZip}),modalButtons.push({text:"Sitzungsmappe öffnen",type:"solid",action:this.openBrief})),modalButtons},availableDocumentTypes:function availableDocumentTypes(){var t=[],i=[];return this.adjustedAgendaItems.forEach((function(t){t.documents.forEach((function(t){i.includes(t.documentType.name)||i.push(t.documentType.name)}))})),i.forEach((function(i){t.push({name:i,value:!1})})),t}},watch:{includeCommentsFromOthers:function includeCommentsFromOthers(){this.fillAdjustedDocuments()},agendaItems:function agendaItems(){this.fillAdjustedDocuments()}},created:function created(){this.fillAdjustedDocuments(),this.meetingAttachments.length>=10&&(this.expandMeetingAttachments=!1)},methods:{setAllCheckboxes:function setAllCheckboxes(t){var i=this;this.availableDocumentTypes.forEach((function(a){i.toggleSelectedTypes(a.name,t),a.value=t})),this.adjustedMeetingDocuments.forEach((function(i){i.selected=t})),this.adjustedMeetingAttachments.forEach((function(i){i.selected=t}))},fillAdjustedDocuments:function fillAdjustedDocuments(){var t=this,i=[];this.meetingDocuments.forEach((function(a){var o;i.push(CustomMeetingBriefModalvue_type_script_lang_js_objectSpread({selected:(null===(o=t.adjustedMeetingDocuments.find((function(t){return t.compositeId===a.compositeId})))||void 0===o?void 0:o.selected)||!1},a))})),this.adjustedMeetingDocuments=i;var a=[];this.meetingAttachments.forEach((function(i){var o;a.push(CustomMeetingBriefModalvue_type_script_lang_js_objectSpread({selected:(null===(o=t.adjustedMeetingAttachments.find((function(t){return t.compositeId===i.compositeId})))||void 0===o?void 0:o.selected)||!1},i))})),this.adjustedMeetingAttachment=a;var o=[];this.agendaItems.forEach((function(i){var a=t.adjustedAgendaItems.find((function(t){return t.id===i.id})),r=[];void 0!==i.documents&&i.documents.forEach((function(t){var i;r.push(CustomMeetingBriefModalvue_type_script_lang_js_objectSpread(CustomMeetingBriefModalvue_type_script_lang_js_objectSpread({},t),{},{selected:!(null==a||!a.documents)&&(null===(i=a.documents.find((function(i){return i.compositeId===t.compositeId})))||void 0===i?void 0:i.selected)}))})),t.chromeBinaryCallable&&(i.own_comments_count>0||i.comments_count>0&&t.includeCommentsFromOthers)&&r.push({compositeId:"".concat(i.id,"|comments"),documentType:{id:25,name:"Kommentare"},documentSize:0,relationId:i.id,selected:!1});var l=CustomMeetingBriefModalvue_type_script_lang_js_objectSpread({},i);l.documents=r,l.sumOfActiveDocuments=0,o.push(l)})),this.adjustedAgendaItems=o},setSumOfActiveDocuments:function setSumOfActiveDocuments(t){var i=0;t.documents.forEach((function(t){t.selected&&(i+=1)})),t.sumOfActiveDocuments=i},toggleSelectedTypes:function toggleSelectedTypes(t,i){var a=this;this.adjustedAgendaItems.forEach((function(o){a.getDocumentsWithType(o,t).forEach((function(t){t&&""!==t&&(t.selected=i)})),a.setSumOfActiveDocuments(o)}))},openBrief:function openBrief(){var t=this,i=this.selectedDocuments.map((function(t){return{document_type_id:t.documentType.id,relation_id:t.relationId}}));this.$emit("update:show",!1);var a=["/documents.php?id=68","documents=".concat(btoa(JSON.stringify(i))),"generate_custom_portfolio","filename=Inidividuelle Sitzungsmappe der ".concat(this.currentMeeting.titel),"meeting_id=".concat(this.currentMeeting.nummer),"inline"];this.includeCommentsFromOthers&&a.push("include_comments_from_others"),this.$nextTick((function(){t.eventBus.$emit("open-file",{src:a.join("&"),filename:"Individuelle Sitzungsmappe der ".concat(t.currentMeeting.titel)})}))},downloadBriefAsZip:function downloadBriefAsZip(){this.downloadBrief(!0)},downloadBrief:function downloadBrief(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=[];this.selectedDocuments.forEach((function(t){i.push({document_type_id:t.documentType.id,relation_id:t.relationId})}));var a={id:68,documents:btoa(JSON.stringify(i)),generate_custom_portfolio:!0,include_comments_from_others:this.includeCommentsFromOthers,filename:"Individuelle Sitzungsmappe der ".concat(this.currentMeeting.titel,".zip"),meeting_id:this.currentMeeting.nummer};t&&(a.zip=!0);var o=0;this.selectedDocuments.forEach((function(t){o+=parseInt(t.documentSize,10)})),this.eventBus.$emit("show-notification",{type:"download",filename:a.filename,filesize:o,src:this.$webservice.getPath(a)}),this.$emit("update:show",!1)},getReadableSizeFromBytes:function getReadableSizeFromBytes(t){return"string"==typeof t?d()(parseInt(t,10)):d()(t)},toggleDocumentSelected:function toggleDocumentSelected(t,i,a){var o=this;this.getDocumentsWithType(t,i).forEach((function(r){r.selected=a,a||o.availableDocumentTypes.forEach((function(t){t.name===i&&(t.value=!1)})),o.setSumOfActiveDocuments(t)}))},isDocumentWithTypeSelected:function isDocumentWithTypeSelected(t,i){var isDocumentWithTypeSelected=!1;return t.documents.forEach((function(t){t.documentType.name===i&&t.selected&&(isDocumentWithTypeSelected=!0)})),isDocumentWithTypeSelected},getDocumentsWithType:function getDocumentsWithType(t,i){return t.documents.filter((function(t){if(t.documentType.name===i)return t}))},getCombinedSizeOfSelectedDocumentsInAgendaItem:function getCombinedSizeOfSelectedDocumentsInAgendaItem(t){var i=0;return t.documents.forEach((function(t){t.selected&&(i+=parseInt(t.documentSize,10))})),0===i?"":this.getReadableSizeFromBytes(i)}}},G=(a(617),Object(M.a)(Y,(function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",{staticClass:"brief-modal-wrapper"},[a("modal",{staticClass:"brief-modal",attrs:{show:t.show,buttons:t.modalButtons,"has-close-button":"",title:"Sitzungsmappe erstellen"},on:{close:function(i){return t.$emit("update:show",!1)}}},[a("div",[a("div",{staticClass:"brief-modal-body"},[a("div",{staticClass:"brief-modal-combined-size"},[t.selectedDocuments.length?a("div",[t._v("\n            Die ausgewählte Mappe ist "),a("span",[t._v(t._s(t.combinedBriefSize))]),t._v(" groß\n          ")]):a("div",[t._v("\n            Bitte wählen Sie zunächst Dokumente aus.\n          ")]),t._v(" "),a("div",[a("material-button",{attrs:{text:"Alle Dokumente auswählen",outlined:""},on:{click:function(i){return t.setAllCheckboxes(!0)}}}),t._v(" "),t.selectedDocuments.length?a("material-button",{attrs:{text:"Alle Dokumente abwählen",outlined:""},on:{click:function(i){return t.setAllCheckboxes(!1)}}}):t._e()],1)]),t._v(" "),t.adjustedMeetingDocuments.length>0||t.meetingAttachments.length>0?a("div",{staticClass:"documents-wrapper"},[a("div",t._l(t.adjustedMeetingDocuments,(function(i){return a("div",{key:i.compositeId,staticClass:"meeting-document"},[a("toggle",{attrs:{checkbox:""},model:{value:i.selected,callback:function(a){t.$set(i,"selected",a)},expression:"document.selected"}}),t._v(" "),a("div",{staticClass:"meeting-document-name"},[t._v("\n                "+t._s(i.documentType.name)+" "+t._s(t.getReadableSizeFromBytes(i.documentSize))+"\n              ")])],1)})),0),t._v(" "),t.adjustedMeetingAttachments?a("div",{staticClass:"documents-divider"}):t._e(),t._v(" "),t.adjustedMeetingAttachments&&t.adjustedMeetingAttachments.length>0?a("div",[a("material-button",{staticClass:"meeting-attachment-button",class:{"meeting-attachment-button-active":t.expandMeetingAttachments},attrs:{inlined:"",icon:"caret-down",text:"Anlagen",big:""},on:{click:function(i){t.expandMeetingAttachments=!t.expandMeetingAttachments}}}),t._v(" "),t.expandMeetingAttachments?a("div",t._l(t.adjustedMeetingAttachments,(function(i){return a("div",{staticClass:"meeting-attachment"},[a("toggle",{attrs:{checkbox:""},model:{value:i.selected,callback:function(a){t.$set(i,"selected",a)},expression:"attachment.selected"}}),t._v(" "),a("attachment",{attrs:{attachment:i}})],1)})),0):t._e()],1):t._e()]):t._e(),t._v(" "),a("div",{staticClass:"brief-modal-comments-from-others"},[t.hasCommentsFromOthers&&t.chromeBinaryCallable?a("toggle",{directives:[{name:"tooltip",rawName:"v-tooltip.right",value:t.commentsFromOthersTooltipText,expression:"commentsFromOthersTooltipText",modifiers:{right:!0}}],attrs:{checkbox:"",text:"Kommentare anderer Personen berücksichtigen"},model:{value:t.includeCommentsFromOthers,callback:function(i){t.includeCommentsFromOthers=i},expression:"includeCommentsFromOthers"}}):t._e()],1),t._v(" "),t.adjustedAgendaItems.length?a("div",{staticClass:"brief-modal-table"},[a("table",{attrs:{cellspacing:"0"}},[a("thead",[a("tr",[a("th"),t._v(" "),t._l(t.availableDocumentTypes,(function(i){return a("th",{key:i.name},[a("div",{staticClass:"checkbox-header-wrapper"},[a("Toggle",{attrs:{checkbox:""},on:{change:function(a){return t.toggleSelectedTypes(i.name,i.value)}},model:{value:i.value,callback:function(a){t.$set(i,"value",a)},expression:"documentType.value"}}),t._v(" "),a("div",{staticClass:"document-type-name"},[t._v("\n                      "+t._s(i.name)+"\n                    ")])],1)])})),t._v(" "),a("th",[t._v("Dateigröße")]),t._v(" "),a("th",[t._v("Betreff")])],2)]),t._v(" "),a("tbody",t._l(t.adjustedAgendaItems,(function(i,o){return i.documents.length>0?a("tr",{key:o+" "+i.sumOfActiveDocuments},[a("td",[a("div",{staticClass:"agenda-item-number",class:"agenda-item-number-"+i.status},[t._v("\n                    "+t._s(i.number)+"\n                  ")])]),t._v(" "),t._l(t.availableDocumentTypes,(function(o){return a("td",[t.getDocumentsWithType(i,o.name).length?a("div",{staticClass:"document-type-toggle"},[a("Toggle",{attrs:{value:t.isDocumentWithTypeSelected(i,o.name),checkbox:""},on:{change:function(a){return t.toggleDocumentSelected(i,o.name,a)}}})],1):t._e()])})),t._v(" "),a("td",[t._v(t._s(t.getCombinedSizeOfSelectedDocumentsInAgendaItem(i)))]),t._v(" "),i.submission?a("td",[t._v("\n                  ["+t._s(i.submission.type.name)+": "+t._s(i.submission.alias)+"]\n                  "),a("br"),t._v("\n                  "+t._s(i.submission.name)+"\n                ")]):a("td",[t._v("\n                  "+t._s(i.title)+"\n                ")])],2):t._e()})),0)])]):t._e()])])])],1)}),[],!1,null,"64879080",null).exports),Z=a(417);function MeetingParticipantsModalvue_type_script_lang_js_ownKeys(t,i){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);i&&(o=o.filter((function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),a.push.apply(a,o)}return a}function MeetingParticipantsModalvue_type_script_lang_js_objectSpread(t){for(var i=1;i<arguments.length;i++){var a=null!=arguments[i]?arguments[i]:{};i%2?MeetingParticipantsModalvue_type_script_lang_js_ownKeys(Object(a),!0).forEach((function(i){r()(t,i,a[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):MeetingParticipantsModalvue_type_script_lang_js_ownKeys(Object(a)).forEach((function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(a,i))}))}return t}var X={components:{Modal:l.i,Avatar:Z.a,Toggle:l.o},props:{show:Boolean,people:{type:Array,default:function _default(){return[]}},committees:{type:Array,default:function _default(){return[]}},meeting:{type:Object,default:function _default(){}}},data:function data(){return{showEntitledParticipantsOnly:!1}},computed:{modalTitle:function modalTitle(){return this.showEntitledParticipantsOnly?"Stimmberechtigte Personen":"1"===this.meeting.niederschrift_status?"Anwesende Personen":"Eingeladene Personen"},mergedPeople:function mergedPeople(){var t=this,mergedPeople=[];return this.people.forEach((function(i){var a="";t.committees.forEach((function(t){t.Kuerzel===i.committee&&(a=t.Bezeichnung)})),(!t.showEntitledParticipantsOnly||t.showEntitledParticipantsOnly&&1==window.settings[9057]&&"ja"===i.voting_permission_text&&"anwesend"===i.presence_text||t.showEntitledParticipantsOnly&&2==window.settings[9057]&&"ja"===i.voting_permission_text)&&mergedPeople.push(MeetingParticipantsModalvue_type_script_lang_js_objectSpread(MeetingParticipantsModalvue_type_script_lang_js_objectSpread({},i),{},{committeeFullname:a}))})),mergedPeople},participantsWithVotingPermission:function participantsWithVotingPermission(){return this.currentMeeting.participants.filter((function(t){return"ja"===t.voting_permission_text&&"anwesend"===t.presence_text}))},currentMeeting:function currentMeeting(){return this.$store.state.meeting}},created:function created(){},methods:{}},J=(a(618),Object(M.a)(X,(function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",{staticClass:"meeting-people-modal-wrapper"},[a("modal",{staticClass:"meeting-people-modal",attrs:{show:t.show,buttons:[],"has-close-button":"",title:t.modalTitle},on:{close:function(i){return t.$emit("update:show",!1)}}},[a("div",[a("div",{staticClass:"meeting-people-modal-toggle-wrapper"},[a("toggle",{attrs:{text:"nur stimmberechtigte Personen anzeigen"},model:{value:t.showEntitledParticipantsOnly,callback:function(i){t.showEntitledParticipantsOnly=i},expression:"showEntitledParticipantsOnly"}})],1),t._v(" "),a("div",{staticClass:"meeting-people-modal-list"},t._l(t.mergedPeople,(function(i,o){return a("div",{key:i.Personalnummer,staticClass:"meeting-people-modal-person"},[a("div",{staticClass:"meeting-people-modal-person-count"},[t._v("\n            "+t._s(o+1)+"\n          ")]),t._v(" "),a("div",[a("avatar",{staticClass:"meeting-people-modal-person-avatar",attrs:{"has-image":i.hasImage,"full-name":i.fullName,"user-id":i.Personalnummer}})],1),t._v(" "),a("div",{staticClass:"meeting-people-modal-person-infos"},[a("div",[t._v(t._s(i.Titel)+" "+t._s(i.Titel_2)+" "+t._s(i.Name)+", "+t._s(i.Vorname)+" "),i.role&&i.role.length>0?a("span",[t._v("("+t._s(i.role)+")")]):t._e()]),t._v(" "),a("div",[t._v(t._s(i.committeeFullname))]),t._v(" "),i.faction&&i.faction.length>0?a("div",[t._v("\n              "+t._s(i.faction)+"\n            ")]):t._e(),t._v(" "),"Verwaltung"===i.voting_permission_text?a("div",[t._v("\n              Verwaltung\n            ")]):"ja"===i.voting_permission_text?a("div",[t._v("\n              Stimmberechtigt\n            ")]):"nein"===i.voting_permission_text?a("div",[t._v("\n              Kein Stimmrecht\n            ")]):t._e(),t._v(" "),""!==i.presence_text?a("div",[t._v("\n              "+t._s(i.presence_text)+"\n            ")]):t._e()])])})),0)])])],1)}),[],!1,null,"6eff4d30",null).exports);function MeetingPagevue_type_script_lang_js_ownKeys(t,i){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);i&&(o=o.filter((function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),a.push.apply(a,o)}return a}function MeetingPagevue_type_script_lang_js_objectSpread(t){for(var i=1;i<arguments.length;i++){var a=null!=arguments[i]?arguments[i]:{};i%2?MeetingPagevue_type_script_lang_js_ownKeys(Object(a),!0).forEach((function(i){r()(t,i,a[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):MeetingPagevue_type_script_lang_js_ownKeys(Object(a)).forEach((function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(a,i))}))}return t}var Q={name:"MeetingPage",components:{Modal:l.i,Toggle:l.o,AgendaItem:U,Attachment:h.a,ContextMenu:l.b,MaterialInput:l.f,MaterialButton:l.e,MeetingVideoUrls:K,CustomMeetingBriefModal:G,MeetingParticipantsModal:J},directives:{tooltip:l.p},mixins:[u.d,u.e],props:{passedMeeting:Object},data:function data(){return{showFileViewer:!1,showPeopleModal:!1,fileViewerSource:"",fileViewerType:"",fileViewerDocumentName:"",showCustomBriefModal:!1,favorite:0,meeting:this.passedMeeting,fileViewerDocumentSize:0,showAttachmentModal:!1,attachmentsSearchValue:"",agendaItemsTabsPresent:this.passedMeeting.agenda_items.map((function(){return!1})),missingParticipantsText:1==this.passedMeeting.niederschrift_status&&2!=(2&this.passedMeeting.freigabestatus_ni)&&""!==window.settings[2451]?window.settings[2451]:"",missingAgendaItemsText:1==this.passedMeeting.niederschrift_status?""!==window.settings[2452]?window.settings[2452]:"":""!==window.settings[2007]?window.settings[2007]:""}},computed:{showCompactToggle:function showCompactToggle(){return 0!==this.agendaItemsTabsPresent.length&&this.agendaItemsTabsPresent.filter((function(t){return t})).length>0},contextItems:function contextItems(){var t,i=this,a=[];this.isAuthenticated&&(a.push({text:"0"!=this.favorite?"Favorit entfernen":"Zu Favoriten hinzufügen",action:function action(){i.toggleFavorite()}}),1==window.settings[9040]&&null!==(t=this.authUser)&&void 0!==t&&t.is_administrative_staff&&a.push({text:"Anfrage/Antrag zu dieser Sitzung stellen",action:function action(){window.location.href="".concat(window.location.origin,"/petitions.php?relation_type=meeting&relation_id=").concat(i.meeting.nummer)}}));return 1==window.settings[1074]&&new Date(this.meeting.datum)>new Date&&a.push({text:"Sitzungstermin nach Outlook exportieren",action:function action(){window.open("/outlook.php?sitzungsnummer=".concat(i.meeting.nummer,"&identification=1"),"_blank")}}),a},firstMeetingTime:function firstMeetingTime(){var firstMeetingTime="";return""!=this.meeting.beginn_oef&&"00:00:00"!=this.meeting.beginn_oef&&"0"!=window.settings[1612]&&(this.meeting.beginn_oef>this.meeting.beginn_noef||this.meeting.beginn==this.meeting.beginn_oef?(firstMeetingTime=""!=window.settings[1612]?window.settings[1612]:"Beginn (öffentlicher Teil):",firstMeetingTime+=" ".concat(this.format("".concat(this.meeting.datum," ").concat(this.meeting.beginn_oef),"HH:mm")," Uhr")):(firstMeetingTime=""!=window.settings[1612]?window.settings[1612]:"öffentlicher Teil:",firstMeetingTime+=" ".concat(this.format("".concat(this.meeting.datum," ").concat(this.meeting.beginn_oef),"HH:mm")," Uhr"))),firstMeetingTime},secondMeetingTime:function secondMeetingTime(){var secondMeetingTime="";return""!=this.meeting.beginn_noef&&"00:00:00"!=this.meeting.beginn_noef&&"0"!=window.settings[1613]&&(this.meeting.beginn_noef>this.meeting.beginn_oef||""==this.meeting.beginn_oef?(secondMeetingTime=""!=window.settings[1613]?window.settings[1613]:"nichtöffentlicher Teil:",secondMeetingTime+=" ".concat(this.format("".concat(this.meeting.datum," ").concat(this.meeting.beginn_noef),"HH:mm")," Uhr")):(secondMeetingTime=""!=window.settings[1613]?window.settings[1613]:"öffentlicher Teil:",secondMeetingTime+=" ".concat(this.format("".concat(this.meeting.datum," ").concat(this.meeting.beginn_noef),"HH:mm")," Uhr"))),secondMeetingTime},filteredAttachments:function filteredAttachments(){var t=this;return""===this.attachmentsSearchValue?this.meeting.attachments:this.meeting.attachments.filter((function(i){return i.documentName.toLowerCase().includes(t.attachmentsSearchValue.toLowerCase())}))},compactAgendaItems:{get:function get(){return this.$store.state.userSettings.agendaItemCompact},set:function set(){this.$store.dispatch("setUserSettings",{agendaItemCompact:!this.compactAgendaItems})}},authUser:function authUser(){return this.$store.state.user},portfolioCreationAllowed:function portfolioCreationAllowed(){return 1==window.settings[2012]},meetingAddress:function meetingAddress(){var meetingAddress=this.meeting.room.Bezeichnung;return""!=this.meeting.room.Strasse&&(meetingAddress+=", ".concat(this.meeting.room.Strasse)),""!=this.meeting.room.PLZ&&""!=this.meeting.room.Ort&&(meetingAddress+=", ".concat(this.meeting.room.PLZ," ").concat(this.meeting.room.Ort)),meetingAddress},isCirculationProcess:function isCirculationProcess(){return this.meeting.event_type&&2==this.meeting.event_type.id},isAuthenticated:function isAuthenticated(){return this.$store.getters.isAuthenticated},screenType:function screenType(){return this.$store.state.screen_type},votingDidntStartYet:function votingDidntStartYet(){return this.relevantVotingStartDate&&new Date(this.relevantVotingStartDate)>new Date},relevantVotingStartDate:function relevantVotingStartDate(){var relevantVotingStartDate="";if(!this.meeting.voting_type_id||""==this.meeting.voting_type_id)return relevantVotingStartDate;switch(parseInt(this.meeting.voting_type_id)){case 1:relevantVotingStartDate=this.meeting.prevoting_starts_at;break;case 2:relevantVotingStartDate=this.meeting.voting_starts_at}return relevantVotingStartDate},relevantVotingEndDate:function relevantVotingEndDate(){var relevantVotingEndDate="";if(!this.meeting.voting_type_id||""==this.meeting.voting_type_id)return relevantVotingEndDate;switch(parseInt(this.meeting.voting_type_id)){case 1:relevantVotingEndDate=this.meeting.prevoting_ends_at;break;case 2:relevantVotingEndDate=this.meeting.voting_ends_at}return relevantVotingEndDate},votingScheduleDetailsText:function votingScheduleDetailsText(){if(!this.meeting.voting_type_id||"desktop"!==this.screenType)return"";var t=this.relevantVotingStartDate,i=this.relevantVotingEndDate;return t&&i?"Stimmabgabe möglich zwischen ".concat(this.format(t,"dd.MM.yyyy, HH:mm")," Uhr und ").concat(this.format(i,"dd.MM.yyyy, HH:mm")," Uhr"):""},peopleAllowedToVote:function peopleAllowedToVote(){return this.meeting.participants.filter((function(t){return"1"===t.voting_allowed}))},meetingStart:function meetingStart(){return"".concat(this.meeting.datum," ").concat(this.meeting.beginn)},publicStatus:function publicStatus(){if(!this.meeting.status)return"";return{1:"öffentlich",2:"nichtöffentlich",3:"vertraulich",4:"öffentlich/nichtöffentlich"}[this.meeting.status]},votingScheduleText:function votingScheduleText(){return this.votingDidntStartYet?"".concat(1==this.meeting.voting_type_id?"Vorabstimmung":"Abstimmung"," beginnt: ").concat(this.formatRelative(this.relevantVotingStartDate,{forceRelativeFormat:!0})):"".concat(1==this.meeting.voting_type_id?"Vorabstimmung":"Abstimmung"," endet: ").concat(this.formatRelative(this.relevantVotingEndDate,{forceRelativeFormat:!0}))},agendaItemsHeadline:function agendaItemsHeadline(){return 0==this.meeting.niederschrift_status?""!==window.settings[2052]?window.settings[2052]:"":""!==window.settings[2453]&&4==(516&this.meeting.freigabestatus_ni)?window.settings[2453]:""}},created:function created(){this.favorite=this.meeting.favorite,this.$store.dispatch("setCurrentMeeting",this.meeting)},mounted:function mounted(){var t=this;window.socket&&(window.socket.on("new-live-info",(function(i){t.meeting.nummer===i&&(console.log("new info for",i),t.$webservice.get({id:111,meeting_id:t.meeting.nummer}).then((function(i){console.log("new info!",i);for(var a=0;a<t.meeting.agenda_items.length;a++)t.$set(t.meeting.agenda_items[a],"live_info","0");i.data.forEach((function(i){for(var a=0;a<t.meeting.agenda_items.length;a++)t.meeting.agenda_items[a].id===i.agenda_item_id&&t.$set(t.meeting.agenda_items[a],"live_info",{id:i.id,text:i.info_text,created_at:i.created_at})}))})),t.$store.dispatch("setCurrentMeeting",t.meeting))})),window.socket.on("update-meeting",(function(i){i.nummer==t.meeting.nummer&&(t.meeting=MeetingPagevue_type_script_lang_js_objectSpread(MeetingPagevue_type_script_lang_js_objectSpread({},t.meeting),i),t.$store.dispatch("setCurrentMeeting",t.meeting))})),window.socket.on("update-meeting-voting-schedule",(function(i){i.nummer==t.meeting.nummer&&(t.$set(t.meeting,"voting_ends_at",i.voting_ends_at),t.eventBus.$emit("show-notification",{text:"Die Abstimmdauer wurde um ".concat(i.increase_minutes," Minuten verlängert (endet um ").concat(t.format(t.meeting.voting_ends_at,"HH:mm")," Uhr)"),duration:5e3}),t.$store.dispatch("setCurrentMeeting",t.meeting))})))},methods:{toggleFavorite:function toggleFavorite(){var t=this;this.favorite>0?this.$webservice.post({id:101,idfavorit:this.favorite}).then((function(){t.favorite=0,t.eventBus.$emit("show-notification",{text:"Favorit erfolgreich entfernt"})})):this.$webservice.post({id:101,idsitzung:this.meeting.nummer}).then((function(i){t.favorite=i.data[0].id_favorit,t.eventBus.$emit("show-notification",{text:"Favorit erfolgreich hinzugefügt"})}))},getReadableSizeFromBytes:function getReadableSizeFromBytes(t){return"string"==typeof t?d()(parseInt(t,10)):d()(t)},generateCompletePortfolio:function generateCompletePortfolio(){this.eventBus.$emit("open-file",{src:"/documents.php?id=68&meeting_id=".concat(this.meeting.nummer,"&generate_complete_portfolio&inline"),type:"pdf",filename:this.meeting.complete_portfolio_filename,documentSize:this.meeting.complete_portfolio_size})},openDocument:function openDocument(t){var i=t.documentExtension,a=t.documentUrl,o=t.documentStream,r=t.documentName;this.fileViewerSource=a||o,this.fileViewerType=i||r.split(".").pop().toLowerCase(),this.fileViewerDocumentName=r,this.fileViewerDocumentSize=0,this.showFileViewer=!0}}},tt=(a(619),Object(M.a)(Q,(function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",{staticClass:"meeting-page fixed-content-width"},[a("div",[a("meeting-participants-modal",{attrs:{show:t.showPeopleModal,people:t.meeting.participants,committees:t.meeting.committees,meeting:t.meeting},on:{"update:show":function(i){t.showPeopleModal=i}}}),t._v(" "),a("custom-meeting-brief-modal",{attrs:{show:t.showCustomBriefModal,"meeting-documents":t.meeting.documents,"meeting-attachments":t.meeting.attachments,"agenda-items":t.meeting.agenda_items},on:{"update:show":function(i){t.showCustomBriefModal=i}}}),t._v(" "),Object.keys(t.meeting).length>0?a("div",[a("div",{staticClass:"meeting-page-header"},[a("div",{staticClass:"meeting-page-header-title-wrapper"},[a("div",{staticClass:"meeting-page-header-title"},[a("div",[t._v("\n              "+t._s(t.meeting.titel)+" ("+t._s(t.publicStatus)+")\n            ")])]),t._v(" "),t.contextItems.length>0?a("div",{staticClass:"meeting-page-context-menu"},[a("context-menu",{attrs:{horizontal:"",items:t.contextItems,"mobile-title":t.meeting.title}})],1):t._e()]),t._v(" "),a("div",{staticClass:"meeting-page-header-info-wrapper"},[t.relevantVotingStartDate?a("div",{staticClass:"meeting-page-header-voting-info"},[a("font-awesome-icon",{staticClass:"person-booth-icon",attrs:{icon:"person-booth"}}),t._v(" "),a("div",[a("div",{directives:[{name:"tooltip",rawName:"v-tooltip.right",value:t.votingScheduleDetailsText,expression:"votingScheduleDetailsText",modifiers:{right:!0}}],key:t.votingScheduleText,staticClass:"meeting-page-header-voting-info-relative-time-desktop"},[t._v("\n                "+t._s(t.votingScheduleText)+"\n              ")])])],1):t._e(),t._v(" "),a("div",{staticClass:"meeting-page-header-info"},[a("font-awesome-icon",{staticClass:"info-icon",attrs:{icon:"calendar-alt"}}),t._v(" "),a("div",[t._v("\n              "+t._s(t.format(t.meetingStart,"dd.MM.yyyy"))+", "+t._s(t.format(t.meetingStart,"HH:mm"))+" "+t._s(""!==t.meeting.ende&&"00:00"!==t.meeting.ende&&"00:00:00"!==t.meeting.ende?" - "+t.format(t.meeting.datum+" "+t.meeting.ende,"HH:mm"):"")+" Uhr\n            ")])],1),t._v(" "),""!==t.firstMeetingTime||""!==t.secondMeetingTime?a("div",{staticClass:"meeting-start-time"},[""!==t.firstMeetingTime?a("div",[t._v("\n              "+t._s(t.firstMeetingTime)+"\n            ")]):t._e(),t._v(" "),""!==t.secondMeetingTime?a("div",[t._v("\n              "+t._s(t.secondMeetingTime)+"\n            ")]):t._e()]):t._e(),t._v(" "),t.meeting.room?a("div",{staticClass:"meeting-page-header-info"},[a("font-awesome-icon",{staticClass:"info-icon",attrs:{icon:"map-marker-alt"}}),t._v(" "),a("div",[t._v(t._s(t.meetingAddress))])],1):t._e(),t._v(" "),a("div",{staticClass:"meeting-page-header-info"},[a("font-awesome-icon",{staticClass:"info-icon",attrs:{icon:"users"}}),t._v(" "),a("div",{staticClass:"meeting-page-committees"},t._l(t.meeting.committees,(function(i,o){return a("div",{key:i.Kuerzel,staticClass:"meeting-page-committee-wrapper"},[a("a",{staticClass:"meeting-page-committee",attrs:{href:"/gremien_pers.php?Kuerzel="+i.Kuerzel,target:"_blank"}},[a("div",[t._v(t._s(i.Bezeichnung))])]),t._v(" "),o!==t.meeting.committees.length-1?a("div",{staticClass:"meeting-page-committee-divider"},[t._v("\n                  ,\n                ")]):t._e()])})),0)],1),t._v(" "),void 0!==t.meeting.participants&&t.meeting.participants.length?a("div",[a("span",{staticClass:"meeting-page-header-people",on:{click:function(i){t.showPeopleModal=!0}}},[t._v(t._s(t.meeting.participants.length)+" "),"0"===t.meeting.niederschrift_status?a("span",[t._v("eingeladene")]):a("span",[t._v("anwesende")]),t._v(" Personen")]),t._v(", davon "+t._s(t.peopleAllowedToVote.length)+" stimmberechtigt\n          ")]):""!==t.missingParticipantsText?a("span",{staticClass:"hint-text"},[t._v(t._s(t.missingParticipantsText))]):t._e()]),t._v(" "),t.portfolioCreationAllowed&&t.meeting.complete_portfolio_size&&t.meeting.complete_portfolio_size>0?a("div",{staticClass:"meeting-page-briefs-wrapper"},[a("material-button",{attrs:{icon:"folder",text:"Sitzungsmappe ("+t.getReadableSizeFromBytes(t.meeting.complete_portfolio_size)+")",big:""},on:{click:t.generateCompletePortfolio}}),t._v(" "),a("material-button",{attrs:{icon:"folder",text:"Sitzungsmappe individuell",big:""},on:{click:function(i){t.showCustomBriefModal=!0}}})],1):t._e()]),t._v(" "),t.meeting.documents&&t.meeting.documents.length>0||t.meeting.attachments&&t.meeting.attachments.length>0?a("div",[a("div",{staticClass:"meeting-documents-wrapper"},[t.meeting.documents&&t.meeting.documents.length>0?a("div",{staticClass:"meeting-documents"},[a("div",{staticClass:"meeting-documents-header"},[t._v("\n              Dokumente\n            ")]),t._v(" "),a("div",t._l(t.meeting.documents,(function(i,o){return a("attachment",{key:o,staticClass:"meeting-attachment",attrs:{attachment:i,alias:i.documentType.name,"sub-document-text":i.documentReleasedAt?"veröffentlicht am "+t.format(i.documentReleasedAt,"dd.MM.yyyy")+" um "+t.format(i.documentReleasedAt,"HH:mm")+" Uhr":""}})})),1)]):t._e(),t._v(" "),t.meeting.documents&&t.meeting.attachments?a("div",{staticClass:"meeting-documents-wrapper-divider"}):t._e(),t._v(" "),t.meeting.attachments&&t.meeting.attachments.length>0?a("div",{staticClass:"meeting-documents"},[a("div",{staticClass:"meeting-documents-header"},[t._v("\n              Anlagen\n            ")]),t._v(" "),t.meeting.attachments.length<10?a("div",t._l(t.meeting.attachments,(function(t){return a("div",{staticClass:"meeting-attachment"},[a("attachment",{attrs:{attachment:t}})],1)})),0):a("div",{staticClass:"compact-attachments"},[a("material-button",{attrs:{text:t.meeting.attachments.length+" Anlagen anzeigen",icon:"file-pdf",outlined:""},on:{click:function(i){t.showAttachmentModal=!0}}}),t._v(" "),a("modal",{attrs:{title:"Sitzungsanlagen","has-close-button":"",show:t.showAttachmentModal},on:{"update:show":function(i){t.showAttachmentModal=i}}},[a("div",[a("material-input",{attrs:{icon:"search",small:"",placeholder:"Anlagen durchsuchen"},model:{value:t.attachmentsSearchValue,callback:function(i){t.attachmentsSearchValue=i},expression:"attachmentsSearchValue"}}),t._v(" "),t.filteredAttachments.length?a("div",t._l(t.filteredAttachments,(function(t){return a("div",{key:t.id,staticClass:"meeting-attachment"},[a("attachment",{attrs:{attachment:t}})],1)})),0):a("div",{staticClass:"filtered-attachments-placeholder"},[t._v("\n                    Keine Anlagen mit dem Suchwort gefunden\n                  ")])],1)])],1)]):t._e()])]):t._e(),t._v(" "),t.meeting.video_urls&&t.meeting.video_urls.length>0?a("meeting-video-urls",{attrs:{urls:t.meeting.video_urls}}):t._e(),t._v(" "),t.meeting.agenda_items&&t.meeting.agenda_items.length>0?a("div",[a("div",{staticClass:"meeting-page-agenda-header"},[a("div",{staticClass:"meeting-page-agenda-title"},[a("span",[t._v(t._s(t.translate("agendaItemList")))]),t._v(" "),""!==t.agendaItemsHeadline?a("span",{staticClass:"hint-text"},[t._v(t._s(t.agendaItemsHeadline))]):t._e()]),t._v(" "),t.showCompactToggle?a("toggle",{attrs:{text:"Kompakte Ansicht"},model:{value:t.compactAgendaItems,callback:function(i){t.compactAgendaItems=i},expression:"compactAgendaItems"}}):t._e()],1),t._v(" "),t._l(t.meeting.agenda_items,(function(i,o){return a("agenda-item",{key:i.id,ref:"agendaItem-"+i.id,refInFor:!0,staticClass:"agenda-item",attrs:{"initial-agenda-item":i,meeting:t.meeting,"voting-options":t.meeting.voting_options,"tabs-present":t.agendaItemsTabsPresent[o]},on:{"update:tabsPresent":function(i){return t.$set(t.agendaItemsTabsPresent,o,i)},"update:tabs-present":function(i){return t.$set(t.agendaItemsTabsPresent,o,i)}}})}))],2):""!==t.missingAgendaItemsText?a("div",[a("span",{staticClass:"hint-text",domProps:{innerHTML:t._s(t.missingAgendaItemsText)}})]):t._e()],1):a("div",[t._v("\n      Sie haben nicht die Berechtigung zum Betrachten der Sitzung.\n    ")])],1)])}),[],!1,null,"efafdc1a",null));i.default=tt.exports}}]);